{"version":3,"sources":["webpack://deriv-bot/./src/scratch/help-content/flyout-help-base.jsx"],"names":["HelpBase","props","getHelpString","block_nodes","block_type","getAttribute","title","Blockly","Blocks","meta","display_name","then","help_string","setState","has_help_content","catch","onSequenceClick","state","componentDidMount","componentDidUpdate","prev_state","render","block_help_component","help_config","text_count","derivWorkspace","reshowFlyout","map","component","index","type","url","text","constant","help","TEXT","VIDEO","IMAGE","BLOCK","Object","keys","key","translate","React","PureComponent","propTypes","PropTypes","array","func","string","connect","flyout"],"mappings":"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","file":"main.e4469a.hot-update.js","sourcesContent":["import React            from 'react';\nimport PropTypes        from 'prop-types';\nimport FlyoutVideo      from './help-components/flyout-video.jsx';\nimport FlyoutText       from './help-components/flyout-text.jsx';\nimport FlyoutImage      from './help-components/flyout-img.jsx';\nimport { help_config }  from './help-content.config';\nimport FlyoutBlock      from '../../components/flyout-block.jsx';\nimport constant         from '../../constants/const';\nimport { Arrow2Icon }   from '../../components/Icons.jsx';\nimport { connect }      from '../../stores/connect';\nimport { translate }    from '../../utils/tools';\n\nclass HelpBase extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        const { onSequenceClick, block_nodes } = props;\n\n        this.state = {\n            onSequenceClick,\n            block_nodes,\n            help_string     : null,\n            has_help_content: true,\n        };\n    }\n\n    getHelpString = block_nodes => {\n        const block_type = block_nodes[0].getAttribute('type');\n        const title = Blockly.Blocks[block_type].meta().display_name;\n\n        import(`./help-string/${block_type}.json`)\n            .then(help_string => {\n                this.setState({ help_string, has_help_content: true });\n            })\n            .catch(() => this.setState({ has_help_content: false }));\n\n        this.setState({ title, block_type });\n    }\n\n    componentDidMount() {\n        const { block_nodes } = this.props;\n        this.getHelpString(block_nodes);\n    }\n\n    componentDidUpdate(prev_state) {\n        const { block_nodes } = this.props;\n\n        if (prev_state !== this.props) {\n            this.setState({ ...this.props });\n            this.getHelpString(block_nodes);\n        }\n    }\n\n    render() {\n        const {\n            onSequenceClick,\n            block_type,\n            title,\n            block_nodes,\n            help_string,\n            has_help_content,\n        } = this.state;\n        const block_help_component = help_string && help_config[block_type];\n        let text_count = 0;\n\n        return (\n            <React.Fragment>\n                <div className='flyout__help-header'>\n                    <button className='flyout__button flyout__button-back' onClick={() => Blockly.derivWorkspace.reshowFlyout()}>\n                        <Arrow2Icon />\n                    </button>\n                    <span className='flyout__help-title'>{title}</span>\n                </div>\n                <div className='flyout__help-content'>\n                    {\n                        block_help_component &&\n                        block_help_component.map((component, index) => {\n                            const { type, url } = component;\n                            const { text } = help_string;\n\n                            switch (type) {\n                                case constant.help.TEXT:\n                                    return (\n                                        <FlyoutText key={`${block_type}_${index}`} text={text[text_count++]} />\n                                    );\n                                case constant.help.VIDEO:\n                                    return (\n                                        <FlyoutVideo key={`${block_type}_${index}`} url={url} />\n                                    );\n                                case constant.help.IMAGE:\n                                    return (\n                                        <FlyoutImage key={`${block_type}_${index}`} url={url} />\n                                    );\n                                case constant.help.BLOCK:\n                                {\n                                    return Object.keys(block_nodes).map(key => {\n                                        return (\n                                            <FlyoutBlock\n                                                key={key}\n                                                should_center_block={true}\n                                                block_node={block_nodes[key]}\n                                            />\n                                        );\n                                    });\n                                }\n                                default:\n                                    return null;\n                            }\n                        })\n                    }\n                    {\n                        !has_help_content &&\n                        <div className='flyout__item'>\n                            <h3>Coming soon...</h3>\n                        </div>\n                    }\n                </div>\n                <div className='flyout__help-footer'>\n                    <button className='flyout__button flyout__button-previous' onClick={() => onSequenceClick(block_type, false)}>{translate('Previous')}</button>\n                    <button className='flyout__button flyout__button-next' onClick={() => onSequenceClick(block_type, true)}>{translate('Next')}</button>\n                </div>\n            </React.Fragment >\n        );\n    }\n}\n\nHelpBase.propTypes = {\n    block_nodes    : PropTypes.array,\n    onSequenceClick: PropTypes.func,\n    title          : PropTypes.string,\n};\n\nexport default connect(({ flyout }) => ({\n    onSequenceClick: flyout.onSequenceClick,\n}))(HelpBase);\n"],"sourceRoot":""}