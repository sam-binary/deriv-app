{"version":3,"sources":["webpack://deriv-bot/./src/scratch/help-content/flyout-help-base.jsx"],"names":["HelpBase","props","getHelpString","block_nodes","block_type","getAttribute","title","Blockly","Blocks","meta","display_name","then","help_string","setState","has_help_content","catch","onSequenceClick","state","componentDidMount","componentDidUpdate","prev_state","render","block_help_component","config","text_count","derivWorkspace","reshowFlyout","map","component","type","url","Object","keys","key","translate","React","PureComponent","propTypes","PropTypes","array","func","string","connect","flyout"],"mappings":"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","file":"main.8c0348.hot-update.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport * as config from './help-content.config';\nimport FlyoutVideo from './help-components/flyout-video.jsx';\nimport FlyoutText from './help-components/flyout-text.jsx';\nimport FlyoutImage from './help-components/flyout-img.jsx';\nimport FlyoutBlock from '../../components/flyout-block.jsx';\nimport { Arrow2Icon } from '../../components/Icons.jsx';\nimport { connect } from '../../stores/connect';\nimport { translate } from '../../utils/tools';\n\nclass HelpBase extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        const { onSequenceClick, block_nodes } = props;\n\n        this.state = {\n            onSequenceClick,\n            block_nodes,\n            help_string     : null,\n            has_help_content: true,\n        };\n    }\n\n    getHelpString = block_nodes => {\n        const block_type = block_nodes[0].getAttribute('type');\n        const title = Blockly.Blocks[block_type].meta().display_name;\n\n        import(`./help-string/${block_type}.json`)\n            .then(help_string => {\n                this.setState({ help_string, has_help_content: true });\n            })\n            .catch(() => this.setState({ has_help_content: false }));\n\n        this.setState({ title, block_type });\n    }\n\n    componentDidMount() {\n        const { block_nodes } = this.props;\n        this.getHelpString(block_nodes);\n    }\n\n    componentDidUpdate(prev_state) {\n        const { block_nodes } = this.props;\n\n        if (prev_state !== this.props) {\n            this.setState({ ...this.props });\n            this.getHelpString(block_nodes);\n        }\n    }\n\n    render() {\n        const {\n            onSequenceClick,\n            block_type,\n            title,\n            block_nodes,\n            help_string,\n            has_help_content,\n        } = this.state;\n        const block_help_component = help_string && config[block_type];\n        let text_count = 0;\n\n        return (\n            <React.Fragment>\n                <div className='flyout__help-header'>\n                    <button className='flyout__button flyout__button-back' onClick={() => Blockly.derivWorkspace.reshowFlyout()}>\n                        <Arrow2Icon />\n                    </button>\n                    <span className='flyout__help-title'>{title}</span>\n                </div>\n                <div className='flyout__help-content'>\n                    {\n                        block_help_component &&\n                        block_help_component.map(component => {\n                            const { type, url } = component;\n\n                            switch (type) {\n                                case 'text':\n                                    return (\n                                        <FlyoutText text={help_string[text_count++]} />\n                                    );\n                                case 'video':\n                                    return (\n                                        <FlyoutVideo url={url} />\n                                    );\n                                case 'image':\n                                    return (\n                                        <FlyoutImage url={url} />\n                                    );\n                                case 'block':\n                                {\n                                    return Object.keys(block_nodes).map(key => {\n                                        return (\n                                            <FlyoutBlock\n                                                key={key}\n                                                should_center_block={true}\n                                                block_node={block_nodes[key]}\n                                            />\n                                        );\n                                    });\n                                }\n                                default:\n                                    return null;\n                            }\n                        })\n                    }\n                    {\n                        !has_help_content &&\n                        <div className='flyout__item'>\n                            <h3>Coming soon...</h3>\n                        </div>\n                    }\n                </div>\n                <div className='flyout__help-footer'>\n                    <button className='flyout__button flyout__button-previous' onClick={() => onSequenceClick(block_type, false)}>{translate('Previous')}</button>\n                    <button className='flyout__button flyout__button-next' onClick={() => onSequenceClick(block_type, true)}>{translate('Next')}</button>\n                </div>\n            </React.Fragment >\n        );\n    }\n}\n\nHelpBase.propTypes = {\n    block_nodes    : PropTypes.array,\n    onSequenceClick: PropTypes.func,\n    title          : PropTypes.string,\n};\n\nexport default connect(({ flyout }) => ({\n    onSequenceClick: flyout.onSequenceClick,\n}))(HelpBase);\n"],"sourceRoot":""}