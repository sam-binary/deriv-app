{"version":3,"sources":["webpack://deriv-bot/./node_modules/blockly/generators/javascript.js","webpack://deriv-bot/./node_modules/scratch-blocks/shim/blockly_compressed_vertical.Blockly.js?5e08","webpack://deriv-bot/./node_modules/scratch-blocks/shim/blockly_compressed_vertical.goog.js?d2bd","webpack://deriv-bot/./src/assets/sass/bot.scss?c14e","webpack://deriv-bot/./src/assets/sass/scratch/flyout.scss?cf05","webpack://deriv-bot/./src/assets/sass/scratch/toolbox.scss?9787","webpack://deriv-bot/./src/assets/sass/scratch/workspace.scss?4372","webpack://deriv-bot/./src/components/flyout-block-group.jsx","webpack://deriv-bot/./src/components/flyout-block.jsx","webpack://deriv-bot/./src/components/flyout.jsx","webpack://deriv-bot/./src/scratch/blocks/Advanced/Functions/procedures_callnoreturn.js","webpack://deriv-bot/./src/scratch/blocks/Advanced/Functions/procedures_callreturn.js","webpack://deriv-bot/./src/scratch/blocks/Advanced/Functions/procedures_defnoreturn.js","webpack://deriv-bot/./src/scratch/blocks/Advanced/Functions/procedures_defreturn.js","webpack://deriv-bot/./src/scratch/blocks/Advanced/Functions/procedures_ifreturn.js","webpack://deriv-bot/./src/scratch/blocks/Advanced/List/lists_create_with.js","webpack://deriv-bot/./src/scratch/blocks/Advanced/List/lists_getIndex.js","webpack://deriv-bot/./src/scratch/blocks/Advanced/List/lists_getSublist.js","webpack://deriv-bot/./src/scratch/blocks/Advanced/List/lists_indexOf.js","webpack://deriv-bot/./src/scratch/blocks/Advanced/List/lists_isEmpty.js","webpack://deriv-bot/./src/scratch/blocks/Advanced/List/lists_length.js","webpack://deriv-bot/./src/scratch/blocks/Advanced/List/lists_repeat.js","webpack://deriv-bot/./src/scratch/blocks/Advanced/List/lists_setIndex.js","webpack://deriv-bot/./src/scratch/blocks/Advanced/List/lists_sort.js","webpack://deriv-bot/./src/scratch/blocks/Advanced/List/lists_split.js","webpack://deriv-bot/./src/scratch/blocks/Advanced/List/lists_statement.js","webpack://deriv-bot/./src/scratch/blocks/Advanced/Loops/controls_flow_statements.js","webpack://deriv-bot/./src/scratch/blocks/Advanced/Loops/controls_for.js","webpack://deriv-bot/./src/scratch/blocks/Advanced/Loops/controls_forEach.js","webpack://deriv-bot/./src/scratch/blocks/Advanced/Loops/controls_repeat.js","webpack://deriv-bot/./src/scratch/blocks/Advanced/Loops/controls_repeat_ext.js","webpack://deriv-bot/./src/scratch/blocks/Advanced/Loops/controls_whileUntil.js","webpack://deriv-bot/./src/scratch/blocks/Advanced/Variable/variables_get.js","webpack://deriv-bot/./src/scratch/blocks/Advanced/Variable/variables_set.js","webpack://deriv-bot/./src/scratch/blocks/Binary/After Purchase/after_purchase.js","webpack://deriv-bot/./src/scratch/blocks/Binary/After Purchase/check_result.js","webpack://deriv-bot/./src/scratch/blocks/Binary/After Purchase/read_details.js","webpack://deriv-bot/./src/scratch/blocks/Binary/After Purchase/trade_again.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Before Purchase/ask_price.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Before Purchase/before_purchase.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Before Purchase/payout.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Before Purchase/purchase.js","webpack://deriv-bot/./src/scratch/blocks/Binary/During Purchase/check_sell.js","webpack://deriv-bot/./src/scratch/blocks/Binary/During Purchase/during_purchase.js","webpack://deriv-bot/./src/scratch/blocks/Binary/During Purchase/sell_at_market.js","webpack://deriv-bot/./src/scratch/blocks/Binary/During Purchase/sell_price.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Indicators/Parts/fast_ema_period.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Indicators/Parts/input_list.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Indicators/Parts/period.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Indicators/Parts/signal_ema_period.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Indicators/Parts/slow_ema_period.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Indicators/Parts/std_dev_multiplier_down.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Indicators/Parts/std_dev_multiplier_up.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Indicators/bb_statement.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Indicators/bba_statement.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Indicators/ema_statement.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Indicators/emaa_statement.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Indicators/macda_statement.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Indicators/rsi_statement.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Indicators/rsia_statement.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Indicators/sma_statement.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Indicators/smaa_statement.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Tick Analysis/check_direction.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Tick Analysis/get_ohlc.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Tick Analysis/lastDigitList.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Tick Analysis/last_digit.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Tick Analysis/ohlc.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Tick Analysis/ohlc_values.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Tick Analysis/readOhlc.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Tick Analysis/tick.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Tick Analysis/tick_analysis.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Tick Analysis/ticks.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Tools/Candle/is_candle_black.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Tools/Candle/ohlc_values_in_list.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Tools/Candle/read_ohlc_obj.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Tools/Misc./balance.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Tools/Misc./block_holder.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Tools/Misc./loader.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Tools/Misc./notify.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Tools/Misc./total_profit.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Tools/Misc./total_runs.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Tools/Time/epoch.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Tools/Time/timeout.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Trade Definition/trade_definition.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Trade Definition/trade_definition_candleinterval.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Trade Definition/trade_definition_contracttype.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Trade Definition/trade_definition_market.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Trade Definition/trade_definition_restartbuysell.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Trade Definition/trade_definition_restartonerror.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Trade Definition/trade_definition_tradeoptions.js","webpack://deriv-bot/./src/scratch/blocks/Binary/Trade Definition/trade_definition_tradetype.js","webpack://deriv-bot/./src/scratch/blocks/Logic/controls_if.js","webpack://deriv-bot/./src/scratch/blocks/Logic/logic_boolean.js","webpack://deriv-bot/./src/scratch/blocks/Logic/logic_compare.js","webpack://deriv-bot/./src/scratch/blocks/Logic/logic_negate.js","webpack://deriv-bot/./src/scratch/blocks/Logic/logic_null.js","webpack://deriv-bot/./src/scratch/blocks/Logic/logic_operation.js","webpack://deriv-bot/./src/scratch/blocks/Logic/logic_ternary.js","webpack://deriv-bot/./src/scratch/blocks/Math/math_arithmetic.js","webpack://deriv-bot/./src/scratch/blocks/Math/math_change.js","webpack://deriv-bot/./src/scratch/blocks/Math/math_constant.js","webpack://deriv-bot/./src/scratch/blocks/Math/math_constrain.js","webpack://deriv-bot/./src/scratch/blocks/Math/math_modulo.js","webpack://deriv-bot/./src/scratch/blocks/Math/math_number.js","webpack://deriv-bot/./src/scratch/blocks/Math/math_number_positive.js","webpack://deriv-bot/./src/scratch/blocks/Math/math_number_property.js","webpack://deriv-bot/./src/scratch/blocks/Math/math_on_list.js","webpack://deriv-bot/./src/scratch/blocks/Math/math_random_float.js","webpack://deriv-bot/./src/scratch/blocks/Math/math_random_int.js","webpack://deriv-bot/./src/scratch/blocks/Math/math_round.js","webpack://deriv-bot/./src/scratch/blocks/Math/math_single.js","webpack://deriv-bot/./src/scratch/blocks/Math/math_trig.js","webpack://deriv-bot/./src/scratch/blocks/Text/text.js","webpack://deriv-bot/./src/scratch/blocks/Text/text_append.js","webpack://deriv-bot/./src/scratch/blocks/Text/text_changeCase.js","webpack://deriv-bot/./src/scratch/blocks/Text/text_charAt.js","webpack://deriv-bot/./src/scratch/blocks/Text/text_getSubstring.js","webpack://deriv-bot/./src/scratch/blocks/Text/text_indexOf.js","webpack://deriv-bot/./src/scratch/blocks/Text/text_isEmpty.js","webpack://deriv-bot/./src/scratch/blocks/Text/text_join.js","webpack://deriv-bot/./src/scratch/blocks/Text/text_length.js","webpack://deriv-bot/./src/scratch/blocks/Text/text_print.js","webpack://deriv-bot/./src/scratch/blocks/Text/text_prompt_ext.js","webpack://deriv-bot/./src/scratch/blocks/Text/text_statement.js","webpack://deriv-bot/./src/scratch/blocks/Text/text_trim.js","webpack://deriv-bot/./src/scratch/help-content/flyout-help-base.jsx","webpack://deriv-bot/./src/scratch/help-content/help-content.config.js","webpack://deriv-bot/./src/scratch/hooks/block.js","webpack://deriv-bot/./src/scratch/hooks/block_svg.js","webpack://deriv-bot/./src/scratch/hooks/colours.js","webpack://deriv-bot/./src/scratch/hooks/constant.js","webpack://deriv-bot/./src/scratch/hooks/data_category.js","webpack://deriv-bot/./src/scratch/hooks/field_dropdown.js","webpack://deriv-bot/./src/scratch/hooks/field_image.js","webpack://deriv-bot/./src/scratch/hooks/flyout_base.js","webpack://deriv-bot/./src/scratch/hooks/gesture.js","webpack://deriv-bot/./src/scratch/hooks/icon.js","webpack://deriv-bot/./src/scratch/hooks/procedures.js","webpack://deriv-bot/./src/scratch/hooks/toolbox.js","webpack://deriv-bot/./src/scratch/hooks/variables.js","webpack://deriv-bot/./src/scratch/hooks/workspace_audio.js","webpack://deriv-bot/./src/scratch/hooks/workspace_svg.js","webpack://deriv-bot/./src/scratch/hooks/xml.js","webpack://deriv-bot/./src/scratch/index.js","webpack://deriv-bot/./src/scratch/shared.js","webpack://deriv-bot/./src/scratch/utils.js","webpack://deriv-bot/./src/stores/flyout-store.js"],"names":["FlyoutBlockGroup","props","onInfoClick","block_nodes","block_type","getAttribute","block_meta","Blockly","Blocks","meta","display_name","description","translate","Object","keys","map","key","propTypes","PropTypes","array","func","FlyoutBlock","render","block_node","derivWorkspace","addBlockNode","el","el_block_workspace","componentDidMount","initBlockWorkspace","should_center_block","React","PureComponent","any","bool","connect","flyout","Flyout","is_help_content","flyout_content","flyout_width","is_visible","showHelpContent","width","index","nodes","node","tag_name","tagName","toUpperCase","Xml","NODE_BLOCK","flyout_block_key","Block","isDynamic","Math","random","config","NODE_LABEL","NODE_BUTTON","callback_key","callback","getButtonCallback","button","flyout_button","targetWorkspace_","getTargetWorkspace","number","procedures_callnoreturn","init","arguments","argumentVarModels","previousDisabledState","jsonInit","definition","message0","args0","type","name","text","id","colour","Colours","BinaryProcedures","colourSecondary","colourTertiary","previousStatement","nextStatement","tooltip","category","Categories","Functions","onchange","event","setBlockTextColor","workspace","isFlyout","recordUndo","Events","BLOCK_CREATE","ids","indexOf","getProcedureCall","def","getProcedureDefinition","unplug","dispose","data","defType","JSON","stringify","setGroup","group","xml","document","createElement","block","setAttribute","xy","getRelativeToSurfaceXY","x","SNAP_RADIUS","RTL","y","mutation","mutationToDom","appendChild","field","createTextNode","domToWorkspace","BLOCK_DELETE","Procedures","getDefinition","BLOCK_CHANGE","element","blockId","oldGroup","getGroup","console","log","newValue","disabled","setDisabled","getTopBlocks","find","tuple","Names","equals","getFieldValue","renameProcedure","oldName","newName","setFieldValue","setProcedureParameters","paramNames","concat","argumentName","Variables","getOrCreateVariablePackage","updateShape","forEach","i","getField","disable","setValue","enable","FieldLabel","input","appendValueInput","appendField","length","getInput","removeInput","topRow","removeField","container","parameter","domToMutation","xmlElement","args","paramIds","childNodes","childNode","nodeName","toLowerCase","push","getVarModels","customContextMenu","options","isMovable","option","enabled","centerOnBlock","select","functionName","variableDB_","getName","NAME_TYPE","arg","valueToCode","ORDER_COMMA","code","join","procedures_callreturn","output","ORDER_FUNCTION_CALL","procedures_defnoreturn","nameField","setValidator","rename","fieldImage","FieldImage","plusIconLight","onAddClick","appendDummyInput","setStatements","allowedEvents","includes","getProcedureCallers","isInFlyout","setTimeout","promptMessage","prompt","paramName","variable","paramField","setText","initSvg","hasStatements","appendStatementInput","moveInputBefore","updateParams","paramString","optParamIds","getId","varName","varId","getProcedureDef","getAllBlocks","filter","callType","getVars","Msg","PROCEDURES_CREATE_DO","replace","xmlMutation","xmlArg","xmlBlock","ContextMenu","callbackFactory","isCollapsed","argumentVarModel","getOption","VARIABLES_SET_CREATE_GET","xmlField","generateVariableFieldDom","xmlOptionBlock","branch","statementToCode","STATEMENT_PREFIX","prefixLines","INDENT","INFINITE_LOOP_TRAP","returnValue","ORDER_NONE","scrub_","definitions_","procedures_defreturn","plusIconDark","message1","args1","check","align","ALIGN_RIGHT","renameVarById","updateVarName","displayRenamedVar","registerWorkspaceListener","procedures_ifreturn","hasReturnValue","Number","value","isDragging","legal","FUNCTION_TYPES","getSurroundParent","rerender","getInheritedDisabled","condition","lists_create_with","onIconClick","Binary","List","statementBlock","newBlock","requiredParentId","setMovable","connection","getLastConnectionInStatement","previousConnection","END_DRAG","currentBlock","getInputTargetBlock","getNextBlock","elements","Array","isArray","lists_getIndex","MODE_OPTIONS","WHERE_OPTIONS","modeMenu","FieldDropdown","isStatement","updateStatement","setCheck","setColourFromRawValues_","setOutput","updateAt","outputConnection","isAt","INPUT_VALUE","newStatement","oldStatement","setPreviousStatement","setNextStatement","menu","newAt","undefined","mode","where","listOrder","ORDER_MEMBER","list","order","at","getAdjusted","provideFunction_","FUNCTION_NAME_PLACEHOLDER_","lists_getSublist","WHERE_OPTIONS_1","WHERE_OPTIONS_2","setOutputShape","OUTPUT_SHAPE_ROUND","isAt1","isAt2","n","where1","where2","at1","at2","match","ORDER_SUBTRACTION","wherePascalCase","FROM_START","FROM_END","getIndex","listName","lists_indexOf","outputShape","operator","item","oneBasedIndex","ORDER_ADDITION","lists_isEmpty","OUTPUT_SHAPE_HEXAGONAL","isVariable","getAllVariables","findIndex","ORDER_LOGICAL_NOT","lists_length","lists_repeat","repeatCount","lists_setIndex","ORDER_ASSIGNMENT","cacheList","listVar","getDistinctName","xVar","lists_sort","direction","getCompareFunctionName","lists_split","dropdown","newMode","updateType","delimInput","spaceField","insertFieldAt","delimiter","lists_statement","minusIconDark","BinaryLessGray","surroundParent","parentBlock","parentConnection","ORDER_ATOMIC","controls_flow_statements","Loop","keyword","controls_for","variable0","argument0","argument1","increment","addLoopTrap","isNumber","up","parseFloat","step","abs","assignment","statement","startVar","endVar","incVar","incVal","controls_forEach","indexVar","controls_repeat","min","precision","controls_repeat_ext","repeats","String","loopVar","controls_whileUntil","until","maxLoopVar","currentLoopVar","variables_get","variables_set","after_purchase","src","finishSign","height","alt","After_Purchase","stack","contract_check_result","lists","CHECK_RESULT","isDescendantOf","checkWith","read_details","DETAILS","detailIndex","trade_again","ask_price","getPurchaseChoices","Before_Purchase","purchaseList","before_purchase","purchase","payout","tradeDefinitionBlock","tradeTypeBlock","getChildByType","tradeType","contractTypeBlock","contractType","oppositesName","updatePurchaseChoices","check_sell","During_Purchase","during_purchase","sellContract","sell_at_market","sell_price","fast_ema_period","setDeletable","input_list","allowedParents","period","signal_ema_period","slow_ema_period","std_dev_multiplier_down","std_dev_multiplier_up","bb_statement","bbResult","Indicators","blocksInStatement","getBlocksInStatement","requiredParamBlocks","expectValue","childValueToCode","stdDevUp","stdDevDown","bba_statement","ema_statement","emaa_statement","macda_statement","macdFields","macdField","fastEmaPeriod","slowEmaPeriod","signalEmaPeriod","rsi_statement","rsia_statement","sma_statement","getChildFieldValue","smaa_statement","check_direction","CHECK_DIRECTION","Tick_Analysis","get_ohlc","candleIntervals","selectedGranularity","granularity","lastDigitList","last_digit","ohlc","ohlc_values","ohlcFields","ohlcField","read_ohlc","tick","tick_analysis","ticks","is_candle_black","Candle","ohlcObj","ohlc_values_in_list","ohlcList","read_ohlc_obj","balance","balanceTypeField","OUTPUT_SHAPE_SQUARE","BALANCE_TYPE","Miscellaneous","balanceType","block_holder","loader","loadedByMe","loadedVariables","currentUrl","urlField","onFinishEditing_","onFinishEditingUrl","hasKnownUrl","some","loadRemote","then","globalObserver","emit","catch","errorMsg","v","safeName_","toString","notify","NOTIFICATION_TYPE","NOTIFICATION_SOUND","cateogry","notificationType","sound","message","total_profit","total_runs","epoch","Time","timeout","allowedScopes","scope","seconds","trade_definition","message2","message3","message4","message5","defineContract","args2","args3","args4","args5","Trade_Definition","enforceTradeDefinitionType","tradeDefinitionMarket","selectedMarket","eventArgs","changeEvent","BlockChange","fire","test","account","$","first","attr","Error","symbol","contractTypeSelector","contractTypeList","opposites","k","candleIntervalValue","shouldRestartOnError","timeMachineEnabled","initialization","tradeOptionsStatement","trim","trade_definition_candleinterval","slice","BinaryLessPurple","enforceParent","trade_definition_market","trade_definition_contracttype","topParentBlock","getTopParent","getContractTypes","oppositesToDropdown","updateTypeList","useDefault","typeList","typeListArgs","getValue","updateOptions","fieldGeneratorMapping","MARKET_LIST","updateMarketLists","fields","listArgs","trade_definition_restartbuysell","trade_definition_restartonerror","trade_definition_tradeoptions","durationUnit","pollForContracts","contracts","durations","getDurationsForContracts","updateDurationInput","updateBarrierInputs","applyBarrierHandlebars","createPredictionInput","predictionRange","predictionInput","shadowBlock","setShadow","createBarrierInput","barriers","startIndex","inputNames","inputLabels","values","label","barrierTypes","setMinDuration","durationList","duration","unit","durationInput","isConnected","targetBlock","isShadow","minDuration","minimum","selectedBarrierTypes","getBarriersForContracts","barrierTypeList","absoluteType","allowBothTypes","allowAbsoluteType","barrierInputName","otherBarrierListName","otherBarrierList","otherBarrierType","otherValue","hasFirstBarrier","hasSecondBarrier","hasPrediction","durationValue","durationType","currency","amount","predictionValue","getBarrierValue","barrierOffsetType","barrierOffsetValue","secondBarrierOffsetValue","trade_definition_tradetype","marketBlock","updateTradeTypeCatList","tradeTypeCatList","tradeTypeCatArgs","TRADETYPECAT_LIST","updateTradeTypeList","tradeTypeList","tradeTypeArgs","TRADETYPE_LIST","updatePredictionInputs","updateDurationInputs","tradeOptionsBlock","barrierOffsetNames","barrierLabels","firstBarrierType","secondBarrierType","firstBarrierInput","secondBarrierInput","barrierValue","typeInput","fieldRow","barrierInputArgs","getPredictionForContracts","durationUnits","controls_if","elseIfCount","elseCount","addInputIcon","getAddInputIcon","Logic","parseInt","j","getRemoveInputIcon","newInputNum","isElseStack","onRemoveClick","inputName","largerInput","newIndex","splice","logic_boolean","logic_compare","operatorMapping","EQ","NEQ","LT","LTE","GT","GTE","ORDER_EQUALITY","ORDER_RELATIONAL","logic_negate","logic_null","logic_operation","selectedOperator","ORDER_LOGICAL_AND","ORDER_LOGICAL_OR","logic_ternary","valueIf","ORDER_CONDITIONAL","valueThen","valueElse","math_arithmetic","Mathematical","operators","ADD","MINUS","MULTIPLY","ORDER_MULTIPLICATION","DIVIDE","ORDER_DIVISION","POWER","math_change","math_constant","constant","math_constrain","argument2","math_modulo","ORDER_MODULUS","math_number","fieldInput","numberValidator","math_number_positive","math_number_property","setOnChange","hasDivisorInput","toolip","divisorInput","inputExists","property","divisor","math_on_list","operation","FUNCTION_CALL","math_random_float","math_random_int","math_round","math_single","ORDER_UNARY_NEGATION","math_trig","Text","quote_","text_append","forceString","strRegExp","text_changeCase","UPPERCASE","LOWERCASE","TITLECASE","textOrder","text_charAt","text_getSubstring","stringName","optAt","FIRST","LAST","text_indexOf","substring","text_isEmpty","text_join","bind","textBlock","textInput","enforceTextStatementType","text_length","text_print","msg","text_prompt_ext","typeField","text_statement","text_trim","LEFT","RIGHT","BOTH","HelpBase","getHelpString","title","help_string","setState","has_help_content","onSequenceClick","state","componentDidUpdate","prev_state","block_help_component","text_count","reshowFlyout","component","url","string","TEXT","VIDEO","IMAGE","BLOCK","module","exports","prototype","getDisplayName","getSiblings","siblings","parent","getParent","getDescendants","child","childType","childField","childBlock","statementInputName","firstBlock","firstBlockInStack","lastConnectionInStack","statementInput","nextParent","getDimensions","Options","media","__webpack_public_path__","fragment","createDocumentFragment","el_injection_div","svg","createDom_","createMainWorkspace_","domToBlock","block_hw","getHeightWidth","BlockSvg","TAB_WIDTH","superClass_","call","rendered","updateDisabled","added","utils","addClass","svgGroup_","svgPath_","disabledPatternId","removed","removeClass","updateColour","children","getChildren","showContextMenu_","e","readOnly","contextMenu","menuOptions","isDeletable","blockDuplicateOption","isEditable","comments","blockCommentOption","blockDeleteOption","parentBlock_","isShadow_","collapse","collapsed_","expandOption","setCollapsed","collapseOption","disableOption","show","BinaryPurple","DRAG_RADIUS","FLYOUT_DRAG_RADIUS","DataCategory","variableModelList","getVariablesOfType","xmlList","addCreateButton","block_types","search","generateVariableFieldXmlString","variableModel","escapedText","goog","htmlEscape","firstVariable","gap","setBlockText","setBlock","textToDom","firstChild","changeBlockText","changeBlock","sort","VariableModel","compareByName","getBlockText","getBlock","buttonXml","dom","createDom","callbackKey","buttonWorkspace","createVariable","toolbox","toolbox_","getSelectedItem","setSelectedItem","registerButtonCallback","optDefault","triggerEvent","previousValue","menuGenerator_","sourceBlock_","optAlt","optOnClick","optFlipRtl","height_","width_","size_","math","Size","flipRtl_","tooltip_","clickHandler_","inherits","Field","fromJson","replaceMessageReferences","flipRtl","EDITABLE","fieldGroup_","createSvgElement","visible_","style","display","imageElement_","src_","text_","getSvgRoot","setTooltip","Tooltip","bindMouseEvents","maybeAddClickHandler_","removeNode","mouseDownWrapper_","bindEventWithChecks_","cursor","newTip","setAttributeNS","getFlipRtl","render_","forceRerender","updateWidth","showEditor_","register","createBlock","originalBlock","variablesBeforeCreation","setResizesEnabled","placeNewBlock_","hideChaff","newVariables","getAddedVariables","isEnabled","Create","thisVariable","VarCreate","autoClose","hide","clearSelection","oldBlock","targetWorkspace","svgRootOld","blockToDom","svgRootNew","mainOffsetPixels","getOriginOffsetInPixels","flyoutOffsetPixels","workspace_","oldBlockPosPixels","Coordinate","clientX","clientY","oldBlockOffsetPixels","sum","finalOffsetPixels","difference","finalOffsetMainWs","scale","moveBy","Gesture","updateIsDraggingFromFlyout_","targetBlock_","flyout_","isScrollable","isDragTowardWorkspace","currentDragDeltaXY_","startWorkspace_","updateScreenCalculationsIfScrolled","startBlock_","mostRecentEvent_","Icon","renderIcon","cursorX","collapseHidden","block_","iconGroup_","newCursorX","TOP_MARGIN","SIZE","computeIconLocation","SEP_SPACE_X","flyoutCategory","allProcedures","populateDynamicProcedures","populateProcedures","procedureList","templateName","blocks","isNameUsed","optExclude","procName","WorkspaceDragger","drag","currentDragDeltaXY","metrics","startDragMetrics_","newXY","startScrollXY_","contentLeft","contentTop","max","viewWidth","contentWidth","viewHeight","contentHeight","updateScroll_","Toolbox","getParentSvg","HtmlDiv","TagName","DIV","el_toolbox_header","el_toolbox_title","textContent","el_toolbox_search","INPUT","addEventListener","setVisibility","parentNode","insertBefore","cancelCurrentGesture","isRightButton","target","Touch","clearTouchIdentifier","createFlyout_","categoryMenu_","CategoryMenu","populate_","languageTree","position","newTree","populate","showCategory_","category_id","search_term","getElementById","all_variables","all_procedures","split","blockKey","keywords","Function","block_definition","block_category","categories_","menuCategory","id_","contents","getContents","fnToApply","getToolboxCategoryCallback","term","blockContents","content","attributes","nodeValue","searched_variables","variables_blocks","uniqueVarBlocks","variableBlock","searched_procedures","procedures_blocks","uniqueProceBlocks","procedureBlock","selected_category","getCategoryContents","setContents","xml_list","Category","getMenuItemClassName_","selected","classNames","should_close_on_same_category","category_item","selectedItem_","setSelected","is_category_return_","has_child_category_","getCategoryTree","parent_name","parent_id","xml_document","implementation","createDocument","el_xml","parent_category","el_separator","category_nodes","from","findCategory","category_collection","el_category","is_correct_child","initial_toolbox_xml","toolboxDom","el_parent","parentElement","updateToolbox","name_","colour_","contents_","refreshSelection","parent_","el_item","item_","el_return_arrow","ReactDOM","el_colour","el_label","el_toolbox_text","label_","description_","el_description","el_category_arrow","iconURI_","el_icon","class","innerHTML","parentHtml_","bindEvent_","setSelectedItemFactory","custom_","dynamic_","parseContents_","domTree","tag","setColour","isString","hueToRgb","hasColours_","className","horizontalLayout_","table","isSubCategory","is_category","is_separator","row_class","el_row","web_classes","classList","add","toolbox_category","subCategory","offsetHeight","refreshCategory","allUsedVarModels","ws","variableHash","create","blockVariables","blockVariable","variableList","WorkspaceAudio","preload","WorkspaceSvg","scrollbar","warn","getBlockById","heightWidth","blockCenterY","multiplier","blockCenterX","pixelX","pixelY","getMetrics","scrollToBlockX","scrollToBlockY","halfViewWidth","halfViewHeight","scrollToCenterX","scrollToCenterY","set","top_blocks","last_block","last_block_xy","extra_spacing","startHat_","START_HAT_HEIGHT","NODE_SHADOW","scratchWorkspaceInit","scratch_area_name","scratch_div_name","el_scratch_area","el_scratch_div","el_app_contents","fetch","response","toolbox_xml","main_xml","inject","grid","spacing","trashcan","zoom","wheel","el_blockly_svg","querySelector","contains","onWorkspaceResize","offsetLeft","offsetTop","offsetParent","left","top","offsetWidth","svgResize","window","setBeforeUnload","off","onbeforeunload","disableStrayBlocks","topBlocks","mainWorkspace","isMainBlock","marketsWereRemoved","every","removeUnavailableMarkets","trackJs","track","showDialog","buttons","click","dialog","loadWorkspace","strategyHasValidTradeTypeCategory","clear","backwardCompatibility","fixArgumentAttribute","addLoadersFirst","fixCollapsedBlocks","loadBlocks","dropEvent","variables","getElementsByTagName","domToVariables","loaders","addedBlocks","addDomAsBlock","b","cleanUpOnLoad","xmlToStr","serializer","XMLSerializer","serializeToString","addBlocklyTranslation","ajaxPrefilter","async","lang","getLanguage","Promise","resolve","getScript","onresize","blocklyArea","blocklyDiv","overrideBlocklyDefaultShape","addDownloadToMenu","save","blockName","downloadDisabledBlocks","repaintDefaultColours","LOGIC_HUE","LOOPS_HUE","MATH_HUE","TEXTS_HUE","LISTS_HUE","COLOUR_HUE","VARIABLES_HUE","VARIABLES_DYNAMIC_HUE","PROCEDURES_HUE","_Blockly","blocksXmlStr","generatedJs","initPromise","get","toolboxXml","translateXml","startScale","scrollbars","addChangeListener","GTM","pushDataLayer","blockEvent","blockType","oldXml","outerHTML","blockNodes","blockNode","renderInstance","main","domToPrettyText","zoomOnPlusMinus","cleanUp","clearUndo","zoomIn","resetWorkspace","cursorY","snapToGrid","MIN_BLOCK_Y","resizeContents","load","blockStr","createError","hasAttribute","filename","collection","workspaceToDom","cleanBeforeExport","run","limitations","workspaceToCode","stop","interpreter","Interpreter","stopBeforeStart","$runButtons","$stopButtons","is","undo","redo","hasStarted","purchaseChoices","saveAs","blob","Blob","filesaver","filterPurchaseChoices","tradeTypes","tmpPurchaseChoices","purchases","r","WidgetDiv","hideIfOwner","getActiveSymbols","symbols","reduce","acc","symbolApi","getAllowedCategories","getActiveSubMarket","submarkets","submarket","getActiveMarket","markets","market","activeSymbols","getMarkets","SUBMARKET_LIST","marketName","SYMBOL_LIST","submarketName","allowedCategories","conditionsCategoryName","tradeTypeCat","conditionsCategory","c","dependentFieldMapping","contractsForStore","parse","localStorage","getItem","getContractCategory","matchesBarrierCategory","contract","contractCategory","conditions","barrierCategories","barrierCategory","barrier_category","filterContractsByCategory","start_type","contract_category","contractsAvailable","selectedContractType","defaultDurations","noDurationsAvailable","getMinimumAmount","getDurationIndex","d","offeredDurations","contractsForContractCategory","min_contract_duration","max_contract_duration","endIndex","offeredDuration","expiry_type","dayDurationIndex","a","haveContractsForSymbol","underlyingSymbol","contractsForSymbol","tokenList","getTokenList","isDifferentAccount","accountName","isExpiredData","floor","Date","now","timestamp","isRegistered","getContractsAvailableForSymbolFromApi","getContractsAvailableForSymbol","contractsAvailableForSymbol","available","api","generateLiveApiInstance","authorize","token","removeAllTokens","getContractsForSymbol","contracts_for","assign","setItem","unregisterAll","addMetadata","disconnect","selectedDuration","offsetRegex","RegExp","isOffset","barrierProps","barrierType","selectedOffset","barrierIsOffset","barrier","high_barrier","shift","barrierlessCategories","propName","barrierMatch","val","toFixed","contractMapping","matchesdiffers","overunder","highlowticks","contract_type","last_digit_range","pollingFn","setInterval","clearInterval","mainBlocks","op","entries","reverse","removeAttribute","containsUnavailableMarket","innerText","nodesToRemove","removeChild","isTradeTypeListBlock","xmlBlocks","containsTradeTypeBlock","validTradeTypeCategory","xmlFields","tradeTypeCategory","tradeTypeCategoryIsEqual","f","tempWorkspace","Workspace","blocklyBlock","availableCategories","errorMessage","getCollapsedProcedures","blocksToClean","blocklyMetrics","scaleCancellation","blocklyLeft","absoluteLeft","viewLeft","blocklyTop","body","viewTop","deleteBlockIfExists","existed","mainBlock","inputList","inp","svgElement","setProperty","configMainBlock","ev","getBlockByType","getBlocksByType","getTopBlocksByType","getMainBlocks","findTopParentBlock","pblock","insideMainBlocks","xmlDom","blockObj","expandDuration","isProcedure","DeleteStray","sourceBlock","Abstract","Hide","header","sourceHeaderId","sourceHeader","loaderId","deleteBlocksLoadedBy","eventGroup","o","blockXml","recoverDeletedBlock","addDomAsBlockFromHeader","processLoaders","promises","remove","reject","all","loadBlocksFromHeader","isNew","ajax","fail","status","statusText","done","hideInteractionsFromBlockly","blockDom","FlyoutStore","action","bound","block_listeners","block_workspaces","flyout_min_width","processed_xml","listener","unbindEvent_","has_result","xml_list_group","groupBy","observable","setFlyoutWidth","css","move","sounds","block_workspace_height","dx","dy","blockly_flyout","blockMouseDown_","longest_block_width","block_name","should_go_next","current_block","current_block_index","last_position","adjustIndexOutOfBounds","current_index","last_index","current_pos","target_blocks","should_include_block_only","block_group"],"mappings":"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","file":"main.7fa2b2.hot-update.js","sourcesContent":["/**\n * @license\n * Visual Blocks Language\n *\n * Copyright 2012 Google Inc.\n * https://developers.google.com/blockly/\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Helper functions for generating JavaScript for blocks.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.JavaScript');\n\ngoog.require('Blockly.Generator');\n\n\n/**\n * JavaScript code generator.\n * @type {!Blockly.Generator}\n */\nBlockly.JavaScript = new Blockly.Generator('JavaScript');\n\n/**\n * List of illegal variable names.\n * This is not intended to be a security feature.  Blockly is 100% client-side,\n * so bypassing this list is trivial.  This is intended to prevent users from\n * accidentally clobbering a built-in object or function.\n * @private\n */\nBlockly.JavaScript.addReservedWords(\n    'Blockly,' +  // In case JS is evaled in the current window.\n    // https://developer.mozilla.org/en/JavaScript/Reference/Reserved_Words\n    'break,case,catch,continue,debugger,default,delete,do,else,finally,for,function,if,in,instanceof,new,return,switch,this,throw,try,typeof,var,void,while,with,' +\n    'class,enum,export,extends,import,super,implements,interface,let,package,private,protected,public,static,yield,' +\n    'const,null,true,false,' +\n    // https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects\n    'Array,ArrayBuffer,Boolean,Date,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Error,eval,EvalError,Float32Array,Float64Array,Function,Infinity,Int16Array,Int32Array,Int8Array,isFinite,isNaN,Iterator,JSON,Math,NaN,Number,Object,parseFloat,parseInt,RangeError,ReferenceError,RegExp,StopIteration,String,SyntaxError,TypeError,Uint16Array,Uint32Array,Uint8Array,Uint8ClampedArray,undefined,uneval,URIError,' +\n    // https://developer.mozilla.org/en/DOM/window\n    'applicationCache,closed,Components,content,_content,controllers,crypto,defaultStatus,dialogArguments,directories,document,frameElement,frames,fullScreen,globalStorage,history,innerHeight,innerWidth,length,location,locationbar,localStorage,menubar,messageManager,mozAnimationStartTime,mozInnerScreenX,mozInnerScreenY,mozPaintCount,name,navigator,opener,outerHeight,outerWidth,pageXOffset,pageYOffset,parent,performance,personalbar,pkcs11,returnValue,screen,screenX,screenY,scrollbars,scrollMaxX,scrollMaxY,scrollX,scrollY,self,sessionStorage,sidebar,status,statusbar,toolbar,top,URL,window,' +\n    'addEventListener,alert,atob,back,blur,btoa,captureEvents,clearImmediate,clearInterval,clearTimeout,close,confirm,disableExternalCapture,dispatchEvent,dump,enableExternalCapture,escape,find,focus,forward,GeckoActiveXObject,getAttention,getAttentionWithCycleCount,getComputedStyle,getSelection,home,matchMedia,maximize,minimize,moveBy,moveTo,mozRequestAnimationFrame,open,openDialog,postMessage,print,prompt,QueryInterface,releaseEvents,removeEventListener,resizeBy,resizeTo,restore,routeEvent,scroll,scrollBy,scrollByLines,scrollByPages,scrollTo,setCursor,setImmediate,setInterval,setResizable,setTimeout,showModalDialog,sizeToContent,stop,unescape,updateCommands,XPCNativeWrapper,XPCSafeJSObjectWrapper,' +\n    'onabort,onbeforeunload,onblur,onchange,onclick,onclose,oncontextmenu,ondevicemotion,ondeviceorientation,ondragdrop,onerror,onfocus,onhashchange,onkeydown,onkeypress,onkeyup,onload,onmousedown,onmousemove,onmouseout,onmouseover,onmouseup,onmozbeforepaint,onpaint,onpopstate,onreset,onresize,onscroll,onselect,onsubmit,onunload,onpageshow,onpagehide,' +\n    'Image,Option,Worker,' +\n    // https://developer.mozilla.org/en/Gecko_DOM_Reference\n    'Event,Range,File,FileReader,Blob,BlobBuilder,' +\n    'Attr,CDATASection,CharacterData,Comment,console,DocumentFragment,DocumentType,DomConfiguration,DOMError,DOMErrorHandler,DOMException,DOMImplementation,DOMImplementationList,DOMImplementationRegistry,DOMImplementationSource,DOMLocator,DOMObject,DOMString,DOMStringList,DOMTimeStamp,DOMUserData,Entity,EntityReference,MediaQueryList,MediaQueryListListener,NameList,NamedNodeMap,Node,NodeFilter,NodeIterator,NodeList,Notation,Plugin,PluginArray,ProcessingInstruction,SharedWorker,Text,TimeRanges,Treewalker,TypeInfo,UserDataHandler,Worker,WorkerGlobalScope,' +\n    'HTMLDocument,HTMLElement,HTMLAnchorElement,HTMLAppletElement,HTMLAudioElement,HTMLAreaElement,HTMLBaseElement,HTMLBaseFontElement,HTMLBodyElement,HTMLBRElement,HTMLButtonElement,HTMLCanvasElement,HTMLDirectoryElement,HTMLDivElement,HTMLDListElement,HTMLEmbedElement,HTMLFieldSetElement,HTMLFontElement,HTMLFormElement,HTMLFrameElement,HTMLFrameSetElement,HTMLHeadElement,HTMLHeadingElement,HTMLHtmlElement,HTMLHRElement,HTMLIFrameElement,HTMLImageElement,HTMLInputElement,HTMLKeygenElement,HTMLLabelElement,HTMLLIElement,HTMLLinkElement,HTMLMapElement,HTMLMenuElement,HTMLMetaElement,HTMLModElement,HTMLObjectElement,HTMLOListElement,HTMLOptGroupElement,HTMLOptionElement,HTMLOutputElement,HTMLParagraphElement,HTMLParamElement,HTMLPreElement,HTMLQuoteElement,HTMLScriptElement,HTMLSelectElement,HTMLSourceElement,HTMLSpanElement,HTMLStyleElement,HTMLTableElement,HTMLTableCaptionElement,HTMLTableCellElement,HTMLTableDataCellElement,HTMLTableHeaderCellElement,HTMLTableColElement,HTMLTableRowElement,HTMLTableSectionElement,HTMLTextAreaElement,HTMLTimeElement,HTMLTitleElement,HTMLTrackElement,HTMLUListElement,HTMLUnknownElement,HTMLVideoElement,' +\n    'HTMLCanvasElement,CanvasRenderingContext2D,CanvasGradient,CanvasPattern,TextMetrics,ImageData,CanvasPixelArray,HTMLAudioElement,HTMLVideoElement,NotifyAudioAvailableEvent,HTMLCollection,HTMLAllCollection,HTMLFormControlsCollection,HTMLOptionsCollection,HTMLPropertiesCollection,DOMTokenList,DOMSettableTokenList,DOMStringMap,RadioNodeList,' +\n    'SVGDocument,SVGElement,SVGAElement,SVGAltGlyphElement,SVGAltGlyphDefElement,SVGAltGlyphItemElement,SVGAnimationElement,SVGAnimateElement,SVGAnimateColorElement,SVGAnimateMotionElement,SVGAnimateTransformElement,SVGSetElement,SVGCircleElement,SVGClipPathElement,SVGColorProfileElement,SVGCursorElement,SVGDefsElement,SVGDescElement,SVGEllipseElement,SVGFilterElement,SVGFilterPrimitiveStandardAttributes,SVGFEBlendElement,SVGFEColorMatrixElement,SVGFEComponentTransferElement,SVGFECompositeElement,SVGFEConvolveMatrixElement,SVGFEDiffuseLightingElement,SVGFEDisplacementMapElement,SVGFEDistantLightElement,SVGFEFloodElement,SVGFEGaussianBlurElement,SVGFEImageElement,SVGFEMergeElement,SVGFEMergeNodeElement,SVGFEMorphologyElement,SVGFEOffsetElement,SVGFEPointLightElement,SVGFESpecularLightingElement,SVGFESpotLightElement,SVGFETileElement,SVGFETurbulenceElement,SVGComponentTransferFunctionElement,SVGFEFuncRElement,SVGFEFuncGElement,SVGFEFuncBElement,SVGFEFuncAElement,SVGFontElement,SVGFontFaceElement,SVGFontFaceFormatElement,SVGFontFaceNameElement,SVGFontFaceSrcElement,SVGFontFaceUriElement,SVGForeignObjectElement,SVGGElement,SVGGlyphElement,SVGGlyphRefElement,SVGGradientElement,SVGLinearGradientElement,SVGRadialGradientElement,SVGHKernElement,SVGImageElement,SVGLineElement,SVGMarkerElement,SVGMaskElement,SVGMetadataElement,SVGMissingGlyphElement,SVGMPathElement,SVGPathElement,SVGPatternElement,SVGPolylineElement,SVGPolygonElement,SVGRectElement,SVGScriptElement,SVGStopElement,SVGStyleElement,SVGSVGElement,SVGSwitchElement,SVGSymbolElement,SVGTextElement,SVGTextPathElement,SVGTitleElement,SVGTRefElement,SVGTSpanElement,SVGUseElement,SVGViewElement,SVGVKernElement,' +\n    'SVGAngle,SVGColor,SVGICCColor,SVGElementInstance,SVGElementInstanceList,SVGLength,SVGLengthList,SVGMatrix,SVGNumber,SVGNumberList,SVGPaint,SVGPoint,SVGPointList,SVGPreserveAspectRatio,SVGRect,SVGStringList,SVGTransform,SVGTransformList,' +\n    'SVGAnimatedAngle,SVGAnimatedBoolean,SVGAnimatedEnumeration,SVGAnimatedInteger,SVGAnimatedLength,SVGAnimatedLengthList,SVGAnimatedNumber,SVGAnimatedNumberList,SVGAnimatedPreserveAspectRatio,SVGAnimatedRect,SVGAnimatedString,SVGAnimatedTransformList,' +\n    'SVGPathSegList,SVGPathSeg,SVGPathSegArcAbs,SVGPathSegArcRel,SVGPathSegClosePath,SVGPathSegCurvetoCubicAbs,SVGPathSegCurvetoCubicRel,SVGPathSegCurvetoCubicSmoothAbs,SVGPathSegCurvetoCubicSmoothRel,SVGPathSegCurvetoQuadraticAbs,SVGPathSegCurvetoQuadraticRel,SVGPathSegCurvetoQuadraticSmoothAbs,SVGPathSegCurvetoQuadraticSmoothRel,SVGPathSegLinetoAbs,SVGPathSegLinetoHorizontalAbs,SVGPathSegLinetoHorizontalRel,SVGPathSegLinetoRel,SVGPathSegLinetoVerticalAbs,SVGPathSegLinetoVerticalRel,SVGPathSegMovetoAbs,SVGPathSegMovetoRel,ElementTimeControl,TimeEvent,SVGAnimatedPathData,' +\n    'SVGAnimatedPoints,SVGColorProfileRule,SVGCSSRule,SVGExternalResourcesRequired,SVGFitToViewBox,SVGLangSpace,SVGLocatable,SVGRenderingIntent,SVGStylable,SVGTests,SVGTextContentElement,SVGTextPositioningElement,SVGTransformable,SVGUnitTypes,SVGURIReference,SVGViewSpec,SVGZoomAndPan');\n\n/**\n * Order of operation ENUMs.\n * https://developer.mozilla.org/en/JavaScript/Reference/Operators/Operator_Precedence\n */\nBlockly.JavaScript.ORDER_ATOMIC = 0;           // 0 \"\" ...\nBlockly.JavaScript.ORDER_NEW = 1.1;            // new\nBlockly.JavaScript.ORDER_MEMBER = 1.2;         // . []\nBlockly.JavaScript.ORDER_FUNCTION_CALL = 2;    // ()\nBlockly.JavaScript.ORDER_INCREMENT = 3;        // ++\nBlockly.JavaScript.ORDER_DECREMENT = 3;        // --\nBlockly.JavaScript.ORDER_BITWISE_NOT = 4.1;    // ~\nBlockly.JavaScript.ORDER_UNARY_PLUS = 4.2;     // +\nBlockly.JavaScript.ORDER_UNARY_NEGATION = 4.3; // -\nBlockly.JavaScript.ORDER_LOGICAL_NOT = 4.4;    // !\nBlockly.JavaScript.ORDER_TYPEOF = 4.5;         // typeof\nBlockly.JavaScript.ORDER_VOID = 4.6;           // void\nBlockly.JavaScript.ORDER_DELETE = 4.7;         // delete\nBlockly.JavaScript.ORDER_AWAIT = 4.8;          // await\nBlockly.JavaScript.ORDER_EXPONENTIATION = 5.0; // **\nBlockly.JavaScript.ORDER_MULTIPLICATION = 5.1; // *\nBlockly.JavaScript.ORDER_DIVISION = 5.2;       // /\nBlockly.JavaScript.ORDER_MODULUS = 5.3;        // %\nBlockly.JavaScript.ORDER_SUBTRACTION = 6.1;    // -\nBlockly.JavaScript.ORDER_ADDITION = 6.2;       // +\nBlockly.JavaScript.ORDER_BITWISE_SHIFT = 7;    // << >> >>>\nBlockly.JavaScript.ORDER_RELATIONAL = 8;       // < <= > >=\nBlockly.JavaScript.ORDER_IN = 8;               // in\nBlockly.JavaScript.ORDER_INSTANCEOF = 8;       // instanceof\nBlockly.JavaScript.ORDER_EQUALITY = 9;         // == != === !==\nBlockly.JavaScript.ORDER_BITWISE_AND = 10;     // &\nBlockly.JavaScript.ORDER_BITWISE_XOR = 11;     // ^\nBlockly.JavaScript.ORDER_BITWISE_OR = 12;      // |\nBlockly.JavaScript.ORDER_LOGICAL_AND = 13;     // &&\nBlockly.JavaScript.ORDER_LOGICAL_OR = 14;      // ||\nBlockly.JavaScript.ORDER_CONDITIONAL = 15;     // ?:\nBlockly.JavaScript.ORDER_ASSIGNMENT = 16;      // = += -= **= *= /= %= <<= >>= ...\nBlockly.JavaScript.ORDER_YIELD = 17;         // yield\nBlockly.JavaScript.ORDER_COMMA = 18;           // ,\nBlockly.JavaScript.ORDER_NONE = 99;            // (...)\n\n/**\n * List of outer-inner pairings that do NOT require parentheses.\n * @type {!Array.<!Array.<number>>}\n */\nBlockly.JavaScript.ORDER_OVERRIDES = [\n  // (foo()).bar -> foo().bar\n  // (foo())[0] -> foo()[0]\n  [Blockly.JavaScript.ORDER_FUNCTION_CALL, Blockly.JavaScript.ORDER_MEMBER],\n  // (foo())() -> foo()()\n  [Blockly.JavaScript.ORDER_FUNCTION_CALL, Blockly.JavaScript.ORDER_FUNCTION_CALL],\n  // (foo.bar).baz -> foo.bar.baz\n  // (foo.bar)[0] -> foo.bar[0]\n  // (foo[0]).bar -> foo[0].bar\n  // (foo[0])[1] -> foo[0][1]\n  [Blockly.JavaScript.ORDER_MEMBER, Blockly.JavaScript.ORDER_MEMBER],\n  // (foo.bar)() -> foo.bar()\n  // (foo[0])() -> foo[0]()\n  [Blockly.JavaScript.ORDER_MEMBER, Blockly.JavaScript.ORDER_FUNCTION_CALL],\n\n  // !(!foo) -> !!foo\n  [Blockly.JavaScript.ORDER_LOGICAL_NOT, Blockly.JavaScript.ORDER_LOGICAL_NOT],\n  // a * (b * c) -> a * b * c\n  [Blockly.JavaScript.ORDER_MULTIPLICATION, Blockly.JavaScript.ORDER_MULTIPLICATION],\n  // a + (b + c) -> a + b + c\n  [Blockly.JavaScript.ORDER_ADDITION, Blockly.JavaScript.ORDER_ADDITION],\n  // a && (b && c) -> a && b && c\n  [Blockly.JavaScript.ORDER_LOGICAL_AND, Blockly.JavaScript.ORDER_LOGICAL_AND],\n  // a || (b || c) -> a || b || c\n  [Blockly.JavaScript.ORDER_LOGICAL_OR, Blockly.JavaScript.ORDER_LOGICAL_OR]\n];\n\n/**\n * Initialise the database of variable names.\n * @param {!Blockly.Workspace} workspace Workspace to generate code from.\n */\nBlockly.JavaScript.init = function(workspace) {\n  // Create a dictionary of definitions to be printed before the code.\n  Blockly.JavaScript.definitions_ = Object.create(null);\n  // Create a dictionary mapping desired function names in definitions_\n  // to actual function names (to avoid collisions with user functions).\n  Blockly.JavaScript.functionNames_ = Object.create(null);\n\n  if (!Blockly.JavaScript.variableDB_) {\n    Blockly.JavaScript.variableDB_ =\n        new Blockly.Names(Blockly.JavaScript.RESERVED_WORDS_);\n  } else {\n    Blockly.JavaScript.variableDB_.reset();\n  }\n\n  Blockly.JavaScript.variableDB_.setVariableMap(workspace.getVariableMap());\n\n  var defvars = [];\n  // Add developer variables (not created or named by the user).\n  var devVarList = Blockly.Variables.allDeveloperVariables(workspace);\n  for (var i = 0; i < devVarList.length; i++) {\n    defvars.push(Blockly.JavaScript.variableDB_.getName(devVarList[i],\n        Blockly.Names.DEVELOPER_VARIABLE_TYPE));\n  }\n\n  // Add user variables, but only ones that are being used.\n  var variables = Blockly.Variables.allUsedVarModels(workspace);\n  for (var i = 0; i < variables.length; i++) {\n    defvars.push(Blockly.JavaScript.variableDB_.getName(variables[i].getId(),\n        Blockly.Variables.NAME_TYPE));\n  }\n\n  // Declare all of the variables.\n  if (defvars.length) {\n    Blockly.JavaScript.definitions_['variables'] =\n        'var ' + defvars.join(', ') + ';';\n  }\n};\n\n/**\n * Prepend the generated code with the variable definitions.\n * @param {string} code Generated code.\n * @return {string} Completed code.\n */\nBlockly.JavaScript.finish = function(code) {\n  // Convert the definitions dictionary into a list.\n  var definitions = [];\n  for (var name in Blockly.JavaScript.definitions_) {\n    definitions.push(Blockly.JavaScript.definitions_[name]);\n  }\n  // Clean up temporary data.\n  delete Blockly.JavaScript.definitions_;\n  delete Blockly.JavaScript.functionNames_;\n  Blockly.JavaScript.variableDB_.reset();\n  return definitions.join('\\n\\n') + '\\n\\n\\n' + code;\n};\n\n/**\n * Naked values are top-level blocks with outputs that aren't plugged into\n * anything.  A trailing semicolon is needed to make this legal.\n * @param {string} line Line of generated code.\n * @return {string} Legal line of code.\n */\nBlockly.JavaScript.scrubNakedValue = function(line) {\n  return line + ';\\n';\n};\n\n/**\n * Encode a string as a properly escaped JavaScript string, complete with\n * quotes.\n * @param {string} string Text to encode.\n * @return {string} JavaScript string.\n * @private\n */\nBlockly.JavaScript.quote_ = function(string) {\n  // Can't use goog.string.quote since Google's style guide recommends\n  // JS string literals use single quotes.\n  string = string.replace(/\\\\/g, '\\\\\\\\')\n                 .replace(/\\n/g, '\\\\\\n')\n                 .replace(/'/g, '\\\\\\'');\n  return '\\'' + string + '\\'';\n};\n\n/**\n * Common tasks for generating JavaScript from blocks.\n * Handles comments for the specified block and any connected value blocks.\n * Calls any statements following this block.\n * @param {!Blockly.Block} block The current block.\n * @param {string} code The JavaScript code created for this block.\n * @param {boolean=} opt_thisOnly True to generate code for only this statement.\n * @return {string} JavaScript code with comments and subsequent blocks added.\n * @private\n */\nBlockly.JavaScript.scrub_ = function(block, code, opt_thisOnly) {\n  var commentCode = '';\n  // Only collect comments for blocks that aren't inline.\n  if (!block.outputConnection || !block.outputConnection.targetConnection) {\n    // Collect comment for this block.\n    var comment = block.getCommentText();\n    comment = Blockly.utils.wrap(comment, Blockly.JavaScript.COMMENT_WRAP - 3);\n    if (comment) {\n      if (block.getProcedureDef) {\n        // Use a comment block for function comments.\n        commentCode += '/**\\n' +\n                       Blockly.JavaScript.prefixLines(comment + '\\n', ' * ') +\n                       ' */\\n';\n      } else {\n        commentCode += Blockly.JavaScript.prefixLines(comment + '\\n', '// ');\n      }\n    }\n    // Collect comments for all value arguments.\n    // Don't collect comments for nested statements.\n    for (var i = 0; i < block.inputList.length; i++) {\n      if (block.inputList[i].type == Blockly.INPUT_VALUE) {\n        var childBlock = block.inputList[i].connection.targetBlock();\n        if (childBlock) {\n          var comment = Blockly.JavaScript.allNestedComments(childBlock);\n          if (comment) {\n            commentCode += Blockly.JavaScript.prefixLines(comment, '// ');\n          }\n        }\n      }\n    }\n  }\n  var nextBlock = block.nextConnection && block.nextConnection.targetBlock();\n  var nextCode = opt_thisOnly ? '' : Blockly.JavaScript.blockToCode(nextBlock);\n  return commentCode + code + nextCode;\n};\n\n/**\n * Gets a property and adjusts the value while taking into account indexing.\n * @param {!Blockly.Block} block The block.\n * @param {string} atId The property ID of the element to get.\n * @param {number=} opt_delta Value to add.\n * @param {boolean=} opt_negate Whether to negate the value.\n * @param {number=} opt_order The highest order acting on this value.\n * @return {string|number}\n */\nBlockly.JavaScript.getAdjusted = function(block, atId, opt_delta, opt_negate,\n    opt_order) {\n  var delta = opt_delta || 0;\n  var order = opt_order || Blockly.JavaScript.ORDER_NONE;\n  if (block.workspace.options.oneBasedIndex) {\n    delta--;\n  }\n  var defaultAtIndex = block.workspace.options.oneBasedIndex ? '1' : '0';\n  if (delta > 0) {\n    var at = Blockly.JavaScript.valueToCode(block, atId,\n        Blockly.JavaScript.ORDER_ADDITION) || defaultAtIndex;\n  } else if (delta < 0) {\n    var at = Blockly.JavaScript.valueToCode(block, atId,\n        Blockly.JavaScript.ORDER_SUBTRACTION) || defaultAtIndex;\n  } else if (opt_negate) {\n    var at = Blockly.JavaScript.valueToCode(block, atId,\n        Blockly.JavaScript.ORDER_UNARY_NEGATION) || defaultAtIndex;\n  } else {\n    var at = Blockly.JavaScript.valueToCode(block, atId, order) ||\n        defaultAtIndex;\n  }\n\n  if (Blockly.isNumber(at)) {\n    // If the index is a naked number, adjust it right now.\n    at = parseFloat(at) + delta;\n    if (opt_negate) {\n      at = -at;\n    }\n  } else {\n    // If the index is dynamic, adjust it in code.\n    if (delta > 0) {\n      at = at + ' + ' + delta;\n      var innerOrder = Blockly.JavaScript.ORDER_ADDITION;\n    } else if (delta < 0) {\n      at = at + ' - ' + -delta;\n      var innerOrder = Blockly.JavaScript.ORDER_SUBTRACTION;\n    }\n    if (opt_negate) {\n      if (delta) {\n        at = '-(' + at + ')';\n      } else {\n        at = '-' + at;\n      }\n      var innerOrder = Blockly.JavaScript.ORDER_UNARY_NEGATION;\n    }\n    innerOrder = Math.floor(innerOrder);\n    order = Math.floor(order);\n    if (innerOrder && order >= innerOrder) {\n      at = '(' + at + ')';\n    }\n  }\n  return at;\n};\n","module.exports = global[\"Blockly\"] = require(\"-!./blockly_compressed_vertical.Blockly.js\");","module.exports = global[\"goog\"] = require(\"-!./blockly_compressed_vertical.goog.js\");","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1567591062157\n      var cssReload = require(\"!../../../node_modules/css-hot-loader/hotModuleReplacement.js\")(module.id, {\"fileMap\":\"{fileName}\"});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);;\n    }\n  ","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1567591055835\n      var cssReload = require(\"!../../../../node_modules/css-hot-loader/hotModuleReplacement.js\")(module.id, {\"fileMap\":\"{fileName}\"});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);;\n    }\n  ","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1567591062189\n      var cssReload = require(\"!../../../../node_modules/css-hot-loader/hotModuleReplacement.js\")(module.id, {\"fileMap\":\"{fileName}\"});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);;\n    }\n  ","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1567591055823\n      var cssReload = require(\"!../../../../node_modules/css-hot-loader/hotModuleReplacement.js\")(module.id, {\"fileMap\":\"{fileName}\"});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);;\n    }\n  ","import React                from 'react';\nimport { PropTypes }        from 'prop-types';\nimport FlyoutBlock          from './flyout-block.jsx';\nimport { translate }        from '../utils/tools';\n\nconst FlyoutBlockGroup = (props) => {\n    const {\n        onInfoClick,\n        block_nodes,\n    } = props;\n\n    const block_type = block_nodes[0].getAttribute('type');\n    const block_meta = Blockly.Blocks[block_type].meta();\n    const { display_name, description } = block_meta;\n\n    return (\n        <div className='flyout__item'>\n            <div className='flyout__item-header'>\n                <div className='flyout__item-label'>{display_name}</div>\n            </div>\n            <p className='flyout__item-description'>\n                {description}\n                {onInfoClick && <a className='flyout__item-info' onClick={onInfoClick}>{translate('Learn more.')}</a>}\n            </p>\n            {\n                Object.keys(block_nodes).map(key => {\n                    return (\n                        <FlyoutBlock\n                            key={key}\n                            should_center_block={true}\n                            block_node={block_nodes[key]}\n                        />\n                    );\n                })\n            }\n        </div>\n    );\n};\n\nFlyoutBlockGroup.propTypes = {\n    block_nodes: PropTypes.array,\n    onInfoClick: PropTypes.func,\n};\n\nexport default FlyoutBlockGroup;\n","\nimport React            from 'react';\nimport PropTypes        from 'prop-types';\nimport { connect }      from '../stores/connect';\nimport { translate }    from '../utils/lang/i18n';\n\nclass FlyoutBlock extends React.PureComponent {\n    render() {\n        const { block_node } = this.props;\n        return (\n            <div className='flyout__item'>\n                <div className='flyout__item-buttons'>\n                    <button className='flyout__button flyout__button-add' onClick={() => Blockly.derivWorkspace.addBlockNode(block_node)}>\n                        {translate('Add')}\n                    </button>\n                </div>\n                <div ref={el => this.el_block_workspace = el} className='flyout__block-workspace' />\n            </div>\n        );\n    }\n\n    componentDidMount() {\n        const { initBlockWorkspace, block_node, should_center_block } = this.props;\n        initBlockWorkspace(this.el_block_workspace, block_node, should_center_block);\n    }\n}\n\nFlyoutBlock.propTypes = {\n    block_node         : PropTypes.any,\n    initBlockWorkspace : PropTypes.func,\n    should_center_block: PropTypes.bool,\n};\n\nexport default connect(({ flyout }) => ({\n    initBlockWorkspace: flyout.initBlockWorkspace,\n}))(FlyoutBlock);\n","import React                from 'react';\nimport PropTypes            from 'prop-types';\nimport FlyoutBlockGroup     from './flyout-block-group.jsx';\nimport HelpBase             from '../scratch/help-content/flyout-help-base.jsx';\nimport * as config          from '../scratch/help-content/help-content.config';\nimport { connect }          from '../stores/connect';\nimport                           '../assets/sass/scratch/flyout.scss';\n\nconst Flyout = ({\n    is_help_content,\n    block_nodes,\n    flyout_content,\n    flyout_width,\n    is_visible,\n    showHelpContent,\n}) => {\n    return (\n        <div\n            className={`flyout${!is_visible ? ' hidden' : ''}${is_help_content ? ' flyout__help' : ' flyout__content'}`}\n            style={{ width: `${flyout_width}px` }}\n        >\n            {\n                is_help_content ?\n                    <HelpBase block_nodes={block_nodes} /> :\n                    Object.keys(flyout_content).map((key, index) => {\n                        const nodes = flyout_content[key];\n                        const node = nodes[0];\n                        const tag_name = node.tagName.toUpperCase();\n\n                        switch (tag_name) {\n                            case Blockly.Xml.NODE_BLOCK: {\n                                const block_type = node.getAttribute('type');\n                                let flyout_block_key = `${block_type} ${index}`;\n                                if (Blockly.Block.isDynamic(block_type) || is_help_content) {\n                                    flyout_block_key = `${block_type} ${Math.random()}`;\n                                }\n\n                                return (\n                                    <FlyoutBlockGroup\n                                        key={flyout_block_key}\n                                        id={`flyout__item-workspace--${index}`}\n                                        block_nodes={nodes}\n                                        onInfoClick={\n                                            config[block_type]\n                                            && (() => showHelpContent(nodes))\n                                        }\n                                    />\n                                );\n                            }\n                            case Blockly.Xml.NODE_LABEL:\n                                return (\n                                    <div\n                                        key={node.getAttribute('text') + index}\n                                        className='flyout__item-label'\n                                    >\n                                        {node.getAttribute('text')}\n                                    </div>\n                                );\n                            case Blockly.Xml.NODE_BUTTON: {\n                                const callback_key = node.getAttribute('callbackKey');\n                                const callback = Blockly.derivWorkspace.getButtonCallback(callback_key) || (() => { });\n\n                                return (\n                                    <button\n                                        key={`${callback_key}${index}`}\n                                        className='flyout__button flyout__button-new'\n                                        onClick={(button) => {\n                                            const flyout_button = button;\n\n                                            // Workaround for not having a flyout workspace.\n                                            // eslint-disable-next-line no-underscore-dangle\n                                            flyout_button.targetWorkspace_ = Blockly.derivWorkspace;\n                                            // eslint-disable-next-line no-underscore-dangle\n                                            flyout_button.getTargetWorkspace = () => flyout_button.targetWorkspace_;\n\n                                            callback(flyout_button);\n                                        }}\n                                    >\n                                        {node.getAttribute('text')}\n                                    </button>\n                                );\n                            }\n                            default:\n                                return null;\n                        }\n                    })\n            }\n        </div>\n    );\n};\n\nFlyout.propTypes = {\n    block_nodes    : PropTypes.array,\n    flyout_content : PropTypes.array,\n    flyout_width   : PropTypes.number,\n    is_help_content: PropTypes.bool,\n    is_visible     : PropTypes.bool,\n    showHelpContent: PropTypes.func,\n};\n\nexport default connect(({ flyout }) => ({\n    is_help_content: flyout.is_help_content,\n    block_nodes    : flyout.block_nodes,\n    flyout_content : flyout.flyout_content,\n    flyout_width   : flyout.flyout_width,\n    is_visible     : flyout.is_visible,\n    showHelpContent: flyout.showHelpContent,\n}))(Flyout);\n\n","import { setBlockTextColor } from '../../../utils';\nimport { translate }         from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.procedures_callnoreturn = {\n    init() {\n        this.arguments = [];\n        this.argumentVarModels = [];\n        this.previousDisabledState = false;\n\n        this.jsonInit(this.definition());\n    },\n    /**\n     * Block definitions describe how a block looks and behaves, including the text,\n     * the colour, the shape, and what other blocks it can connect to. We've separated\n     * the block definition from the init function so we can search through it.\n     * https://developers.google.com/blockly/guides/create-custom-blocks/define-blocks\n     */\n    definition() {\n        return {\n            message0: '%1 %2',\n            args0   : [\n                {\n                    type: 'field_label',\n                    name: 'NAME',\n                    text: this.id,\n                },\n                {\n                    type: 'input_dummy',\n                    name: 'TOPROW',\n                },\n            ],\n            colour           : Blockly.Colours.BinaryProcedures.colour,\n            colourSecondary  : Blockly.Colours.BinaryProcedures.colourSecondary,\n            colourTertiary   : Blockly.Colours.BinaryProcedures.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n            tooltip          : translate('Function with no return value tooltip'),\n            category         : Blockly.Categories.Functions,\n        };\n    },\n    /**\n     * Meta returns an object with with properties that contain human readable strings,\n     * these strings are used in the flyout help content, as well as used for searching\n     * for specific blocks.\n     */\n    meta() {\n        return {\n            'display_name': translate('Function With no Return name'),\n            'description' : translate('Function with no return value description'),\n        };\n    },\n    /**\n     * Procedure calls cannot exist without the corresponding procedure\n     * definition.  Enforce this link whenever an event is fired.\n     * @param {!Blockly.Events.Abstract} event Change event.\n     * @this Blockly.Block\n     */\n    onchange(event) {\n        setBlockTextColor(this);\n\n        if (!this.workspace || this.workspace.isFlyout) {\n            // Block is deleted or is in a flyout.\n            return;\n        }\n\n        if (!event.recordUndo) {\n            // Events not generated by user. Skip handling.\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.indexOf(this.id) !== -1) {\n            // Look for the case where a procedure call was created (usually through\n            // paste) and there is no matching definition.  In this case, create\n            // an empty definition block with the correct signature.\n            const name = this.getProcedureCall();\n            let def = this.getProcedureDefinition(name);\n\n            // Set data of `this` block to 'procedure definition'-block `id` so we can keep track of their relation.\n            if (!def) {\n                this.unplug();\n                this.dispose();\n            }\n\n            this.data = def.id;\n\n            if (\n                def &&\n                (def.type !== this.defType || JSON.stringify(def.arguments) !== JSON.stringify(this.arguments))\n            ) {\n                // The signatures don't match.\n                def = null;\n            }\n            if (!def) {\n                Blockly.Events.setGroup(event.group);\n                /**\n                 * Create matching definition block.\n                 * <xml>\n                 *   <block type=\"procedures_defreturn\" x=\"10\" y=\"20\">\n                 *     <mutation name=\"test\">\n                 *       <arg name=\"x\"></arg>\n                 *     </mutation>\n                 *     <field name=\"NAME\">test</field>\n                 *   </block>\n                 * </xml>\n                 */\n                const xml = document.createElement('xml');\n                const block = document.createElement('block');\n                block.setAttribute('type', this.defType);\n\n                const xy = this.getRelativeToSurfaceXY();\n                const x = xy.x + Blockly.SNAP_RADIUS * (this.RTL ? -1 : 1);\n                const y = xy.y + Blockly.SNAP_RADIUS * 2;\n\n                block.setAttribute('x', x);\n                block.setAttribute('y', y);\n\n                const mutation = this.mutationToDom();\n\n                block.appendChild(mutation);\n\n                const field = document.createElement('field');\n                field.setAttribute('name', 'NAME');\n                field.appendChild(document.createTextNode(this.getProcedureCall()));\n\n                block.appendChild(field);\n                xml.appendChild(block);\n\n                Blockly.Xml.domToWorkspace(xml, this.workspace);\n                Blockly.Events.setGroup(false);\n            }\n        } else if (event.type === Blockly.Events.BLOCK_DELETE) {\n            // Look for the case where a procedure definition has been deleted,\n            // leaving this block (a procedure call) orphaned.  In this case, delete\n            // the orphan.\n            const name = this.getProcedureCall();\n            const def = Blockly.Procedures.getDefinition(name, this.workspace);\n\n            if (!def) {\n                Blockly.Events.setGroup(event.group);\n                this.dispose(true, false);\n                Blockly.Events.setGroup(false);\n            }\n        } else if (event.type === Blockly.Events.BLOCK_CHANGE && event.element === 'disabled') {\n            const name = this.getProcedureCall();\n            const def = Blockly.Procedures.getDefinition(name, this.workspace);\n\n            if (def && def.id === event.blockId) {\n                // in most cases the old group should be ''\n                const oldGroup = Blockly.Events.getGroup();\n\n                if (oldGroup) {\n                    // This should only be possible programatically and may indicate a problem\n                    // with event grouping. If you see this message please investigate. If the\n                    // use ends up being valid we may need to reorder events in the undo stack.\n                    // eslint-disable-next-line no-console\n                    console.log('Saw an existing group while responding to a definition change');\n                }\n\n                Blockly.Events.setGroup(event.group);\n\n                if (event.newValue) {\n                    this.previousDisabledState = this.disabled;\n                    this.setDisabled(true);\n                } else {\n                    this.setDisabled(this.previousDisabledState);\n                }\n\n                Blockly.Events.setGroup(oldGroup);\n            }\n        }\n    },\n    /**\n     * Returns the related procedure definition block.\n     * @return {Blockly.Block} Procedure definition block.\n     * @this Blockly.Block\n     */\n    getProcedureDefinition(name) {\n        // Assume that a procedure definition is a top block.\n        return this.workspace.getTopBlocks(false).find(block => {\n            if (block.getProcedureDefinition) {\n                const tuple = block.getProcedureDefinition();\n                return tuple && Blockly.Names.equals(tuple[0], name);\n            }\n            return false;\n        });\n    },\n    /**\n     * Returns the name of the procedure this block calls.\n     * @return {string} Procedure name.\n     * @this Blockly.Block\n     */\n    getProcedureCall() {\n        // The NAME field is guaranteed to exist, null will never be returned.\n        return /** @type {string} */ (this.getFieldValue('NAME'));\n    },\n    /**\n     * Notification that a procedure is renaming.\n     * If the name matches this block's procedure, rename it.\n     * @param {string} oldName Previous name of procedure.\n     * @param {string} newName Renamed procedure.\n     * @this Blockly.Block\n     */\n    renameProcedure(oldName, newName) {\n        if (Blockly.Names.equals(oldName, this.getProcedureCall())) {\n            this.setFieldValue(newName, 'NAME');\n        }\n    },\n    /**\n     * Notification that the procedure's parameters have changed.\n     * @param {!Array.<string>} paramNames New param names, e.g. ['x', 'y', 'z'].\n     * @private\n     * @this Blockly.Block\n     */\n    setProcedureParameters(paramNames) {\n        // Rebuild the block's arguments.\n        this.arguments = [].concat(paramNames);\n\n        // And rebuild the argument model list.\n        this.argumentVarModels = this.arguments.map(argumentName =>\n            Blockly.Variables.getOrCreateVariablePackage(this.workspace, null, argumentName, '')\n        );\n\n        this.updateShape();\n    },\n    /**\n     * Modify this block to have the correct number of arguments.\n     * @private\n     * @this Blockly.Block\n     */\n    updateShape() {\n        this.arguments.forEach((argumentName, i) => {\n            let field = this.getField(`ARGNAME${i}`);\n            if (field) {\n                // Ensure argument name is up to date.\n                // The argument name field is deterministic based on the mutation,\n                // no need to fire a change event.\n                Blockly.Events.disable();\n                try {\n                    field.setValue(argumentName);\n                } finally {\n                    Blockly.Events.enable();\n                }\n            } else {\n                // Add new input.\n                field = new Blockly.FieldLabel(argumentName);\n                const input = this.appendValueInput(`ARG${i}`).appendField(field, `ARGNAME${i}`);\n                input.init();\n            }\n        });\n\n        // Remove deleted inputs.\n        let i = this.arguments.length;\n        while (this.getInput(`ARG${i}`)) {\n            this.removeInput(`ARG${i}`);\n            i++;\n        }\n\n        // Add 'with:' if there are parameters, remove otherwise.\n        const topRow = this.getInput('TOPROW');\n\n        if (topRow) {\n            if (this.arguments.length) {\n                if (!this.getField('WITH')) {\n                    topRow.appendField(translate('with:'), 'WITH');\n                    topRow.init();\n                }\n            } else if (this.getField('WITH')) {\n                topRow.removeField('WITH');\n            }\n        }\n    },\n    /**\n     * Create XML to represent the (non-editable) name and arguments.\n     * @return {!Element} XML storage element.\n     * @this Blockly.Block\n     */\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        container.setAttribute('name', this.getProcedureCall());\n\n        this.arguments.forEach(argumentName => {\n            const parameter = document.createElement('arg');\n            parameter.setAttribute('name', argumentName);\n            container.appendChild(parameter);\n        });\n\n        return container;\n    },\n    /**\n     * Parse XML to restore the (non-editable) name and parameters.\n     * @param {!Element} xmlElement XML storage element.\n     * @this Blockly.Block\n     */\n    domToMutation(xmlElement) {\n        const name = xmlElement.getAttribute('name');\n        this.renameProcedure(this.getProcedureCall(), name);\n\n        const args = [];\n        const paramIds = [];\n\n        xmlElement.childNodes.forEach(childNode => {\n            if (childNode.nodeName.toLowerCase() === 'arg') {\n                args.push(childNode.getAttribute('name'));\n                paramIds.push(childNode.getAttribute('paramId'));\n            }\n        });\n\n        this.setProcedureParameters(args, paramIds);\n    },\n    /**\n     * Return all variables referenced by this block.\n     * @return {!Array.<!Blockly.VariableModel>} List of variable models.\n     * @this Blockly.Block\n     */\n    getVarModels() {\n        return this.argumentVarModels;\n    },\n    /**\n     * Add menu option to find the definition block for this call.\n     * @param {!Array} options List of menu options to add to.\n     * @this Blockly.Block\n     */\n    customContextMenu(options) {\n        if (!this.workspace.isMovable()) {\n            // If we center on the block and the workspace isn't movable we could\n            // loose blocks at the edges of the workspace.\n            return;\n        }\n\n        const name = this.getProcedureCall();\n        const { workspace } = this;\n\n        const option = { enabled: true };\n        option.text = translate('Highlight function definition');\n        option.callback = () => {\n            const def = this.getProcedureDefinition(name);\n            if (def) {\n                workspace.centerOnBlock(def.id);\n                def.select();\n            }\n        };\n\n        options.push(option);\n    },\n    defType: 'procedures_defnoreturn',\n};\n\nBlockly.JavaScript.procedures_callnoreturn = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const functionName = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('NAME'),\n        Blockly.Procedures.NAME_TYPE\n    );\n    const args = block.arguments.map(\n        (arg, i) => Blockly.JavaScript.valueToCode(block, `ARG${i}`, Blockly.JavaScript.ORDER_COMMA) || 'null'\n    );\n\n    const code = `${functionName}(${args.join(', ')});\\n`;\n    return code;\n};\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.procedures_callreturn = {\n    init() {\n        this.arguments = [];\n        this.previousDisabledState = false;\n\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: '%1 %2',\n            args0   : [\n                {\n                    type: 'field_label',\n                    name: 'NAME',\n                    text: this.id,\n                },\n                {\n                    type: 'input_dummy',\n                    name: 'TOPROW',\n                },\n            ],\n            output         : null,\n            colour         : Blockly.Colours.BinaryProcedures.colour,\n            colourSecondary: Blockly.Colours.BinaryProcedures.colourSecondary,\n            colourTertiary : Blockly.Colours.BinaryProcedures.colourTertiary,\n            tooltip        : translate('Function with return value'),\n            category       : Blockly.Categories.Functions,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Function with return value'),\n            'description' : translate('Function with return value Description'),\n        };\n    },\n    onchange              : Blockly.Blocks.procedures_callnoreturn.onchange,\n    getProcedureDefinition: Blockly.Blocks.procedures_callnoreturn.getProcedureDefinition,\n    getProcedureCall      : Blockly.Blocks.procedures_callnoreturn.getProcedureCall,\n    renameProcedure       : Blockly.Blocks.procedures_callnoreturn.renameProcedure,\n    setProcedureParameters: Blockly.Blocks.procedures_callnoreturn.setProcedureParameters,\n    updateShape           : Blockly.Blocks.procedures_callnoreturn.updateShape,\n    mutationToDom         : Blockly.Blocks.procedures_callnoreturn.mutationToDom,\n    domToMutation         : Blockly.Blocks.procedures_callnoreturn.domToMutation,\n    getVarModels          : Blockly.Blocks.procedures_callnoreturn.getVarModels,\n    customContextMenu     : Blockly.Blocks.procedures_callnoreturn.customContextMenu,\n    defType               : 'procedures_defreturn',\n};\n\nBlockly.JavaScript.procedures_callreturn = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const functionName = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('NAME'),\n        Blockly.Procedures.NAME_TYPE\n    );\n    const args = block.arguments.map(\n        (arg, i) => Blockly.JavaScript.valueToCode(block, `ARG${i}`, Blockly.JavaScript.ORDER_COMMA) || 'null'\n    );\n\n    const code = `${functionName}(${args.join(', ')})`;\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { plusIconLight }     from '../../images';\nimport { setBlockTextColor } from '../../../utils';\nimport { translate }         from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.procedures_defnoreturn = {\n    init() {\n        this.arguments = [];\n        this.argumentVarModels = [];\n\n        this.jsonInit(this.definition());\n\n        // Enforce unique procedure names\n        const nameField = this.getField('NAME');\n        nameField.setValidator(Blockly.Procedures.rename);\n\n        // Render a -icon for adding parameters\n        const fieldImage = new Blockly.FieldImage(plusIconLight, 24, 24, '+', () => this.onAddClick());\n        this.appendDummyInput('ADD_ICON').appendField(fieldImage);\n\n        this.setStatements(true);\n    },\n    definition() {\n        return {\n            message0: translate('function %1 %2'),\n            args0   : [\n                {\n                    type: 'field_input',\n                    name: 'NAME',\n                    text: '',\n                },\n                {\n                    type: 'field_label',\n                    name: 'PARAMS',\n                    text: '',\n                },\n            ],\n            colour         : Blockly.Colours.BinaryProcedures.colour,\n            colourSecondary: Blockly.Colours.BinaryProcedures.colourSecondary,\n            colourTertiary : Blockly.Colours.BinaryProcedures.colourTertiary,\n            tooltip        : translate('function with no return tooltip'),\n            category       : Blockly.Categories.Functions,\n        };\n    },\n    meta() {\n        return {\n            'display_name': translate('Function with no return value'),\n            'description' : translate('Function with no return value description'),\n        };\n    },\n    /**\n     * Sets the block colour and updates this procedure's caller blocks\n     * to reflect the same name on a change.\n     * @param {!Blockly.Events.Abstract} event Change event.\n     * @this Blockly.Block\n     */\n    onchange(event) {\n        setBlockTextColor(this);\n\n        const allowedEvents = [Blockly.Events.BLOCK_DELETE, Blockly.Events.BLOCK_CREATE, Blockly.Events.BLOCK_CHANGE];\n        if (!this.workspace || this.workspace.isFlyout || !allowedEvents.includes(event.type)) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CHANGE) {\n            // Sync names between definition- and execution-block\n            if (event.blockId === this.id && event.name === 'NAME') {\n                this.getProcedureCallers().forEach(block => {\n                    block.setFieldValue(event.newValue, 'NAME');\n                });\n            }\n        }\n    },\n    /**\n     * Prompt the user for parameter name\n     * @this Blockly.Block\n     */\n    onAddClick() {\n        if (this.isInFlyout) {\n            return;\n        }\n        \n        // Wrap in setTimeout so block doesn't stick to mouse (Blockly.Events.END_DRAG event isn't blocked).\n        setTimeout(() => {\n            const promptMessage = translate('Specify a parameter name:');\n            Blockly.prompt(promptMessage, '', paramName => {\n                if (paramName) {\n                    const variable = Blockly.Variables.getOrCreateVariablePackage(this.workspace, null, paramName, '');\n                    if (variable) {\n                        this.arguments.push(paramName);\n                        this.argumentVarModels.push(variable);\n\n                        const paramField = this.getField('PARAMS');\n                        paramField.setText(`${translate('with: ')} ${this.arguments.join(', ')}`);\n\n                        this.getProcedureCallers().forEach(block => {\n                            block.setProcedureParameters(this.arguments);\n                            block.initSvg();\n                            block.render(false);\n                        });\n                    }\n                }\n            });\n        }, 200);\n    },\n    /**\n     * Add or remove the statement block from this function definition.\n     * @param {boolean} hasStatements True if a statement block is needed.\n     * @this Blockly.Block\n     */\n    setStatements(hasStatements) {\n        if (this.hasStatements === hasStatements) {\n            return;\n        }\n\n        if (hasStatements) {\n            this.appendStatementInput('STACK').appendField('');\n            if (this.getInput('RETURN')) {\n                this.moveInputBefore('STACK', 'RETURN');\n            }\n        } else {\n            this.removeInput('STACK', true);\n        }\n\n        this.hasStatements = hasStatements;\n    },\n    /**\n     * Update the display of parameters for this procedure definition block.\n     * @private\n     * @this Blockly.Block\n     */\n    updateParams() {\n        let paramString = '';\n\n        if (this.arguments.length) {\n            paramString = `${translate('with:')} ${this.arguments.join(', ')}`;\n        }\n\n        // The params field is deterministic based on the mutation,\n        // no need to fire a change event.\n        Blockly.Events.disable();\n        try {\n            this.setFieldValue(paramString, 'PARAMS');\n        } finally {\n            Blockly.Events.enable();\n        }\n    },\n    /**\n     * Create XML to represent the argument inputs.\n     * @param {boolean=} optParamIds If true include the IDs of the parameter\n     *     quarks.  Used by Blockly.Procedures.mutateCallers for reconnection.\n     * @return {!Element} XML storage element.\n     * @this Blockly.Block\n     */\n    mutationToDom(optParamIds) {\n        const container = document.createElement('mutation');\n\n        if (optParamIds) {\n            container.setAttribute('name', this.getFieldValue('NAME'));\n        }\n\n        this.argumentVarModels.forEach((arg, i) => {\n            const parameter = document.createElement('arg');\n\n            parameter.setAttribute('name', arg.name);\n            parameter.setAttribute('varid', arg.getId());\n\n            if (optParamIds && this.paramIds) {\n                parameter.setAttribute('paramId', this.paramIds[i]);\n            }\n            container.appendChild(parameter);\n        });\n\n        // Save whether the statement input is visible.\n        if (!this.hasStatements) {\n            container.setAttribute('statements', 'false');\n        }\n\n        return container;\n    },\n    /**\n     * Parse XML to restore the argument inputs.\n     * @param {!Element} xmlElement XML storage element.\n     * @this Blockly.Block\n     */\n    domToMutation(xmlElement) {\n        this.arguments = [];\n        this.argumentVarModels = [];\n\n        xmlElement.childNodes.forEach(childNode => {\n            if (childNode.nodeName.toLowerCase() === 'arg') {\n                const varName = childNode.getAttribute('name');\n                this.arguments.push(varName);\n\n                const varId = childNode.getAttribute('varid') || childNode.getAttribute('varId');\n                const variable = Blockly.Variables.getOrCreateVariablePackage(this.workspace, varId, varName, '');\n\n                if (variable !== null) {\n                    this.argumentVarModels.push(variable);\n                } else {\n                    // eslint-disable-next-line no-console\n                    console.log(`Failed to create a variable with name ${varName}, ignoring.`);\n                }\n            }\n        });\n\n        this.updateParams();\n\n        // Show or hide the statement input.\n        this.setStatements(xmlElement.getAttribute('statements') !== 'false');\n    },\n    /**\n     * Return the signature of this procedure definition.\n     * @return {!Array} Tuple containing three elements:\n     *     - the name of the defined procedure,\n     *     - a list of all its arguments,\n     *     - that it DOES NOT have a return value.\n     * @this Blockly.Block\n     */\n    getProcedureDef() {\n        return [this.getFieldValue('NAME'), this.arguments, false];\n    },\n    /**\n     * Return all procedure callers related to this block.\n     * @return {!Array.<Blockly.Block>} List of procedure caller blocks\n     * @this Blockly.Block\n     */\n    getProcedureCallers() {\n        return this.workspace\n            .getAllBlocks(false)\n            .filter(block => block.type === this.callType && block.data === this.id);\n    },\n    /**\n     * Return all variables referenced by this block.\n     * @return {!Array.<string>} List of variable names.\n     * @this Blockly.Block\n     */\n    getVars() {\n        return this.arguments;\n    },\n    /**\n     * Return all variables referenced by this block.\n     * @return {!Array.<!Blockly.VariableModel>} List of variable models.\n     * @this Blockly.Block\n     */\n    getVarModels() {\n        return this.argumentVarModels;\n    },\n    /**\n     * Add custom menu options to this block's context menu.\n     * @param {!Array} options List of menu options to add to.\n     * @this Blockly.Block\n     */\n    customContextMenu(options) {\n        if (this.isInFlyout) {\n            return;\n        }\n        // Add option to create caller.\n        const option = { enabled: true };\n        const name = this.getFieldValue('NAME');\n        option.text = Blockly.Msg.PROCEDURES_CREATE_DO.replace('%1', name);\n\n        const xmlMutation = document.createElement('mutation');\n        xmlMutation.setAttribute('name', name);\n\n        this.arguments.forEach(argumentName => {\n            const xmlArg = document.createElement('arg');\n            xmlArg.setAttribute('name', argumentName);\n            xmlMutation.appendChild(xmlArg);\n        });\n\n        const xmlBlock = document.createElement('block');\n        xmlBlock.setAttribute('type', this.callType);\n        xmlBlock.appendChild(xmlMutation);\n        option.callback = Blockly.ContextMenu.callbackFactory(this, xmlBlock);\n        options.push(option);\n\n        // Add options to create getters for each parameter.\n        if (!this.isCollapsed()) {\n            this.argumentVarModels.forEach(argumentVarModel => {\n                const getOption = { enabled: true };\n\n                getOption.text = Blockly.Msg.VARIABLES_SET_CREATE_GET.replace('%1', argumentVarModel.name);\n\n                const xmlField = Blockly.Variables.generateVariableFieldDom(argumentVarModel);\n                const xmlOptionBlock = document.createElement('block');\n\n                xmlOptionBlock.setAttribute('type', 'variables_get');\n                xmlOptionBlock.appendChild(xmlField);\n\n                getOption.callback = Blockly.ContextMenu.callbackFactory(this, xmlOptionBlock);\n                options.push(getOption);\n            });\n        }\n    },\n    callType: 'procedures_callnoreturn',\n};\n\nBlockly.JavaScript.procedures_defnoreturn = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const functionName = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('NAME'),\n        Blockly.Procedures.NAME_TYPE\n    );\n\n    let branch = Blockly.JavaScript.statementToCode(block, 'STACK');\n\n    if (Blockly.JavaScript.STATEMENT_PREFIX) {\n        const id = block.id.replace(/\\$/g, '$$$$'); // Issue 251.\n\n        branch =\n            Blockly.JavaScript.prefixLines(\n                Blockly.JavaScript.STATEMENT_PREFIX.replace(/%1/g, `'${id}'`),\n                Blockly.JavaScript.INDENT\n            ) + branch;\n    }\n\n    if (Blockly.JavaScript.INFINITE_LOOP_TRAP) {\n        branch = Blockly.JavaScript.INFINITE_LOOP_TRAP.replace(/%1/g, `'${block.id}'`) + branch;\n    }\n\n    let returnValue = Blockly.JavaScript.valueToCode(block, 'RETURN', Blockly.JavaScript.ORDER_NONE) || '';\n    if (returnValue) {\n        returnValue = `${Blockly.JavaScript.INDENT}return ${returnValue};\\n`;\n    }\n\n    const args = block.arguments.map(\n        argumentName => Blockly.JavaScript.variableDB_.getName(argumentName, Blockly.Variables.NAME_TYPE) // eslint-disable-line no-underscore-dangle\n    );\n\n    // eslint-disable-next-line no-underscore-dangle\n    const code = Blockly.JavaScript.scrub_(\n        block,\n        `\n    function ${functionName}(${args.join(', ')}) {\n        ${branch}\n        ${returnValue}\n    }\\n`\n    );\n\n    // Add % so as not to collide with helper functions in definitions list.\n    // eslint-disable-next-line no-underscore-dangle\n    Blockly.JavaScript.definitions_[`%${functionName}`] = code;\n    return null;\n};\n","import { plusIconDark } from '../../images';\nimport { translate }    from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.procedures_defreturn = {\n    init() {\n        this.arguments = [];\n        this.argumentVarModels = [];\n\n        this.jsonInit(this.definition());\n\n        // Enforce unique procedure names\n        const nameField = this.getField('NAME');\n        nameField.setValidator(Blockly.Procedures.rename);\n\n        // Render a -icon for adding parameters\n        const fieldImage = new Blockly.FieldImage(plusIconDark, 24, 24, '+', () => this.onAddClick());\n        this.appendDummyInput('ADD_ICON').appendField(fieldImage);\n        this.moveInputBefore('ADD_ICON', 'RETURN');\n\n        this.setStatements(true);\n    },\n    definition(){\n        return {\n            message0: translate('function %1 %2 %3'),\n            message1: 'return %1',\n            args0   : [\n                {\n                    type: 'field_input',\n                    name: 'NAME',\n                    text: '',\n                },\n                {\n                    type: 'field_label',\n                    name: 'PARAMS',\n                    text: '',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type : 'input_value',\n                    name : 'RETURN',\n                    check: null,\n                    align: Blockly.ALIGN_RIGHT,\n                },\n            ],\n            colour         : Blockly.Colours.BinaryProcedures.colour,\n            colourSecondary: Blockly.Colours.BinaryProcedures.colourSecondary,\n            colourTertiary : Blockly.Colours.BinaryProcedures.colourTertiary,\n            tooltip        : translate('Function def with return value'),\n            category       : Blockly.Categories.Functions,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Function def with return value'),\n            'description' : translate('Function def with return value Description'),\n        };\n    },\n    onAddClick   : Blockly.Blocks.procedures_defnoreturn.onAddClick,\n    onchange     : Blockly.Blocks.procedures_defnoreturn.onchange,\n    setStatements: Blockly.Blocks.procedures_defnoreturn.setStatements,\n    updateParams : Blockly.Blocks.procedures_defnoreturn.updateParams,\n    mutationToDom: Blockly.Blocks.procedures_defnoreturn.mutationToDom,\n    domToMutation: Blockly.Blocks.procedures_defnoreturn.domToMutation,\n    /**\n     * Return the signature of this procedure definition.\n     * @return {!Array} Tuple containing three elements:\n     *     - the name of the defined procedure,\n     *     - a list of all its arguments,\n     *     - that it DOES have a return value.\n     * @this Blockly.Block\n     */\n    getProcedureDef() {\n        return [this.getFieldValue('NAME'), this.arguments, true];\n    },\n    getProcedureCallers      : Blockly.Blocks.procedures_defnoreturn.getProcedureCallers,\n    getVars                  : Blockly.Blocks.procedures_defnoreturn.getVars,\n    getVarModels             : Blockly.Blocks.procedures_defnoreturn.getVarModels,\n    renameVarById            : Blockly.Blocks.procedures_defnoreturn.renameVarById,\n    updateVarName            : Blockly.Blocks.procedures_defnoreturn.updateVarName,\n    displayRenamedVar        : Blockly.Blocks.procedures_defnoreturn.displayRenamedVar,\n    customContextMenu        : Blockly.Blocks.procedures_defnoreturn.customContextMenu,\n    callType                 : 'procedures_callreturn',\n    registerWorkspaceListener: Blockly.Blocks.procedures_defnoreturn.registerWorkspaceListener,\n};\n\nBlockly.JavaScript.procedures_defreturn = Blockly.JavaScript.procedures_defnoreturn;\n","import { setBlockTextColor } from '../../../utils';\nimport { translate }         from '../../../../utils/lang/i18n';\n\n/**\n * Block for conditionally returning a value from a procedure.\n * @this Blockly.Block\n */\nBlockly.Blocks.procedures_ifreturn = {\n    init() {\n        this.hasReturnValue = true;\n\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('if %1 return %2'),\n            args0   : [\n                {\n                    type: 'input_value',\n                    name: 'CONDITION',\n                },\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n            ],\n            colour           : Blockly.Colours.BinaryProcedures.colour,\n            colourSecondary  : Blockly.Colours.BinaryProcedures.colourSecondary,\n            colourTertiary   : Blockly.Colours.BinaryProcedures.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n            tooltip          : translate('Function If Else'),\n            category         : Blockly.Categories.Functions,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Function If else'),\n            'description' : translate('Function If else Description'),\n        };\n    },\n    /**\n     * Create XML to represent whether this block has a return value.\n     * @return {!Element} XML storage element.\n     * @this Blockly.Block\n     */\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        container.setAttribute('value', Number(this.hasReturnValue));\n        return container;\n    },\n    /**\n     * Parse XML to restore whether this block has a return value.\n     * @param {!Element} xmlElement XML storage element.\n     * @this Blockly.Block\n     */\n    domToMutation(xmlElement) {\n        const value = xmlElement.getAttribute('value');\n        this.hasReturnValue = value === '1';\n\n        if (!this.hasReturnValue) {\n            this.removeInput('VALUE');\n            this.appendDummyInput('VALUE').appendField(translate('return'));\n            this.initSvg();\n            this.render();\n        }\n    },\n    /**\n     * Called whenever anything on the workspace changes.\n     * Add warning if this flow block is not nested inside a loop.\n     * @param {!Blockly.Events.Abstract} e Change event.\n     * @this Blockly.Block\n     */\n    onchange(/* e */) {\n        setBlockTextColor(this);\n\n        if (!this.workspace.isDragging || this.workspace.isDragging()) {\n            return; // Don't change state at the start of a drag.\n        }\n\n        let legal = false;\n\n        // Is the block nested in a procedure?\n        let block = this;\n        do {\n            if (this.FUNCTION_TYPES.indexOf(block.type) !== -1) {\n                legal = true;\n                break;\n            }\n            block = block.getSurroundParent();\n        } while (block);\n\n        if (legal) {\n            const rerender = () => {\n                this.initSvg();\n                this.render();\n            };\n\n            // If needed, toggle whether this block has a return value.\n            if (block.type === 'procedures_defnoreturn' && this.hasReturnValue) {\n                this.removeInput('VALUE');\n                this.appendDummyInput('VALUE').appendField(translate('return'));\n                rerender();\n                this.hasReturnValue = false;\n            } else if (block.type === 'procedures_defreturn' && !this.hasReturnValue) {\n                this.removeInput('VALUE');\n                this.appendValueInput('VALUE').appendField(translate('return'));\n                rerender();\n                this.hasReturnValue = true;\n            }\n\n            if (!this.isInFlyout) {\n                this.setDisabled(false);\n            }\n        } else if (!this.isInFlyout && !this.getInheritedDisabled()) {\n            this.setDisabled(true);\n        }\n    },\n    /**\n     * List of block types that are functions and thus do not need warnings.\n     * To add a new function type add this to your code:\n     * Blockly.Blocks['procedures_ifreturn'].FUNCTION_TYPES.push('custom_func');\n     */\n    FUNCTION_TYPES: ['procedures_defnoreturn', 'procedures_defreturn'],\n};\n\nBlockly.JavaScript.procedures_ifreturn = block => {\n    const condition = Blockly.JavaScript.valueToCode(block, 'CONDITION', Blockly.JavaScript.ORDER_NONE) || 'false';\n\n    let branch;\n    if (block.hasReturnValue) {\n        const value = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_NONE) || 'null';\n        branch = `return ${value};\\n`;\n    } else {\n        branch = 'return;\\n';\n    }\n\n    const code = `\n    if (${condition}) {\n        ${branch}\n    }\\n`;\n    return code;\n};\n","import { plusIconDark } from '../../images';\nimport { translate }    from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.lists_create_with = {\n    init() {\n        this.jsonInit(this.definition());\n\n        // Render a -icon for adding additional `lists_statement` blocks\n        const fieldImage = new Blockly.FieldImage(plusIconDark, 25, 25, '', () => this.onIconClick());\n        this.appendDummyInput('ADD_ICON').appendField(fieldImage);\n        this.moveInputBefore('ADD_ICON', 'STACK');\n    },\n    definition(){\n        return {\n            message0: translate('set %1 to create list with'),\n            message1: '%1',\n            args0   : [\n                {\n                    type    : 'field_variable',\n                    name    : 'VARIABLE',\n                    variable: translate('list'),\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STACK',\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n            tooltip          : translate('Create List with'),\n            category         : Blockly.Categories.List,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Create list with'),\n            'description' : translate('Create list with description'),\n        };\n    },\n    onIconClick() {\n        if (!this.workspace || this.isInFlyout) {\n            return;\n        }\n\n        const statementBlock = this.workspace.newBlock('lists_statement');\n        statementBlock.requiredParentId = this.id;\n        statementBlock.setMovable(false);\n        statementBlock.initSvg();\n        statementBlock.render();\n\n        const connection = this.getLastConnectionInStatement('STACK');\n        connection.connect(statementBlock.previousConnection);\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.END_DRAG) {\n            // Only allow `lists_statement` blocks to be part of the `STACK`\n            let currentBlock = this.getInputTargetBlock('STACK');\n            while (currentBlock !== null) {\n                if (currentBlock.type !== 'lists_statement') {\n                    currentBlock.unplug(false);\n                }\n                currentBlock = currentBlock.getNextBlock();\n            }\n        }\n    },\n};\n\nBlockly.JavaScript.lists_create_with = block => {\n    const variable = block.getFieldValue('VARIABLE');\n    // eslint-disable-next-line no-underscore-dangle\n    const varName = Blockly.JavaScript.variableDB_.getName(variable, Blockly.Variables.NAME_TYPE);\n    const elements = [];\n\n    let currentBlock = block.getInputTargetBlock('STACK');\n    while (currentBlock !== null) {\n        const value = Blockly.JavaScript[currentBlock.type](currentBlock);\n\n        if (Array.isArray(value) && value.length === 2) {\n            elements.push(value[0]);\n        } else {\n            elements.push(value);\n        }\n\n        currentBlock = currentBlock.getNextBlock();\n    }\n\n    const code = `${varName} = [${elements.join(', ')}];\\n`;\n    return code;\n};\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.lists_getIndex = {\n    init() {\n        this.MODE_OPTIONS = [\n            [translate('get'), 'GET'],\n            [translate('get and remove'), 'GET_REMOVE'],\n            [translate('remove'), 'REMOVE'],\n        ];\n        this.WHERE_OPTIONS = [\n            ['#', 'FROM_START'],\n            [translate('# from end'), 'FROM_END'],\n            [translate('first'), 'FIRST'],\n            [translate('last'), 'LAST'],\n            [translate('random'), 'RANDOM'],\n        ];\n        const modeMenu = new Blockly.FieldDropdown(this.MODE_OPTIONS, value => {\n            const isStatement = value === 'REMOVE';\n            this.updateStatement(isStatement);\n        });\n\n        this.appendValueInput('VALUE')\n            .setCheck('Array')\n            .appendField(translate('in list'));\n        this.appendDummyInput().appendField(modeMenu, 'MODE');\n        this.appendDummyInput('AT');\n        // eslint-disable-next-line no-underscore-dangle\n        this.setColourFromRawValues_(\n            Blockly.Colours.Binary.colour,\n            Blockly.Colours.Binary.colourSecondary,\n            Blockly.Colours.Binary.colourTertiary\n        );\n        this.setOutput(true, null);\n\n        this.updateAt(true);\n    },\n    meta(){\n        return {\n            'display_name': translate('List Get Index'),\n            'description' : translate('List Get Index Description'),\n            'category'    : Blockly.Categories.List,\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        const isStatement = !this.outputConnection;\n        const isAt = this.getInput('AT').type === Blockly.INPUT_VALUE;\n\n        container.setAttribute('statement', isStatement);\n        container.setAttribute('at', isAt);\n\n        return container;\n    },\n    domToMutation(xmlElement) {\n        const isStatement = xmlElement.getAttribute('statement') === 'true';\n        this.updateStatement(isStatement);\n\n        const isAt = xmlElement.getAttribute('at') !== 'false';\n        this.updateAt(isAt);\n    },\n    updateStatement(newStatement) {\n        const oldStatement = !this.outputConnection;\n\n        if (newStatement !== oldStatement) {\n            this.unplug(true, true);\n\n            this.setOutput(!newStatement);\n            this.setPreviousStatement(newStatement);\n            this.setNextStatement(newStatement);\n\n            this.initSvg();\n            this.render(false);\n        }\n    },\n    updateAt(isAt) {\n        this.removeInput('AT', true);\n\n        if (isAt) {\n            this.appendValueInput('AT').setCheck('Number');\n        } else {\n            this.appendDummyInput('AT');\n        }\n\n        const menu = new Blockly.FieldDropdown(this.WHERE_OPTIONS, value => {\n            const newAt = ['FROM_START', 'FROM_END'].includes(value);\n            if (newAt !== isAt) {\n                this.updateAt(newAt);\n                this.setFieldValue(value, 'WHERE');\n                return null;\n            }\n            return undefined;\n        });\n\n        this.getInput('AT').appendField(menu, 'WHERE');\n\n        this.initSvg();\n        this.render(false);\n    },\n};\n\nBlockly.JavaScript.lists_getIndex = block => {\n    const mode = block.getFieldValue('MODE') || 'GET';\n    const where = block.getFieldValue('WHERE') || 'FIRST';\n    const listOrder = where === 'RANDOM' ? Blockly.JavaScript.ORDER_COMMA : Blockly.JavaScript.ORDER_MEMBER;\n    const list = Blockly.JavaScript.valueToCode(block, 'VALUE', listOrder) || '[]';\n\n    let code,\n        order;\n\n    if (where === 'FIRST') {\n        if (mode === 'GET') {\n            code = `${list}[0]`;\n            order = Blockly.JavaScript.ORDER_MEMBER;\n        } else if (mode === 'GET_REMOVE') {\n            code = `${list}.shift()`;\n            order = Blockly.JavaScript.ORDER_MEMBER;\n        } else if (mode === 'REMOVE') {\n            return `${list}.shift();\\n`;\n        }\n    } else if (where === 'LAST') {\n        if (mode === 'GET') {\n            code = `${list}.slice(-1)[0]`;\n            order = Blockly.JavaScript.ORDER_MEMBER;\n        } else if (mode === 'GET_REMOVE') {\n            code = `${list}.pop()`;\n            order = Blockly.JavaScript.ORDER_MEMBER;\n        } else if (mode === 'REMOVE') {\n            return `${list}.pop();\\n`;\n        }\n    } else if (where === 'FROM_START') {\n        const at = Blockly.JavaScript.getAdjusted(block, 'AT');\n        if (mode === 'GET') {\n            code = `${list}[${at}]`;\n            order = Blockly.JavaScript.ORDER_MEMBER;\n        } else if (mode === 'GET_REMOVE') {\n            code = `${list}.splice(${at}, 1)[0]`;\n            order = Blockly.JavaScript.ORDER_FUNCTION_CALL;\n        } else if (mode === 'REMOVE') {\n            return `${list}.splice(${at}, 1);\\n`;\n        }\n    } else if (where === 'FROM_END') {\n        const at = Blockly.JavaScript.getAdjusted(block, 'AT', 1, true);\n        if (mode === 'GET') {\n            code = `${list}.slice(${at})[0]`;\n            order = Blockly.JavaScript.ORDER_FUNCTION_CALL;\n        } else if (mode === 'GET_REMOVE') {\n            code = `${list}.splice(${at}, 1)[0]`;\n            order = Blockly.JavaScript.ORDER_FUNCTION_CALL;\n        } else if (mode === 'REMOVE') {\n            return `${list}.splice(${at}, 1);\\n`;\n        }\n    } else if (where === 'RANDOM') {\n        // eslint-disable-next-line no-underscore-dangle\n        const functionName = Blockly.JavaScript.provideFunction_('listsGetRandomItem', [\n            // eslint-disable-next-line no-underscore-dangle\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {\n                var x = Math.floor(Math.random() * list.length);\n                if (remove) {\n                    return list.splice(x, 1)[0];\n                } else {\n                    return list[x];\n                }\n            }`,\n        ]);\n\n        code = `${functionName}(${list}, ${mode !== 'GET'})`;\n\n        if (mode === 'GET' || mode === 'GET_REMOVE') {\n            order = Blockly.JavaScript.ORDER_FUNCTION_CALL;\n        } else if (mode === 'REMOVE') {\n            return `${code};\\n`;\n        }\n    }\n\n    return [code, order];\n};\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.lists_getSublist = {\n    init() {\n        this.WHERE_OPTIONS_1 = [\n            [translate('get sub-list from #'), 'FROM_START'],\n            [translate('get sub-list from # from end'), 'FROM_END'],\n            [translate('get sub-list from first'), 'FIRST'],\n        ];\n        this.WHERE_OPTIONS_2 = [\n            [translate('#'), 'FROM_START'],\n            [translate('# from end'), 'FROM_END'],\n            [translate('last'), 'LAST'],\n        ];\n\n        this.appendValueInput('LIST').appendField(translate('in list'));\n        this.appendDummyInput('AT1');\n        this.appendDummyInput('AT2');\n\n        // eslint-disable-next-line no-underscore-dangle\n        this.setColourFromRawValues_(\n            Blockly.Colours.Binary.colour,\n            Blockly.Colours.Binary.colourSecondary,\n            Blockly.Colours.Binary.colourTertiary\n        );\n        this.setOutput(true, null);\n        this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND);\n\n        this.updateAt(1, true);\n        this.updateAt(2, true);\n    },\n    meta() {\n        return {\n            'display_name': translate('List get sublit'),\n            'description' : translate('List get sublist description'),\n            'category'    : Blockly.Categories.List,\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        const isAt1 = this.getInput('AT1').type === Blockly.INPUT_VALUE;\n        const isAt2 = this.getInput('AT2').type === Blockly.INPUT_VALUE;\n\n        container.setAttribute('at1', isAt1);\n        container.setAttribute('at2', isAt2);\n\n        return container;\n    },\n    domToMutation(xmlElement) {\n        const isAt1 = xmlElement.getAttribute('at1') === 'true';\n        const isAt2 = xmlElement.getAttribute('at2') === 'true';\n        this.updateAt(1, isAt1);\n        this.updateAt(2, isAt2);\n    },\n    updateAt(n, isAt) {\n        this.removeInput(`AT${n}`);\n\n        if (isAt) {\n            this.appendValueInput(`AT${n}`).setCheck('Number');\n        } else {\n            this.appendDummyInput(`AT${n}`);\n        }\n\n        const menu = new Blockly.FieldDropdown(this[`WHERE_OPTIONS_${n}`], value => {\n            const newAt = ['FROM_START', 'FROM_END'].includes(value);\n            if (newAt !== isAt) {\n                this.updateAt(n, newAt);\n                this.setFieldValue(value, `WHERE${n}`);\n                return null;\n            }\n            return undefined;\n        });\n\n        this.getInput(`AT${n}`).appendField(menu, `WHERE${n}`);\n\n        if (n === 1) {\n            this.moveInputBefore('AT1', 'AT2');\n        }\n\n        this.initSvg();\n        this.render(false);\n    },\n};\n\nBlockly.JavaScript.lists_getSublist = block => {\n    const list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_MEMBER) || '[]';\n    const where1 = block.getFieldValue('WHERE1');\n    const where2 = block.getFieldValue('WHERE2');\n\n    let at1,\n        at2,\n        code;\n\n    if (list.match(/^\\w+$/)) {\n        if (where1 === 'FROM_START') {\n            at1 = Blockly.JavaScript.getAdjusted(block, 'AT1');\n        } else if (where1 === 'FROM_END') {\n            at1 = Blockly.JavaScript.getAdjusted(block, 'AT1', 1, false, Blockly.JavaScript.ORDER_SUBTRACTION);\n            at1 = `${list}.length - ${at1}`;\n        }\n        if (where2 === 'FROM_START') {\n            at2 = Blockly.JavaScript.getAdjusted(block, 'AT2', 1);\n        } else if (where2 === 'FROM_END') {\n            at2 = Blockly.JavaScript.getAdjusted(block, 'AT2', 0, false, Blockly.JavaScript.ORDER_SUBTRACTION);\n            at2 = `${list}.length - ${at2}`;\n        }\n\n        code = `${list}.slice(${at1}, ${at2})`;\n    } else {\n        at1 = Blockly.JavaScript.getAdjusted(block, 'AT1');\n        at2 = Blockly.JavaScript.getAdjusted(block, 'AT2');\n        const wherePascalCase = {\n            FROM_START: 'FromStart',\n            FROM_END  : 'FromEnd',\n        };\n        const getIndex = (listName, where, at) => (where === 'FROM_END' ? `${listName}.length - 1 - ${at}` : at);\n\n        // eslint-disable-next-line no-underscore-dangle\n        const functionName = Blockly.JavaScript.provideFunction_(\n            `subsequence${wherePascalCase[where1]}${wherePascalCase[where2]}`,\n            [\n                // eslint-disable-next-line no-underscore-dangle\n                `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(sequence, at1, at2) {\n                var start = ${getIndex('sequence', where1, 'at1')};\n                var end = ${getIndex('sequence', where2, 'at2')};\n                return sequence.slice(start, end);\n            }`,\n            ]\n        );\n\n        code = `${functionName}(${list}, ${at1}, ${at2})`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.lists_indexOf = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('in list %1 find %2 occurence of item %3'),\n            args0   : [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n                {\n                    type   : 'field_dropdown',\n                    name   : 'END',\n                    options: [[translate('first'), 'FIRST'], [translate('last'), 'LAST']],\n                },\n                {\n                    type: 'input_value',\n                    name: 'FIND',\n                },\n            ],\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Index of List Tooltip'),\n            category       : Blockly.Categories.List,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Index Of List'),\n            'description' : translate('Index of List Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.lists_indexOf = block => {\n    const operator = block.getFieldValue('END') === 'FIRST' ? 'indexOf' : 'lastIndexOf';\n    const item = Blockly.JavaScript.valueToCode(block, 'FIND', Blockly.JavaScript.ORDER_NONE) || '\\'\\'';\n    const list = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_MEMBER) || '\\'\\'';\n\n    const code = `${list}.${operator}(${item})`;\n\n    if (block.workspace.options.oneBasedIndex) {\n        return [`${code} + 1`, Blockly.JavaScript.ORDER_ADDITION];\n    }\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.lists_isEmpty = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('list %1 is empty'),\n            args0   : [\n                {\n                    type : 'input_value',\n                    name : 'VALUE',\n                    check: ['Array'],\n                },\n            ],\n            output         : 'Boolean',\n            outputShape    : Blockly.OUTPUT_SHAPE_HEXAGONAL,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('List is Empty Tooltip'),\n            category       : Blockly.Categories.List,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('List is Empty'),\n            'description' : translate('List is empty Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.lists_isEmpty = block => {\n    const list = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_MEMBER) || '[]';\n    const isVariable = block.workspace.getAllVariables().findIndex(variable => variable.name === list) !== -1;\n\n    const code = isVariable ? `!${list} || !${list}.length` : `!${list}.length`;\n    return [code, Blockly.JavaScript.ORDER_LOGICAL_NOT];\n};\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.lists_length = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('length of %1'),\n            args0   : [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n            ],\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('List Length Tooltip'),\n            category       : Blockly.Categories.List,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('List Length'),\n            'description' : translate('List Length Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.lists_length = block => {\n    const list = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_MEMBER) || '[]';\n\n    const code = `${list}.length`;\n    return [code, Blockly.JavaScript.ORDER_MEMBER];\n};\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.lists_repeat = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('set %1 to item %2 repeated %3 times'),\n            args0   : [\n                {\n                    type    : 'field_variable',\n                    name    : 'VARIABLE',\n                    variable: translate('list'),\n                },\n                {\n                    type: 'input_value',\n                    name: 'ITEM',\n                },\n                {\n                    type: 'input_value',\n                    name: 'NUM',\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n            tooltip          : translate('List Repeat Tooltip'),\n            category         : Blockly.Categories.List,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('List Repeat'),\n            'description' : translate('List Repeat Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.lists_repeat = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const varName = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    // eslint-disable-next-line no-underscore-dangle\n    const functionName = Blockly.JavaScript.provideFunction_('listsRepeat', [\n        // eslint-disable-next-line no-underscore-dangle\n        `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(value, n) {\n            var array = [];\n            for (var i = 0; i < n; i++) {\n                array[i] = value;\n            }\n            return array;\n        }`,\n    ]);\n\n    const element = Blockly.JavaScript.valueToCode(block, 'ITEM', Blockly.JavaScript.ORDER_COMMA) || 'null';\n    const repeatCount = Blockly.JavaScript.valueToCode(block, 'NUM', Blockly.JavaScript.ORDER_COMMA) || '0';\n\n    const code = `${varName} = ${functionName}(${element}, ${repeatCount});\\n`;\n    return code;\n};\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.lists_setIndex = {\n    init() {\n        this.MODE_OPTIONS = [[translate('set'), 'SET'], [translate('insert at'), 'INSERT']];\n        this.WHERE_OPTIONS = [\n            [translate('#'), 'FROM_START'],\n            [translate('# from end'), 'FROM_END'],\n            [translate('first'), 'FIRST'],\n            [translate('last'), 'LAST'],\n            [translate('random'), 'RANDOM'],\n        ];\n\n        this.appendValueInput('LIST')\n            .setCheck('Array')\n            .appendField(translate('in list'));\n        this.appendDummyInput().appendField(new Blockly.FieldDropdown(this.MODE_OPTIONS), 'MODE');\n        this.appendDummyInput('AT');\n        this.appendValueInput('TO').appendField(translate('as'));\n\n        // eslint-disable-next-line no-underscore-dangle\n        this.setColourFromRawValues_(\n            Blockly.Colours.Binary.colour,\n            Blockly.Colours.Binary.colourSecondary,\n            Blockly.Colours.Binary.colourTertiary\n        );\n        this.setPreviousStatement(true, null);\n        this.setNextStatement(true, null);\n\n        this.updateAt(true);\n    },\n    meta(){\n        return {\n            'display_name': translate('List set Index'),\n            'description' : translate('List set Index'),\n            'category'    : Blockly.Categories.List,\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        const isAt = this.getInput('AT').type === Blockly.INPUT_VALUE;\n\n        container.setAttribute('at', isAt);\n        return container;\n    },\n    domToMutation(xmlElement) {\n        const isAt = xmlElement.getAttribute('at') !== 'false';\n        this.updateAt(isAt);\n    },\n    updateAt(isAt) {\n        this.removeInput('AT', true);\n\n        if (isAt) {\n            this.appendValueInput('AT').setCheck('Number');\n        } else {\n            this.appendDummyInput('AT');\n        }\n\n        const menu = new Blockly.FieldDropdown(this.WHERE_OPTIONS, value => {\n            const newAt = ['FROM_START', 'FROM_END'].includes(value);\n            if (newAt !== isAt) {\n                this.updateAt(newAt);\n                this.setFieldValue(value, 'WHERE');\n                return null;\n            }\n            return undefined;\n        });\n\n        this.moveInputBefore('AT', 'TO');\n        this.getInput('AT').appendField(menu, 'WHERE');\n        this.initSvg();\n        this.render(false);\n    },\n};\n\nBlockly.JavaScript.lists_setIndex = block => {\n    const mode = block.getFieldValue('MODE') || 'SET';\n    const where = block.getFieldValue('WHERE') || 'FIRST';\n    const value = Blockly.JavaScript.valueToCode(block, 'TO', Blockly.JavaScript.ORDER_ASSIGNMENT) || 'null';\n\n    let list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_MEMBER) || '[]';\n\n    const cacheList = () => {\n        if (list.match(/^\\w+$/)) {\n            return '';\n        }\n\n        // eslint-disable-next-line no-underscore-dangle\n        const listVar = Blockly.JavaScript.variableDB_.getDistinctName('tmpList', Blockly.Variables.NAME_TYPE);\n        const code = `var ${listVar} = ${list};\\n`;\n\n        list = listVar;\n        return code;\n    };\n\n    let code;\n\n    if (where === 'FIRST') {\n        if (mode === 'SET') {\n            code = `${list}[0] = ${value};\\n`;\n        } else if (mode === 'INSERT') {\n            code = `${list}.unshift(${value});\\n`;\n        }\n    } else if (where === 'LAST') {\n        if (mode === 'SET') {\n            code = cacheList();\n            code += `${list}[${list}.length - 1] = ${value};\\n`;\n        } else if (mode === 'INSERT') {\n            code = `${list}.push(${value});\\n`;\n        }\n    } else if (where === 'FROM_START') {\n        const at = Blockly.JavaScript.getAdjusted(block, 'AT');\n        if (mode === 'SET') {\n            code = `${list}[${at}] = ${value};\\n`;\n        } else if (mode === 'INSERT') {\n            code = `${list}.splice(${at}, 0, ${value});\\n`;\n        }\n    } else if (where === 'FROM_END') {\n        const at = Blockly.JavaScript.getAdjusted(block, 'AT', 1, false, Blockly.JavaScript.ORDER_SUBTRACTION);\n        code = cacheList();\n        if (mode === 'SET') {\n            code = `${list}[${list}.length - ${at}] = ${value};\\n`;\n        } else if (mode === 'INSERT') {\n            code = `${list}.splice(${list}.length - ${at}, 0, ${value});\\n`;\n        }\n    } else if (where === 'RANDOM') {\n        code = cacheList();\n\n        // eslint-disable-next-line no-underscore-dangle\n        const xVar = Blockly.JavaScript.variableDB_.getDistinctName('tmpX', Blockly.Variables.NAME_TYPE);\n\n        code += `var ${xVar} = Math.floor(Math.random() * ${list}.length);\\n`;\n\n        if (mode === 'SET') {\n            code += `${list}[${xVar}] = ${value};\\n`;\n        } else if (mode === 'INSERT') {\n            code += `${list}.splice(${xVar}, 0, ${value});\\n`;\n        }\n    }\n\n    return code;\n};\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.lists_sort = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('sort %1 %2 %3'),\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'TYPE',\n                    options: [[translate('numeric'), 'NUMERIC'], [translate('alphabetic'), 'TEXT']],\n                },\n                {\n                    type   : 'field_dropdown',\n                    name   : 'DIRECTION',\n                    options: [[translate('ascending'), '1'], [translate('descending'), '-1']],\n                },\n                {\n                    type: 'input_value',\n                    name: 'LIST',\n                },\n            ],\n            output         : 'Array',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('List Sort Tooltip'),\n            category       : Blockly.Categories.List,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('List Sort'),\n            'description' : translate('List Sort Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.lists_sort = block => {\n    const list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_FUNCTION_CALL) || '[]';\n    const direction = block.getFieldValue('DIRECTION') === '1' ? 1 : -1;\n    const type = block.getFieldValue('TYPE');\n    // eslint-disable-next-line no-underscore-dangle\n    const getCompareFunctionName = Blockly.JavaScript.provideFunction_('listsGetSortCompare', [\n        // eslint-disable-next-line no-underscore-dangle\n        `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {\n            var compareFuncs = {\n                NUMERIC: function(a, b) {\n                    return parseFloat(a) - parseFloat(b);\n                },\n                TEXT: function(a, b) {\n                    return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1;\n                }\n            };\n\n            return function(a, b) {\n                return compareFuncs[type](a, b) * direction; \n            }\n        }`,\n    ]);\n\n    const code = `${list}.slice(0).sort(${getCompareFunctionName}(\"${type}\", ${direction}))`;\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.lists_split = {\n    init() {\n        const dropdown = new Blockly.FieldDropdown(\n            [[translate('make list from text'), 'SPLIT'], [translate('make text from list'), 'JOIN']],\n            newMode => this.updateType(newMode)\n        );\n\n        this.appendValueInput('INPUT')\n            .setCheck('String')\n            .appendField(dropdown, 'MODE');\n        this.appendValueInput('DELIM')\n            .setCheck('String')\n            .appendField('', 'SPACE1')\n            .appendField(translate('with delimiter'), 'DELIM_LABEL');\n        this.appendDummyInput().appendField('', 'SPACE2');\n\n        this.setOutput(true, 'Array');\n        this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND);\n\n        // eslint-disable-next-line no-underscore-dangle\n        this.setColourFromRawValues_(\n            Blockly.Colours.Binary.colour,\n            Blockly.Colours.Binary.colourSecondary,\n            Blockly.Colours.Binary.colourTertiary\n        );\n    },\n    meta(){\n        return {\n            'display_name': translate('List Split'),\n            'description' : translate('List SPlit Description'),\n            'category'    : Blockly.Categories.List,\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        container.setAttribute('mode', this.getFieldValue('MODE'));\n        return container;\n    },\n    domToMutation(xmlElement) {\n        this.updateType(xmlElement.getAttribute('mode'));\n    },\n    updateType(newMode) {\n        const delimInput = this.getInput('DELIM');\n        const spaceField = this.getField('SPACE1');\n\n        if (newMode === 'SPLIT') {\n            this.outputConnection.setCheck('Array');\n            this.getInput('INPUT').setCheck('String');\n\n            // Create extra spacing for OUTPUT_SHAPE_SQUARE (i.e. string shapes)\n            if (!spaceField) {\n                delimInput.insertFieldAt(0, '', 'SPACE1');\n            }\n        } else {\n            this.outputConnection.setCheck('String');\n            this.getInput('INPUT').setCheck(null);\n\n            if (spaceField) {\n                delimInput.removeField('SPACE1');\n            }\n        }\n\n        this.initSvg();\n        this.render(false);\n    },\n};\n\nBlockly.JavaScript.lists_split = block => {\n    const input = Blockly.JavaScript.valueToCode(block, 'INPUT', Blockly.JavaScript.ORDER_MEMBER);\n    const delimiter = Blockly.JavaScript.valueToCode(block, 'DELIM', Blockly.JavaScript.ORDER_NONE) || '\\'\\'';\n    const mode = block.getFieldValue('MODE');\n\n    let code;\n\n    if (mode === 'SPLIT') {\n        code = `${input || '\\'\\''}.split(${delimiter})`;\n    } else if (mode === 'JOIN') {\n        code = `${input || '[]'}.join(${delimiter})`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { minusIconDark } from '../../images';\nimport { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.lists_statement = {\n    init() {\n        this.requiredParentId = '';\n\n        this.jsonInit(this.definition());\n\n        // Render a -icon for removing self\n        const fieldImage = new Blockly.FieldImage(minusIconDark, 25, 25, '', () => this.onIconClick());\n        this.appendDummyInput('REMOVE_ICON').appendField(fieldImage);\n    },\n    definition(){\n        return {\n            message0: '%1',\n            args0   : [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n            ],\n            colour           : Blockly.Colours.BinaryLessGray.colour,\n            colourSecondary  : Blockly.Colours.BinaryLessGray.colourSecondary,\n            colourTertiary   : Blockly.Colours.BinaryLessGray.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n            tooltip          : translate('List Statement Tooltip'),\n            category         : Blockly.Categories.List,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('List Statement'),\n            'description' : translate('List Statement Description'),\n        };\n    },\n    onIconClick() {\n        if (!this.workspace || this.isInFlyout) {\n            return;\n        }\n\n        this.unplug(true);\n        this.dispose();\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        const surroundParent = this.getSurroundParent();\n        if (event.type === Blockly.Events.END_DRAG) {\n            if (!this.requiredParentId && surroundParent.type === 'lists_create_with') {\n                this.requiredParentId = surroundParent.id;\n            } else if (!surroundParent || surroundParent.id !== this.requiredParentId) {\n                Blockly.Events.disable();\n                this.unplug(false);\n\n                const parentBlock = this.workspace.getAllBlocks().find(block => block.id === this.requiredParentId);\n\n                if (parentBlock) {\n                    const parentConnection = parentBlock.getLastConnectionInStatement('STACK');\n                    parentConnection.connect(this.previousConnection);\n                } else {\n                    this.dispose();\n                }\n                Blockly.Events.enable();\n            }\n        }\n    },\n};\n\nBlockly.JavaScript.lists_statement = block => {\n    const code = Blockly.JavaScript.valueToCode(block, 'VALUE') || 'null';\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.controls_flow_statements = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('%1 of loop'),\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'FLOW',\n                    options: [\n                        [translate('break out'), 'BREAK'],\n                        [translate('continue with next iteration'), 'CONTINUE'],\n                    ],\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n            tooltip          : translate('Control Statement Tooltip'),\n            category         : Blockly.Categories.Loop,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Control Statement'),\n            'description' : translate('Control Statement Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.controls_flow_statements = block => {\n    const keyword = block.getFieldValue('FLOW') === 'BREAK' ? 'break' : 'continue';\n    return `${keyword};\\n`;\n};\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.controls_for = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('count with %1 from %2 to %3 by %4'),\n            args0   : [\n                {\n                    type    : 'field_variable',\n                    name    : 'VAR',\n                    variable: null,\n                },\n                {\n                    type : 'input_value',\n                    name : 'FROM',\n                    check: 'Number',\n                },\n                {\n                    type : 'input_value',\n                    name : 'TO',\n                    check: 'Number',\n                },\n                {\n                    type : 'input_value',\n                    name : 'BY',\n                    check: 'Number',\n                },\n            ],\n            message1: translate('do %1'),\n            args1   : [\n                {\n                    type: 'input_statement',\n                    name: 'DO',\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n            tooltip          : translate('Control For Tooltip'),\n            category         : Blockly.Categories.Loop,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Control For'),\n            'description' : translate('Control For Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.controls_for = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const variable0 = Blockly.JavaScript.variableDB_.getName(block.getFieldValue('VAR'), Blockly.Variables.NAME_TYPE);\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'FROM', Blockly.JavaScript.ORDER_ASSIGNMENT) || '0';\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'TO', Blockly.JavaScript.ORDER_ASSIGNMENT) || '0';\n    const increment = Blockly.JavaScript.valueToCode(block, 'BY', Blockly.JavaScript.ORDER_ASSIGNMENT) || '1';\n\n    let branch = Blockly.JavaScript.statementToCode(block, 'DO');\n    branch = Blockly.JavaScript.addLoopTrap(branch, block.id);\n\n    let code = '';\n\n    if (Blockly.isNumber(argument0) && Blockly.isNumber(argument1) && Blockly.isNumber(increment)) {\n        const up = parseFloat(argument0) <= parseFloat(argument1);\n        const operator = up ? '<=' : '>=';\n        const step = Math.abs(parseFloat(increment));\n\n        const assignment = `${variable0} = ${argument0}`;\n        const condition = `${variable0} ${operator} ${argument1}`;\n        const statement = `${variable0} ${up ? '+=' : '-='} ${step}`;\n\n        code = `\n        for (${assignment}; ${condition}; ${statement}) {\n            ${branch}\n        }\\n`;\n    } else {\n        // Cache non-trivial values to variables to prevent repeated look-ups.\n        let startVar = argument0;\n        if (!argument0.match(/^\\w+$/) && !Blockly.isNumber(argument0)) {\n            // eslint-disable-next-line no-underscore-dangle\n            startVar = Blockly.JavaScript.variableDB_.getDistinctName(\n                `${variable0}_start`,\n                Blockly.Variables.NAME_TYPE\n            );\n            code = `var ${startVar} = ${argument0};\\n`;\n        }\n\n        let endVar = argument1;\n        if (!argument1.match(/^\\w+$/) && !Blockly.isNumber(argument1)) {\n            // eslint-disable-next-line no-underscore-dangle\n            endVar = Blockly.JavaScript.variableDB_.getDistinctName(`${variable0}_end`, Blockly.Variables.NAME_TYPE);\n            code += `var ${endVar} = ${argument1};\\n`;\n        }\n\n        // Determine loop direction at start, in case one of the bounds changes during loop execution.\n        // eslint-disable-next-line no-underscore-dangle\n        const incVar = Blockly.JavaScript.variableDB_.getDistinctName(`${variable0}_inc`, Blockly.Variables.NAME_TYPE);\n        const incVal = Blockly.isNumber(increment) ? Math.abs(increment) : `Math.abs(${increment})`;\n\n        code += `\n        var ${incVar} = ${incVal};\n        if (${startVar} > ${endVar}) {\n            ${incVar} = -${incVar};\n        }\n        for (\n           ${variable0} = ${startVar}; \n           ${incVar} >= 0 ? ${variable0} <= ${endVar} : ${variable0} >= ${endVar};\n           ${variable0} += ${incVar}\n        ) {\n            ${branch};\n        }\\n`;\n    }\n\n    return code;\n};\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.controls_forEach = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('for each item %1 in list %2'),\n            args0   : [\n                {\n                    type    : 'field_variable',\n                    name    : 'VAR',\n                    variable: null,\n                },\n                {\n                    type : 'input_value',\n                    name : 'LIST',\n                    check: 'Array',\n                },\n            ],\n            message1: translate('do %1'),\n            args1   : [\n                {\n                    type: 'input_statement',\n                    name: 'DO',\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n            tooltip          : translate('Control Foreach Tooltip'),\n            category         : Blockly.Categories.Loop,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Control Foreach'),\n            'description' : translate('Control Foreach'),\n        };\n    },\n};\n\nBlockly.JavaScript.controls_forEach = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const variable0 = Blockly.JavaScript.variableDB_.getName(block.getFieldValue('VAR'), Blockly.Variables.NAME_TYPE);\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_ASSIGNMENT) || '[]';\n\n    let branch = Blockly.JavaScript.statementToCode(block, 'DO');\n    branch = Blockly.JavaScript.addLoopTrap(branch, block.id);\n\n    let code = '';\n\n    // Cache non-trivial values to variables to prevent repeated look-ups.\n    let listVar = argument0;\n    if (!argument0.match(/^\\w+$/)) {\n        // eslint-disable-next-line no-underscore-dangle\n        listVar = Blockly.JavaScript.variableDB_.getDistinctName(`${variable0}_list`, Blockly.Variables.NAME_TYPE);\n        code = `var ${listVar} = ${argument0};\\n`;\n    }\n\n    // eslint-disable-next-line no-underscore-dangle\n    const indexVar = Blockly.JavaScript.variableDB_.getDistinctName(`${variable0}_list`, Blockly.Variables.NAME_TYPE);\n\n    code += `\n    for (var ${indexVar} in ${listVar}) {\n        ${variable0} = ${listVar}[${indexVar}];\n        ${branch}\n    }\\n`;\n\n    return code;\n};\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.controls_repeat = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            type    : 'controls_repeat',\n            message0: translate('repeat %1 times'),\n            args0   : [\n                {\n                    type     : 'field_number',\n                    name     : 'TIMES',\n                    value    : 10,\n                    min      : 0,\n                    precision: 1,\n                },\n            ],\n            message1: translate('do %1'),\n            args1   : [\n                {\n                    type: 'input_statement',\n                    name: 'DO',\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n            tooltip          : translate('Control Repeat Tooltip'),\n            category         : Blockly.Categories.Loop,\n        };\n    },\n    meta(){\n        return  {\n            'display_name': translate('Control Repeat'),\n            'description' : translate('Control Repeat Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.controls_repeat = Blockly.JavaScript.controls_repeat_ext;\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.controls_repeat_ext = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('repeat %1 times'),\n            args0   : [\n                {\n                    type : 'input_value',\n                    name : 'TIMES',\n                    check: 'Number',\n                },\n            ],\n            message1: translate('do %1'),\n            args1   : [\n                {\n                    type: 'input_statement',\n                    name: 'DO',\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n            tooltip          : translate('Control Repeat Tooltip'),\n            category         : Blockly.Categories.Loop,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Control Repeat'),\n            'description' : translate('Control Repeat Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.controls_repeat_ext = block => {\n    let repeats;\n    if (block.getField('TIMES')) {\n        repeats = String(Number(block.getFieldValue('TIMES')));\n    } else {\n        repeats = Blockly.JavaScript.valueToCode(block, 'TIMES') || '0';\n    }\n\n    const branch = Blockly.JavaScript.statementToCode(block, 'DO');\n    let code = '';\n\n    // eslint-disable-next-line no-underscore-dangle\n    const loopVar = Blockly.JavaScript.variableDB_.getDistinctName('count', Blockly.Variables.NAME_TYPE);\n    let endVar = repeats;\n\n    if (!repeats.match(/^\\w+$/) && !Blockly.isNumber(repeats)) {\n        // eslint-disable-next-line no-underscore-dangle\n        endVar = Blockly.JavaScript.variableDB_.getDistinctName('repeat_end', Blockly.Variables.NAME_TYPE);\n        code += `var ${endVar} = ${repeats};\\n`;\n    }\n\n    code += `\n    for (var ${loopVar} = 0; ${loopVar} < ${endVar}; ${loopVar}++) {\n        ${branch}\n    }\\n`;\n    return code;\n};\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.controls_whileUntil = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('repeat %1 %2'),\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'MODE',\n                    options: [[translate('while'), 'WHILE'], [translate('until'), 'UNTIL']],\n                },\n                {\n                    type : 'input_value',\n                    name : 'BOOL',\n                    check: 'Boolean',\n                },\n            ],\n            message1: translate('do %1'),\n            args1   : [\n                {\n                    type: 'input_statement',\n                    name: 'DO',\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n            tooltip          : translate('Control While Tooltip'),\n            category         : Blockly.Categories.Loop,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Control While'),\n            'description' : translate('Control While Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.controls_whileUntil = block => {\n    const branch = Blockly.JavaScript.statementToCode(block, 'DO');\n    const until = block.getFieldValue('MODE') === 'UNTIL';\n    const order = until ? Blockly.JavaScript.ORDER_LOGICAL_NOT : Blockly.JavaScript.ORDER_NONE;\n    let argument0 = Blockly.JavaScript.valueToCode(block, 'BOOL', order) || 'false';\n\n    if (until) {\n        argument0 = `!${argument0}`;\n    }\n\n    // eslint-disable-next-line no-underscore-dangle\n    const maxLoopVar = Blockly.JavaScript.variableDB_.getDistinctName('maxLoops', Blockly.Variables.NAME_TYPE);\n    // eslint-disable-next-line no-underscore-dangle\n    const currentLoopVar = Blockly.JavaScript.variableDB_.getDistinctName('currentLoop', Blockly.Variables.NAME_TYPE);\n\n    return `\n        var ${maxLoopVar} = 10000;\n        var ${currentLoopVar} = 0;\n\n        while (${argument0}) {\n            if (${currentLoopVar} > ${maxLoopVar}) {\n                throw new Error(\"${translate('Infinite loop detected')}\");\n            } else {\n                ${currentLoopVar}++;\n            }\n            \n            ${branch}\n        }\\n`;\n};\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.variables_get = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            type    : 'variables_get',\n            message0: '%1',\n            args0   : [\n                {\n                    type    : 'field_variable',\n                    name    : 'VAR',\n                    variable: translate('item'),\n                },\n            ],\n            output         : null,\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Get Variable Tooltip'),\n            category       : Blockly.Categories.Variables,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Get Variable Value'),\n            'description' : translate('Get Variable Value Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.variables_get = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const code = Blockly.JavaScript.variableDB_.getName(block.getFieldValue('VAR'), Blockly.Variables.NAME_TYPE);\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.variables_set = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            type    : 'field_variable',\n            message0: translate('set %1 to %2'),\n            args0   : [\n                {\n                    type    : 'field_variable',\n                    name    : 'VAR',\n                    variable: translate('item'),\n                },\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n            tooltip          : translate('Set Variable Tooltip'),\n            category         : Blockly.Categories.Variables,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Set Variable'),\n            'description' : translate('Set Variable Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.variables_set = block => {\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_ASSIGNMENT) || '0';\n    // eslint-disable-next-line no-underscore-dangle\n    const varName = Blockly.JavaScript.variableDB_.getName(block.getFieldValue('VAR'), Blockly.Variables.NAME_TYPE);\n\n    const code = `${varName} = ${argument0};\\n`;\n    return code;\n};\n","import { finishSign }        from '../../images';\nimport { setBlockTextColor } from '../../../utils';\nimport { translate }         from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.after_purchase = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('%1 (4) Get your trade result and trade again %2'),\n            message1: '%1',\n            args0   : [\n                {\n                    type  : 'field_image',\n                    src   : finishSign,\n                    width : 25,\n                    height: 25,\n                    alt   : 'F',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type : 'input_statement',\n                    name : 'AFTERPURCHASE_STACK',\n                    check: 'TradeAgain',\n                },\n            ],\n            colour         : '#2a3052',\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate(\n                'Get the previous trade information and result, then trade again (Runs on trade finish)'\n            ),\n            category: Blockly.Categories.After_Purchase,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('After Purchase'),\n            'description' : translate('After Purchase Description'),\n        };\n    },\n    onchange(event) {\n        setBlockTextColor(this);\n        if (!this.workspace || this.isInFlyout) {\n            return;\n        }\n\n        // Maintain single instance of this block\n        if (event.type === Blockly.Events.BLOCK_CREATE) {\n            if (event.ids && event.ids.includes(this.id)) {\n                this.workspace.getAllBlocks(true).forEach(block => {\n                    if (block.type === this.type && block.id !== this.id) {\n                        block.dispose();\n                    }\n                });\n            }\n        }\n    },\n};\n\nBlockly.JavaScript.after_purchase = block => {\n    const stack = Blockly.JavaScript.statementToCode(block, 'AFTERPURCHASE_STACK');\n    const code = `\n    BinaryBotPrivateAfterPurchase = function BinaryBotPrivateAfterPurchase() {\n        ${stack}\n        return false;\n    };`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import config        from '../../../../constants/const';\nimport { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.contract_check_result = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('Result is %1'),\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'CHECK_RESULT',\n                    options: config.lists.CHECK_RESULT,\n                },\n            ],\n            output         : 'Boolean',\n            outputShape    : Blockly.OUTPUT_SHAPE_HEXAGONAL,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('True if the result matches the selection'),\n            category       : Blockly.Categories.After_Purchase,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Check Result'),\n            'description' : translate('Check Result Description'),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CREATE || event.type === Blockly.Events.END_DRAG) {\n            if (this.isDescendantOf('after_purchase')) {\n                if (this.disabled) {\n                    this.setDisabled(false);\n                }\n            } else if (!this.disabled) {\n                this.setDisabled(true);\n            }\n        }\n    },\n};\n\nBlockly.JavaScript.contract_check_result = block => {\n    const checkWith = block.getFieldValue('CHECK_RESULT');\n\n    const code = `Bot.isResult('${checkWith}')`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import config        from '../../../../constants/const';\nimport { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.read_details = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('Contract Detail: %1'),\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'DETAIL_INDEX',\n                    options: config.lists.DETAILS,\n                },\n            ],\n            output         : null,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Reads a selected option from contract details list'),\n            category       : Blockly.Categories.After_Purchase,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Read Detail Block'),\n            'description' : translate('Read Detail Description'),\n\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CREATE || event.type === Blockly.Events.END_DRAG) {\n            if (this.isDescendantOf('after_purchase')) {\n                if (this.disabled) {\n                    this.setDisabled(false);\n                }\n            } else if (!this.disabled) {\n                this.setDisabled(true);\n            }\n        }\n    },\n};\n\nBlockly.JavaScript.read_details = block => {\n    const detailIndex = block.getFieldValue('DETAIL_INDEX');\n\n    const code = `Bot.readDetails(${detailIndex})`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.trade_again = {\n    init() {\n        this.jsonInit(this.definition());\n\n        // Ensure one of this type per statement-stack\n        this.setNextStatement(false);\n    },\n    definition(){\n        return {\n            message0         : translate('Trade Again'),\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            previousStatement: null,\n            tooltip          : translate('Runs the trade block again'),\n            category         : Blockly.Categories.After_Purchase,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Trade Again'),\n            'description' : translate('Trade Again Description'),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CREATE || event.type === Blockly.Events.END_DRAG) {\n            if (this.isDescendantOf('after_purchase')) {\n                if (this.disabled) {\n                    this.setDisabled(false);\n                }\n            } else if (!this.disabled) {\n                this.setDisabled(true);\n            }\n        }\n    },\n};\n\nBlockly.JavaScript.trade_again = () => 'return true;\\n';\n","import { getPurchaseChoices } from '../../../shared';\nimport { translate }          from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.ask_price = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('Ask Price %1'),\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'PURCHASE_LIST',\n                    options: getPurchaseChoices,\n                },\n            ],\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Ask Price for selected proposal'),\n            category       : Blockly.Categories.Before_Purchase,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Ask Price'),\n            'description' : translate('Ask Price Description'),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CREATE || event.type === Blockly.Events.END_DRAG) {\n            if (this.isDescendantOf('before_purchase')) {\n                if (this.disabled) {\n                    this.setDisabled(false);\n                }\n            } else if (!this.disabled) {\n                this.setDisabled(true);\n            }\n        }\n    },\n};\n\nBlockly.JavaScript.ask_price = block => {\n    const purchaseList = block.getFieldValue('PURCHASE_LIST');\n\n    const code = `Bot.getAskPrice('${purchaseList}')`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { purchase }          from '../../images';\nimport { setBlockTextColor } from '../../../utils';\nimport { translate }         from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.before_purchase = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: translate('%1 (2) Watch and purchase your contract %2'),\n            message1: '%1',\n            args0   : [\n                {\n                    type  : 'field_image',\n                    src   : purchase,\n                    width : 25,\n                    height: 25,\n                    alt   : 'P',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type : 'input_statement',\n                    name : 'BEFOREPURCHASE_STACK',\n                    check: 'Purchase',\n                },\n            ],\n            colour         : '#2a3052',\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Watch the tick stream and purchase the desired contract (Runs on tick update)'),\n            category       : Blockly.Categories.Before_Purchase,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Before Purchase'),\n            'description' : translate('Before Purchase Description'),\n        };\n    },\n    onchange(event) {\n        setBlockTextColor(this);\n        if (!this.workspace || this.isInFlyout) {\n            return;\n        }\n\n        // Maintain single instance of this block\n        if (event.type === Blockly.Events.BLOCK_CREATE) {\n            if (event.ids && event.ids.includes(this.id)) {\n                this.workspace.getAllBlocks(true).forEach(block => {\n                    if (block.type === this.type && block.id !== this.id) {\n                        block.dispose();\n                    }\n                });\n            }\n        }\n    },\n};\n\nBlockly.JavaScript.before_purchase = block => {\n    const stack = Blockly.JavaScript.statementToCode(block, 'BEFOREPURCHASE_STACK');\n\n    const code = `BinaryBotPrivateBeforePurchase = function BinaryBotPrivateBeforePurchase() {\n        ${stack}\n    };\\n`;\n    return code;\n};\n","import { getPurchaseChoices } from '../../../shared';\nimport { translate }         from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.payout = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('Payout %1'),\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'PURCHASE_LIST',\n                    options: getPurchaseChoices,\n                },\n            ],\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Payout for selected proposal'),\n            category       : Blockly.Categories.Before_Purchase,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Payout'),\n            'description' : translate('Payout Description'),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CREATE || event.type === Blockly.Events.END_DRAG) {\n            if (this.isDescendantOf('before_purchase')) {\n                if (this.disabled) {\n                    this.setDisabled(false);\n                }\n            } else if (!this.disabled) {\n                this.setDisabled(true);\n            }\n        }\n    },\n};\n\nBlockly.JavaScript.payout = block => {\n    const purchaseList = block.getFieldValue('PURCHASE_LIST');\n\n    const code = `Bot.getPayout('${purchaseList}')`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { getPurchaseChoices, updatePurchaseChoices } from '../../../shared';\nimport { translate }                                 from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.purchase = {\n    init() {\n        this.jsonInit(this.definition());\n\n        // Ensure one of this type per statement-stack\n        this.setNextStatement(false);\n    },\n    definition(){\n        return {\n            message0: translate('Purchase %1'),\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'PURCHASE_LIST',\n                    options: getPurchaseChoices,\n                },\n            ],\n            previousStatement: null,\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            tooltip          : translate('Payout for selected proposal'),\n            category         : Blockly.Categories.Before_Purchase,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Puchase'),\n            'description' : translate('Purchase Description'),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CREATE || event.type === Blockly.Events.END_DRAG) {\n            if (this.isDescendantOf('before_purchase')) {\n                if (this.disabled) {\n                    this.setDisabled(false);\n                }\n            } else if (!this.disabled) {\n                this.setDisabled(true);\n            }\n        } else if (event.type === Blockly.Events.BLOCK_CHANGE || Blockly.Events.BLOCK_CREATE) {\n            const tradeDefinitionBlock = this.workspace\n                .getAllBlocks(true)\n                .find(block => block.type === 'trade_definition');\n\n            if (!tradeDefinitionBlock) {\n                return;\n            }\n\n            const tradeTypeBlock = tradeDefinitionBlock.getChildByType('trade_definition_tradetype');\n            if (!tradeTypeBlock) {\n                return;\n            }\n\n            const tradeType = tradeTypeBlock.getFieldValue('TRADETYPE_LIST');\n            const contractTypeBlock = tradeDefinitionBlock.getChildByType('trade_definition_contracttype');\n            const contractType = contractTypeBlock.getFieldValue('TYPE_LIST');\n            const oppositesName = tradeType.toUpperCase();\n\n            if (tradeType && contractType && oppositesName) {\n                updatePurchaseChoices(contractType, oppositesName);\n            }\n        }\n    },\n};\n\nBlockly.JavaScript.purchase = block => {\n    const purchaseList = block.getFieldValue('PURCHASE_LIST');\n\n    const code = `Bot.purchase('${purchaseList}');\\n`;\n    return code;\n};\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.check_sell = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0       : translate('Sell is available'),\n            output         : 'Boolean',\n            outputShape    : Blockly.OUTPUT_SHAPE_HEXAGONAL,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('True if sell at market is available'),\n            category       : Blockly.Categories.During_Purchase,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Check Sell'),\n            'description' : translate('Check Sell Description'),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CREATE || event.type === Blockly.Events.END_DRAG) {\n            if (this.isDescendantOf('during_purchase')) {\n                if (this.disabled) {\n                    this.setDisabled(false);\n                }\n            } else if (!this.disabled) {\n                this.setDisabled(true);\n            }\n        }\n    },\n};\n\nBlockly.JavaScript.check_sell = () => {\n    const code = 'Bot.isSellAvailable()';\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { sellContract }      from '../../images';\nimport { setBlockTextColor } from '../../../utils';\nimport { translate }         from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.during_purchase = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('%1 (3) Watch and sell your purchased contract %2'),\n            message1: '%1',\n            args0   : [\n                {\n                    type  : 'field_image',\n                    src   : sellContract,\n                    width : 25,\n                    height: 25,\n                    alt   : 'S',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type : 'input_statement',\n                    name : 'DURING_PURCHASE_STACK',\n                    check: 'SellAtMarket',\n                },\n            ],\n            colour         : '#2a3052',\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate(\n                'Watch the purchased contract info and sell at market if available (Runs on contract update)'\n            ),\n            category: Blockly.Categories.During_Purchase,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('During Purchase'),\n            'description' : translate('During Purchase Description'),\n        };\n    },\n    onchange(event) {\n        setBlockTextColor(this);\n        if (!this.workspace || this.isInFlyout) {\n            return;\n        }\n\n        // Maintain single instance of this block\n        if (event.type === Blockly.Events.BLOCK_CREATE) {\n            if (event.ids && event.ids.includes(this.id)) {\n                this.workspace.getAllBlocks(true).forEach(block => {\n                    if (block.type === this.type && block.id !== this.id) {\n                        block.dispose();\n                    }\n                });\n            }\n        }\n    },\n};\n\nBlockly.JavaScript.during_purchase = block => {\n    const stack = Blockly.JavaScript.statementToCode(block, 'DURING_PURCHASE_STACK');\n\n    const code = `BinaryBotPrivateDuringPurchase = function BinaryBotPrivateDuringPurchase() {\n        ${stack}\n    };\\n`;\n    return code;\n};\n","import { translate }         from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.sell_at_market = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0         : translate('Sell at market'),\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n            tooltip          : translate('Sell at market'),\n            category         : Blockly.Categories.During_Purchase,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Sell at market'),\n            'description' : translate('Sell at market description'),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CREATE || event.type === Blockly.Events.END_DRAG) {\n            if (this.isDescendantOf('during_purchase')) {\n                if (this.disabled) {\n                    this.setDisabled(false);\n                }\n            } else if (!this.disabled) {\n                this.setDisabled(true);\n            }\n        }\n    },\n};\n\nBlockly.JavaScript.sell_at_market = () => 'Bot.sellAtMarket();\\n';\n","import { translate }         from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.sell_price = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0       : translate('Sell profit/loss'),\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Returns the profit for sell at market.'),\n            category       : Blockly.Categories.During_Purchase,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Sell price'),\n            'description' : translate('Sell price description'),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CREATE || event.type === Blockly.Events.END_DRAG) {\n            if (this.isDescendantOf('during_purchase')) {\n                if (this.disabled) {\n                    this.setDisabled(false);\n                }\n            } else if (!this.disabled) {\n                this.setDisabled(true);\n            }\n        }\n    },\n};\n\nBlockly.JavaScript.sell_price = () => {\n    const code = 'Bot.getSellPrice()';\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { translate } from '../../../../../utils/lang/i18n';\n\nBlockly.Blocks.fast_ema_period = {\n    init() {\n        this.jsonInit({\n            message0: translate('Fast EMA Period %1'),\n            args0   : [\n                {\n                    type : 'input_value',\n                    name : 'FAST_EMA_PERIOD',\n                    check: null,\n                },\n            ],\n            colour           : Blockly.Colours.BinaryLessGray.colour,\n            colourSecondary  : Blockly.Colours.BinaryLessGray.colourSecondary,\n            colourTertiary   : Blockly.Colours.BinaryLessGray.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange      : Blockly.Blocks.input_list.onchange,\n    allowedParents: ['macda_statement'],\n};\n\nBlockly.JavaScript.fast_ema_period = () => {};\n","import { translate } from '../../../../../utils/lang/i18n';\n\nBlockly.Blocks.input_list = {\n    init() {\n        this.requiredParentId = '';\n\n        this.jsonInit({\n            message0: translate('Input List %1'),\n            args0   : [\n                {\n                    type : 'input_value',\n                    name : 'INPUT_LIST',\n                    check: 'Array',\n                },\n            ],\n            colour           : Blockly.Colours.BinaryLessGray.colour,\n            colourSecondary  : Blockly.Colours.BinaryLessGray.colourSecondary,\n            colourTertiary   : Blockly.Colours.BinaryLessGray.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        const surroundParent = this.getSurroundParent();\n        if (event.type === Blockly.Events.END_DRAG) {\n            if (!this.requiredParentId && this.allowedParents.includes(surroundParent.type)) {\n                this.requiredParentId = surroundParent.id;\n            } else if (!surroundParent || surroundParent.id !== this.requiredParentId) {\n                Blockly.Events.disable();\n                this.unplug(false);\n\n                const parentBlock = this.workspace.getAllBlocks().find(block => block.id === this.requiredParentId);\n\n                if (parentBlock) {\n                    const parentConnection = parentBlock.getLastConnectionInStatement('STATEMENT');\n                    parentConnection.connect(this.previousConnection);\n                } else {\n                    this.dispose();\n                }\n                Blockly.Events.enable();\n            }\n        }\n    },\n    allowedParents: [\n        'bb_statement',\n        'bba_statement',\n        'ema_statement',\n        'emaa_statement',\n        'macda_statement',\n        'rsi_statement',\n        'rsia_statement',\n        'sma_statement',\n        'smaa_statement',\n    ],\n};\n\nBlockly.JavaScript.input_list = () => {};\n","import { translate } from '../../../../../utils/lang/i18n';\n\nBlockly.Blocks.period = {\n    init() {\n        this.jsonInit({\n            message0: translate('Period %1'),\n            args0   : [\n                {\n                    type : 'input_value',\n                    name : 'PERIOD',\n                    check: null,\n                },\n            ],\n            colour           : Blockly.Colours.BinaryLessGray.colour,\n            colourSecondary  : Blockly.Colours.BinaryLessGray.colourSecondary,\n            colourTertiary   : Blockly.Colours.BinaryLessGray.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange      : Blockly.Blocks.input_list.onchange,\n    allowedParents: [\n        'bb_statement',\n        'bba_statement',\n        'ema_statement',\n        'emaa_statement',\n        'macda_statement',\n        'rsi_statement',\n        'rsia_statement',\n        'sma_statement',\n        'smaa_statement',\n    ],\n};\n\nBlockly.JavaScript.period = () => {};\n","import { translate } from '../../../../../utils/lang/i18n';\n\nBlockly.Blocks.signal_ema_period = {\n    init() {\n        this.jsonInit({\n            message0: translate('Signal EMA Period %1'),\n            args0   : [\n                {\n                    type : 'input_value',\n                    name : 'SIGNAL_EMA_PERIOD',\n                    check: null,\n                },\n            ],\n            colour           : Blockly.Colours.BinaryLessGray.colour,\n            colourSecondary  : Blockly.Colours.BinaryLessGray.colourSecondary,\n            colourTertiary   : Blockly.Colours.BinaryLessGray.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange      : Blockly.Blocks.input_list.onchange,\n    allowedParents: ['macda_statement'],\n};\n\nBlockly.JavaScript.signal_ema_period = () => {};\n","import { translate } from '../../../../../utils/lang/i18n';\n\nBlockly.Blocks.slow_ema_period = {\n    init() {\n        this.jsonInit({\n            message0: translate('Slow EMA Period %1'),\n            args0   : [\n                {\n                    type : 'input_value',\n                    name : 'SLOW_EMA_PERIOD',\n                    check: null,\n                },\n            ],\n            colour           : Blockly.Colours.BinaryLessGray.colour,\n            colourSecondary  : Blockly.Colours.BinaryLessGray.colourSecondary,\n            colourTertiary   : Blockly.Colours.BinaryLessGray.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange      : Blockly.Blocks.input_list.onchange,\n    allowedParents: ['macda_statement'],\n};\n\nBlockly.JavaScript.slow_ema_period = () => {};\n","import { translate } from '../../../../../utils/lang/i18n';\n\nBlockly.Blocks.std_dev_multiplier_down = {\n    init() {\n        this.jsonInit({\n            message0: translate('Standard Deviation Down Multiplier %1'),\n            args0   : [\n                {\n                    type : 'input_value',\n                    name : 'DOWNMULTIPLIER',\n                    check: null,\n                },\n            ],\n            colour           : Blockly.Colours.BinaryLessGray.colour,\n            colourSecondary  : Blockly.Colours.BinaryLessGray.colourSecondary,\n            colourTertiary   : Blockly.Colours.BinaryLessGray.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n        });\n    },\n    onchange      : Blockly.Blocks.input_list.onchange,\n    allowedParents: ['bb_statement', 'bba_statement'],\n};\n\nBlockly.JavaScript.std_dev_multiplier_down = () => {};\n","import { translate } from '../../../../../utils/lang/i18n';\n\nBlockly.Blocks.std_dev_multiplier_up = {\n    init() {\n        this.jsonInit({\n            message0: translate('Standard Deviation Up Multiplier %1'),\n            args0   : [\n                {\n                    type : 'input_value',\n                    name : 'UPMULTIPLIER',\n                    check: null,\n                },\n            ],\n            colour           : Blockly.Colours.BinaryLessGray.colour,\n            colourSecondary  : Blockly.Colours.BinaryLessGray.colourSecondary,\n            colourTertiary   : Blockly.Colours.BinaryLessGray.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange      : Blockly.Blocks.input_list.onchange,\n    allowedParents: ['bb_statement', 'bba_statement'],\n};\n\nBlockly.JavaScript.std_dev_multiplier_up = () => {};\n","import { expectValue } from '../../../shared';\nimport config          from '../../../../constants/const';\nimport { translate }   from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.bb_statement = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('set %1 to Bollinger Bands %2 %3'),\n            message1: '%1',\n            args0   : [\n                {\n                    type    : 'field_variable',\n                    name    : 'VARIABLE',\n                    variable: 'bb',\n                },\n                {\n                    type   : 'field_dropdown',\n                    name   : 'BBRESULT_LIST',\n                    options: config.bbResult,\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type : 'input_statement',\n                    name : 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            tooltip          : translate('Calculates Bollinger Bands (BB) from a list with a period'),\n            previousStatement: null,\n            nextStatement    : null,\n            category         : Blockly.Categories.Indicators,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('BB Statement'),\n            'descriptionL': translate('BB Statement Description'),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.END_DRAG) {\n            const blocksInStatement = this.getBlocksInStatement('STATEMENT');\n            blocksInStatement.forEach(block => {\n                if (!this.requiredParamBlocks.includes(block.type)) {\n                    Blockly.Events.disable();\n                    block.unplug(false);\n                    Blockly.Events.enable();\n                }\n            });\n        }\n    },\n    requiredParamBlocks: ['input_list', 'period', 'std_dev_multiplier_up', 'std_dev_multiplier_down'],\n};\n\nBlockly.JavaScript.bb_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const varName = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const bbResult = block.getFieldValue('BBRESULT_LIST');\n    const input = expectValue(block.getChildByType('input_list'), 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD') || '10';\n    const stdDevUp = block.childValueToCode('std_dev_multiplier_up', 'UPMULTIPLIER') || '5';\n    const stdDevDown = block.childValueToCode('std_dev_multiplier_down', 'DOWNMULTIPLIER') || '5';\n\n    const code = `${varName} = Bot.bb(${input}, { periods: ${period}, stdDevUp: ${stdDevUp}, stdDevDown: ${stdDevDown} }, ${bbResult});\\n`;\n    return code;\n};\n","import { expectValue } from '../../../shared';\nimport config          from '../../../../constants/const';\nimport { translate }   from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.bba_statement = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('set %1 to Bollinger Bands Array %2 %3'),\n            message1: '%1',\n            args0   : [\n                {\n                    type    : 'field_variable',\n                    name    : 'VARIABLE',\n                    variable: 'bba',\n                },\n                {\n                    type   : 'field_dropdown',\n                    name   : 'BBRESULT_LIST',\n                    options: config.bbResult,\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type : 'input_statement',\n                    name : 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            tooltip          : translate('Calculates Bollinger Bands (BB) list from a list with a period'),\n            previousStatement: null,\n            nextStatement    : null,\n            category         : Blockly.Categories.Indicators,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Bollinger Bands Statement'),\n            'description' : translate('Bollinger Bands Description'),\n        };\n    },\n    onchange           : Blockly.Blocks.bb_statement.onchange,\n    requiredParamBlocks: ['input_list', 'period', 'std_dev_multiplier_up', 'std_dev_multiplier_down'],\n};\n\nBlockly.JavaScript.bba_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const varName = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const bbResult = block.getFieldValue('BBRESULT_LIST');\n    const input = expectValue(block.getChildByType('input_list'), 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD') || '10';\n    const stdDevUp = block.childValueToCode('std_dev_multiplier_up', 'UPMULTIPLIER') || '5';\n    const stdDevDown = block.childValueToCode('std_dev_multiplier_down', 'DOWNMULTIPLIER') || '5';\n\n    const code = `${varName} = Bot.bba(${input}, { periods: ${period}, stdDevUp: ${stdDevUp}, stdDevDown: ${stdDevDown} }, ${bbResult});\\n`;\n    return code;\n};\n","import { expectValue } from '../../../shared';\nimport { translate }   from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.ema_statement = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('set %1 to Exponentional Moving Average %2'),\n            message1: '%1',\n            args0   : [\n                {\n                    type    : 'field_variable',\n                    name    : 'VARIABLE',\n                    variable: 'ema',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type : 'input_statement',\n                    name : 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            tooltip          : translate('Calculates Exponential Moving Average (EMA) from a list with a period'),\n            previousStatement: null,\n            nextStatement    : null,\n            category         : Blockly.Categories.Indicators,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Exponential Moving Average Statement'),\n            'description' : translate('Exponential Moving Average Statement Description'),\n        };\n    },\n    onchange           : Blockly.Blocks.bb_statement.onchange,\n    requiredParamBlocks: ['input_list', 'period'],\n};\n\nBlockly.JavaScript.ema_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const varName = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const input = expectValue(block.getChildByType('input_list'), 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD') || '10';\n\n    const code = `${varName} = Bot.ema(${input}, ${period});\\n`;\n    return code;\n};\n","import { expectValue } from '../../../shared';\nimport { translate }   from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.emaa_statement = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('set %1 to Exponentional Moving Average Array %2'),\n            message1: '%1',\n            args0   : [\n                {\n                    type    : 'field_variable',\n                    name    : 'VARIABLE',\n                    variable: 'emaa',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type : 'input_statement',\n                    name : 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            tooltip          : translate('Calculates Exponential Moving Average (EMA) list from a list of values with a period'),\n            previousStatement: null,\n            nextStatement    : null,\n            category         : Blockly.Categories.Indicators,\n        };\n    }, meta(){\n        return {\n            'display_name': translate('Exponential Moving Average Statement'),\n            'description' : translate('Exponential Moving Average Statement Dscription'),\n        };\n    },\n    onchange           : Blockly.Blocks.bb_statement.onchange,\n    requiredParamBlocks: ['input_list', 'period'],\n};\n\nBlockly.JavaScript.emaa_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const varName = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const input = expectValue(block.getChildByType('input_list'), 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD') || '10';\n\n    const code = `${varName} = Bot.emaa(${input}, ${period});\\n`;\n    return code;\n};\n","import { expectValue } from '../../../shared';\nimport config          from '../../../../constants/const';\nimport { translate }   from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.macda_statement = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('set %1 to MACD Array %2 %3'),\n            message1: '%1',\n            args0   : [\n                {\n                    type    : 'field_variable',\n                    name    : 'VARIABLE',\n                    variable: 'macda',\n                },\n                {\n                    type   : 'field_dropdown',\n                    name   : 'MACDFIELDS_LIST',\n                    options: config.macdFields,\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type : 'input_statement',\n                    name : 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            tooltip          : translate('Calculates Moving Average Convergence Divergence (MACD) list from a list'),\n            previousStatement: null,\n            nextStatement    : null,\n            category         : Blockly.Categories.Indicators,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Moving Average Convergence Divergence'),\n            'decription'  : translate('Moving Average Convergence Divergence Description'),\n        };\n    },\n    onchange           : Blockly.Blocks.bb_statement.onchange,\n    requiredParamBlocks: ['input_list', 'fast_ema_period', 'slow_ema_period', 'signal_ema_period'],\n};\n\nBlockly.JavaScript.macda_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const varName = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const macdField = block.getFieldValue('MACDFIELDS_LIST');\n    const input = expectValue(block.getChildByType('input_list'), 'INPUT_LIST');\n    const fastEmaPeriod = block.childValueToCode('fast_ema_period', 'FAST_EMA_PERIOD') || '12';\n    const slowEmaPeriod = block.childValueToCode('slow_ema_period', 'SLOW_EMA_PERIOD') || '26';\n    const signalEmaPeriod = block.childValueToCode('signal_ema_period', 'SIGNAL_EMA_PERIOD') || '9';\n\n    const code = `${varName} = Bot.macda(${input}, { \n        fastEmaPeriod: ${fastEmaPeriod},\n        slowEmaPeriod: ${slowEmaPeriod},\n        signalEmaPeriod: ${signalEmaPeriod},\n    }, ${macdField});\\n`;\n    return code;\n};\n","import { expectValue } from '../../../shared';\nimport { translate }   from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.rsi_statement = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('set %1 to Relative Strength Index %2'),\n            message1: '%1',\n            args0   : [\n                {\n                    type    : 'field_variable',\n                    name    : 'VARIABLE',\n                    variable: 'rsi',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type : 'input_statement',\n                    name : 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            tooltip          : translate('Relative Strength Index (RSI) from a list with a period'),\n            previousStatement: null,\n            nextStatement    : null,\n            category         : Blockly.Categories.Indicators,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Relative Strength Index Statement'),\n            'description' : translate('Relative Strength Index Statement Description'),\n        };\n    },\n    onchange           : Blockly.Blocks.bb_statement.onchange,\n    requiredParamBlocks: ['input_list', 'period'],\n};\n\nBlockly.JavaScript.rsi_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const varName = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const input = expectValue(block.getChildByType('input_list'), 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD') || '10';\n\n    const code = `${varName} = Bot.rsi(${input}, ${period});\\n`;\n    return code;\n};\n","import { expectValue } from '../../../shared';\nimport { translate }   from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.rsia_statement = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('set %1 to Relative Strength Index Array %2'),\n            message1: '%1',\n            args0   : [\n                {\n                    type    : 'field_variable',\n                    name    : 'VARIABLE',\n                    variable: 'rsia',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type : 'input_statement',\n                    name : 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            tooltip          : translate('Calculates Relative Strength Index (RSI) list from a list of values with a period'),\n            previousStatement: null,\n            nextStatement    : null,\n            category         : Blockly.Categories.Indicators,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Relative Strength Index Statement'),\n            'description' : translate('Relative Strength Index Statement Description'),\n        };\n    },\n    onchange           : Blockly.Blocks.bb_statement.onchange,\n    requiredParamBlocks: ['input_list', 'period'],\n};\n\nBlockly.JavaScript.rsia_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const varName = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const input = expectValue(block.getChildByType('input_list'), 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD') || '10';\n\n    const code = `${varName} = Bot.rsia(${input}, ${period});\\n`;\n    return code;\n};\n","import { expectValue } from '../../../shared';\nimport { translate }   from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.sma_statement = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('set %1 to Simple Moving Average %2'),\n            message1: '%1',\n            args0   : [\n                {\n                    type    : 'field_variable',\n                    name    : 'VARIABLE',\n                    variable: 'sma',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type : 'input_statement',\n                    name : 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            tooltip          : translate('Calculates Simple Moving Average (SMA) from a list with a period'),\n            previousStatement: null,\n            nextStatement    : null,\n            category         : Blockly.Categories.Indicators,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('SImple Moving Average Statement'),\n            'description' : translate('Simple Moving Average Statement Description'),\n        };\n    },\n    onchange           : Blockly.Blocks.bb_statement.onchange,\n    requiredParamBlocks: ['input_list', 'period'],\n};\n\nBlockly.JavaScript.sma_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const varName = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const input = expectValue(block.getChildByType('input_list'), 'INPUT_LIST');\n    const period = block.getChildFieldValue('period', 'PERIOD') || '10';\n\n    const code = `${varName} = Bot.sma(${input}, ${period});\\n`;\n    return code;\n};\n","import { expectValue } from '../../../shared';\nimport { translate }   from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.smaa_statement = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('set %1 to Simple Moving Average Array %2'),\n            message1: '%1',\n            args0   : [\n                {\n                    type    : 'field_variable',\n                    name    : 'VARIABLE',\n                    variable: 'smaa',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type : 'input_statement',\n                    name : 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            tooltip          : translate('Calculates Simple Moving Average (SMA) from a list with a period'),\n            previousStatement: null,\n            nextStatement    : null,\n            category         : Blockly.Categories.Indicators,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Simple Moving Average Statement'),\n            'description' : translate('Simple Moving Average Statement Description'),\n        };\n    },\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.smaa_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const varName = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const input = expectValue(block.getChildByType('input_list'), 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD') || '10';\n\n    const code = `${varName} = Bot.smaa(${input}, ${period});\\n`;\n    return code;\n};\n","import config        from '../../../../constants/const';\nimport { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.check_direction = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('Direction is %1'),\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'CHECK_DIRECTION',\n                    options: config.lists.CHECK_DIRECTION,\n                },\n            ],\n            output         : 'Boolean',\n            outputShape    : Blockly.OUTPUT_SHAPE_HEXAGONAL,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('True if the direction matches the selection'),\n            category       : Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Check Direction'),\n            'description' : translate('Check Direction Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.check_direction = block => {\n    const checkWith = block.getFieldValue('CHECK_DIRECTION');\n\n    const code = `Bot.checkDirection('${checkWith}')`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import config        from '../../../../constants/const';\nimport { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.get_ohlc = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('in candle list get # from end %1'),\n            message1: translate('with interval: %1'),\n            args0   : [\n                {\n                    type : 'input_value',\n                    name : 'CANDLEINDEX',\n                    check: 'Number',\n                },\n            ],\n            args1: [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'CANDLEINTERVAL_LIST',\n                    options: config.candleIntervals,\n                },\n            ],\n            output         : 'Candle',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Get the nth recent candle'),\n            category       : Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Nth recent Candle'),\n            'description' : translate('Nth recent Candle Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.get_ohlc = block => {\n    const selectedGranularity = block.getFieldValue('CANDLEINTERVAL_LIST');\n    const granularity = selectedGranularity === 'default' ? 'undefined' : selectedGranularity;\n    const index = Blockly.JavaScript.valueToCode(block, 'CANDLEINDEX', Blockly.JavaScript.ORDER_ATOMIC) || '1';\n\n    const code = `Bot.getOhlcFromEnd({ index: ${index}, granularity: ${granularity} })`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.lastDigitList = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0       : translate('Last Digit List'),\n            output         : 'Array',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Returns the list of last digit values'),\n            category       : Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Last Digit List'),\n            'description' : translate('Last Digit List Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.lastDigitList = () => ['Bot.getLastDigitList()', Blockly.JavaScript.ORDER_ATOMIC];\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.last_digit = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0       : translate('Last Digit'),\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Returns the last digit of the latest tick'),\n            category       : Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Last Digit'),\n            'description' : translate('Last Digit Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.last_digit = () => ['Bot.getLastDigit()', Blockly.JavaScript.ORDER_ATOMIC];\n","import config        from '../../../../constants/const';\nimport { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.ohlc = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('Candles List'),\n            message1: translate('with interval: %1'),\n            args1   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'CANDLEINTERVAL_LIST',\n                    options: config.candleIntervals,\n                },\n            ],\n            output         : 'Array',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Returns the candle list'),\n            category       : Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Candle List'),\n            'description' : translate('Candle List Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.ohlc = block => {\n    const selectedGranularity = block.getFieldValue('CANDLEINTERVAL_LIST');\n    const granularity = selectedGranularity === 'default' ? 'undefined' : selectedGranularity;\n\n    const code = `Bot.getOhlc({ granularity: ${granularity} })`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import config        from '../../../../constants/const';\nimport { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.ohlc_values = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('Make a List of %1 values in candles list with interval: %2'),\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'OHLCFIELD_LIST',\n                    options: config.ohlcFields,\n                },\n                {\n                    type   : 'field_dropdown',\n                    name   : 'CANDLEINTERVAL_LIST',\n                    options: config.candleIntervals,\n                },\n            ],\n            output         : 'Array',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Returns a list of the selected candle values'),\n            category       : Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Selected Candle Value'),\n            'description' : translate('Selected Candle Value Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.ohlc_values = block => {\n    const selectedGranularity = block.getFieldValue('CANDLEINTERVAL_LIST');\n    const granularity = selectedGranularity === 'default' ? 'undefined' : selectedGranularity;\n    const ohlcField = block.getFieldValue('OHLCFIELD_LIST');\n\n    const code = `Bot.getOhlc({ field: '${ohlcField}', granularity: ${granularity} })`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import config        from '../../../../constants/const';\nimport { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.read_ohlc = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('In candles list read %1 from end %2'),\n            message1: translate('with interval: %1'),\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'OHLCFIELD_LIST',\n                    options: config.ohlcFields,\n                },\n                {\n                    type : 'input_value',\n                    name : 'CANDLEINDEX',\n                    check: 'Number',\n                },\n            ],\n            args1: [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'CANDLEINTERVAL_LIST',\n                    options: config.candleIntervals,\n                },\n            ],\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Read the selected candle value in the nth recent candle'),\n            category       : Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Read selected candle'),\n            'description' : translate('Read selected candle description'),\n        };\n    },\n};\n\nBlockly.JavaScript.read_ohlc = block => {\n    const selectedGranularity = block.getFieldValue('CANDLEINTERVAL_LIST');\n    const granularity = selectedGranularity === 'default' ? 'undefined' : selectedGranularity;\n    const ohlcField = block.getFieldValue('OHLCFIELD_LIST');\n    const index = Blockly.JavaScript.valueToCode(block, 'CANDLEINDEX', Blockly.JavaScript.ORDER_ATOMIC) || '1';\n\n    const code = `Bot.getOhlcFromEnd({ field: '${ohlcField}', index: ${index}, granularity: ${granularity} })`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.tick = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0       : translate('Last Tick'),\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Returns the tick value received by a before purchase block'),\n            category       : Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Tick value'),\n            'description' : translate('Tick value Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.tick = () => ['Bot.getLastTick()', Blockly.JavaScript.ORDER_ATOMIC];\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.tick_analysis = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('This block is called on every tick %1 %2'),\n            args0   : [\n                {\n                    type: 'input_dummy',\n                },\n                {\n                    type : 'input_statement',\n                    name : 'TICKANALYSIS_STACK',\n                    check: null,\n                },\n            ],\n            colour         : '#fef1cf',\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('You can use this block to analyze the ticks, regardless of your trades'),\n            category       : Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Tick Analysis'),\n            'description' : translate('Tick Analysis Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.tick_analysis = block => {\n    const stack = Blockly.JavaScript.statementToCode(block, 'TICKANALYSIS_STACK') || '';\n\n    const code = `\n    BinaryBotPrivateTickAnalysisList.push(function BinaryBotPrivateTickAnalysis() {\n        ${stack}\n    });\\n`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.ticks = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0       : translate('Ticks List'),\n            output         : 'Array',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Returns the list of tick values'),\n            category       : Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Tick List'),\n            'description' : translate('Tick List Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.ticks = () => ['Bot.getTicks()', Blockly.JavaScript.ORDER_ATOMIC];\n","import { translate } from '../../../../../utils/lang/i18n';\n\nBlockly.Blocks.is_candle_black = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('Is candle black? %1'),\n            args0   : [\n                {\n                    type : 'input_value',\n                    name : 'OHLCOBJ',\n                    check: 'Candle',\n                },\n            ],\n            output         : 'Boolean',\n            outputShape    : Blockly.OUTPUT_SHAPE_HEXAGONAL,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate(\n                'Checks if the given candle is black, returns true if close is less than open in the given candle.'\n            ),\n            category: Blockly.Categories.Candle,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Is Candle Block'),\n            'description' : translate('Is Candle Black Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.is_candle_black = block => {\n    const ohlcObj = Blockly.JavaScript.valueToCode(block, 'OHLCOBJ') || '{}';\n\n    const code = `Bot.isCandleBlack(${ohlcObj})`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import config        from '../../../../../constants/const';\nimport { translate } from '../../../../../utils/lang/i18n';\n\nBlockly.Blocks.ohlc_values_in_list = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('Make a list of %1 values from candles list %2'),\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'OHLCFIELD_LIST',\n                    options: config.ohlcFields,\n                },\n                {\n                    type: 'input_value',\n                    name: 'OHLCLIST',\n                },\n            ],\n            output         : 'Array',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Returns a list of the selected candle values'),\n            category       : Blockly.Categories.Candle,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Selected Candle list value'),\n            'description' : translate('Selected Candle list value description'),\n        };\n    },\n};\n\nBlockly.JavaScript.ohlc_values_in_list = block => {\n    const ohlcField = block.getFieldValue('OHLCFIELD_LIST') || 'open';\n    const ohlcList = Blockly.JavaScript.valueToCode(block, 'OHLCLIST') || '[]';\n\n    const code = `Bot.candleValues(${ohlcList}, '${ohlcField}')`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import config        from '../../../../../constants/const';\nimport { translate } from '../../../../../utils/lang/i18n';\n\nBlockly.Blocks.read_ohlc_obj = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('Read %1 value in candle %2'),\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'OHLCFIELD_LIST',\n                    options: config.ohlcFields,\n                },\n                {\n                    type: 'input_value',\n                    name: 'OHLCOBJ',\n                },\n            ],\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Read a field in a candle (read from the Candles list)'),\n            category       : Blockly.Categories.Candle,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Read candle '),\n            'description' : translate('Read candle Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.read_ohlc_obj = block => {\n    const ohlcField = block.getFieldValue('OHLCFIELD_LIST');\n    const ohlcObj = Blockly.JavaScript.valueToCode(block, 'OHLCOBJ') || '{}';\n\n    const code = `Bot.candleField(${ohlcObj}, '${ohlcField}')`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import config        from '../../../../../constants/const';\nimport { translate } from '../../../../../utils/lang/i18n';\n\nBlockly.Blocks.balance = {\n    init() {\n        this.jsonInit(this.definition());\n\n        // Change shape based on selected type\n        const balanceTypeField = this.getField('BALANCE_TYPE');\n        balanceTypeField.setValidator(value => {\n            if (value === 'STR') {\n                this.setOutputShape(Blockly.OUTPUT_SHAPE_SQUARE);\n                this.setOutput(true, 'String');\n            } else if (value === 'NUM') {\n                this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND);\n                this.setOutput(true, 'Number');\n            }\n            this.initSvg();\n            this.render(false);\n            return undefined;\n        });\n    },\n    definition(){\n        return {\n            message0: translate('Balance: %1'),\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'BALANCE_TYPE',\n                    options: config.lists.BALANCE_TYPE,\n                },\n            ],\n            output         : null,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Balance Tooltip'),\n            category       : Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Balance'),\n            'description' : translate('Balance Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.balance = block => {\n    const balanceType = block.getFieldValue('BALANCE_TYPE');\n\n    const code = `Bot.getBalance('${balanceType}')`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { translate } from '../../../../../utils/lang/i18n';\n\nBlockly.Blocks.block_holder = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('Blocks inside are ignored %1 %2'),\n            args0   : [\n                {\n                    type: 'input_dummy',\n                },\n                {\n                    type : 'input_statement',\n                    name : 'USELESS_STACK',\n                    check: null,\n                },\n            ],\n            colour         : '#fef1cf',\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Put your blocks in here to prevent them from being removed'),\n            category       : Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Block Holder'),\n            'description' : translate('Block Holder Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.block_holder = () => '';\n","import { loadRemote }                 from '../../../../utils';\nimport { translate }                  from '../../../../../utils/lang/i18n';\nimport { observer as globalObserver } from '../../../../../utils/observer';\n\nBlockly.Blocks.loader = {\n    init() {\n        this.loadedByMe = [];\n        this.loadedVariables = [];\n        this.currentUrl = '';\n\n        this.jsonInit(this.definition());\n\n        const urlField = this.getField('URL');\n        // eslint-disable-next-line no-underscore-dangle\n        urlField.onFinishEditing_ = newValue => this.onFinishEditingUrl(newValue);\n    },\n    definition(){\n        return {\n            message0: translate('Load block from: %1'),\n            args0   : [\n                {\n                    type: 'field_input',\n                    name: 'URL',\n                    text: 'http://www.example.com/block.xml',\n                },\n            ],\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Load blocks from URL'),\n            category       : Blockly.Categories.Miscellaneous,\n        };\n    }, meta(){\n        return {\n            'display_name': translate('Lodear'),\n            'description' : translate('Loeder Description'),\n        };\n    },\n    onFinishEditingUrl(newValue) {\n        if (this.currentUrl === newValue) {\n            return;\n        }\n\n        if (this.disabled) {\n            const hasKnownUrl = this.workspace\n                .getAllBlocks()\n                .some(block => block.type === 'loader' && block.id !== this.id && block.currentUrl === this.currentUrl);\n            if (hasKnownUrl) {\n                this.setDisabled(false);\n            }\n        }\n\n        const { recordUndo } = Blockly.Events;\n        Blockly.Events.recordUndo = false;\n\n        loadRemote(this)\n            .then(() => {\n                Blockly.Events.recordUndo = recordUndo;\n                globalObserver.emit('ui.log.success', translate('Blocks are loaded successfully'));\n            })\n            .catch(errorMsg => {\n                Blockly.Events.recordUndo = recordUndo;\n                globalObserver.emit('ui.log.error', errorMsg);\n            });\n\n        this.currentUrl = this.getFieldValue('URL');\n    },\n    onchange(event) {\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) {\n            this.currentUrl = this.getFieldValue('URL');\n            this.workspace.getAllBlocks().forEach(block => {\n                if (block.type === 'loader' && block.id !== this.id) {\n                    if (block.currentUrl === this.currentUrl) {\n                        this.setDisabled(true);\n                    }\n                }\n            });\n        }\n    },\n};\n\nBlockly.JavaScript.loader = block => {\n    if (block.loadedVariables.length) {\n        // eslint-disable-next-line no-underscore-dangle\n        return `var ${block.loadedVariables.map(v => Blockly.JavaScript.variableDB_.safeName_(v)).toString()}`;\n    }\n    return '';\n};\n","import config        from '../../../../../constants/const';\nimport { translate } from '../../../../../utils/lang/i18n';\n\nBlockly.Blocks.notify = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('Notify %1 with sound: %2 %3'),\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'NOTIFICATION_TYPE',\n                    options: config.lists.NOTIFICATION_TYPE,\n                },\n                {\n                    type   : 'field_dropdown',\n                    name   : 'NOTIFICATION_SOUND',\n                    options: config.lists.NOTIFICATION_SOUND,\n                },\n                {\n                    type : 'input_value',\n                    name : 'MESSAGE',\n                    check: null,\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n            tooltip          : translate('Creates a notification'),\n            cateogry         : Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Pop out notify'),\n            'description' : translate('Pop out notify description'),\n        };\n    },\n};\n\nBlockly.JavaScript.notify = block => {\n    const notificationType = block.getFieldValue('NOTIFICATION_TYPE');\n    const sound = block.getFieldValue('NOTIFICATION_SOUND');\n    const message = Blockly.JavaScript.valueToCode(block, 'MESSAGE') || `\"${translate('<empty message>')}\"`;\n\n    const code = `Bot.notify({ className: '${notificationType}', message: ${message}, sound: '${sound}'});\\n`;\n    return code;\n};\n","import { translate } from '../../../../../utils/lang/i18n';\n\nBlockly.Blocks.total_profit = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0       : translate('Total Profit'),\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Returns the total profit'),\n            category       : Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Total Profit'),\n            'description' : translate('Total Profit Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.total_profit = () => ['Bot.getTotalProfit()', Blockly.JavaScript.ORDER_ATOMIC];\n","import { translate } from '../../../../../utils/lang/i18n';\n\nBlockly.Blocks.total_runs = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0       : translate('Number of Runs'),\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Returns the number of runs since the beginning'),\n            category       : Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Total Runs'),\n            'description' : translate('Total Runs Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.total_runs = () => ['Bot.getTotalRuns()', Blockly.JavaScript.ORDER_ATOMIC];\n","import { translate } from '../../../../../utils/lang/i18n';\n\nBlockly.Blocks.epoch = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0       : translate('Seconds Since Epoch'),\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Returns the epoch time (seconds since epoch)'),\n            category       : Blockly.Categories.Time,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Second Since Epoch'),\n            'description' : translate('Seconds Since Epoch Decription'),\n        };\n    },\n};\n\nBlockly.JavaScript.epoch = () => ['Bot.getTime()', Blockly.JavaScript.ORDER_ATOMIC];\n","import { translate } from '../../../../../utils/lang/i18n';\n\nBlockly.Blocks.timeout = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('%1 %2 Run after %3 second(s)'),\n            args0   : [\n                {\n                    type: 'input_dummy',\n                },\n                {\n                    type: 'input_statement',\n                    name: 'TIMEOUTSTACK',\n                },\n                {\n                    type: 'input_value',\n                    name: 'SECONDS',\n                },\n            ],\n            colour           : '#fef1cf',\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n            tooltip          : translate('Run the blocks inside every n seconds'),\n            category         : Blockly.Categories.Time,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Timeout'),\n            'description' : translate('Timeout Description'),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.END_DRAG) {\n            const allowedScopes = [\n                'trade_definition',\n                'during_purchase',\n                'before_purchase',\n                'after_purchase',\n                'tick_analysis',\n            ];\n            if (allowedScopes.some(scope => this.isDescendantOf(scope))) {\n                if (this.disabled) {\n                    this.setDisabled(false);\n                }\n            } else if (!this.disabled) {\n                this.setDisabled(true);\n            }\n        }\n    },\n};\n\nBlockly.JavaScript.timeout = block => {\n    const stack = Blockly.JavaScript.statementToCode(block, 'TIMEOUTSTACK');\n    const seconds = Blockly.JavaScript.valueToCode(block, 'SECONDS', Blockly.JavaScript.ORDER_ATOMIC) || '1';\n\n    const code = `sleep(${seconds});\\n${stack}\\n`;\n    return code;\n};\n","import { defineContract }    from '../../images';\nimport { setBlockTextColor } from '../../../utils';\nimport config                from '../../../../constants/const';\nimport { translate }         from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.trade_definition = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: translate('%1 (1) Define your trade contract %2'),\n            message1: '%1',\n            message2: translate('Run Once at Start: %1'),\n            message3: '%1',\n            message4: translate('Define Trade Options: %1'),\n            message5: '%1',\n            args0   : [\n                {\n                    type  : 'field_image',\n                    src   : defineContract,\n                    width : 25,\n                    height: 25,\n                    alt   : 'T',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'TRADE_OPTIONS',\n                },\n            ],\n            args2: [\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args3: [\n                {\n                    type : 'input_statement',\n                    name : 'INITIALIZATION',\n                    check: null,\n                },\n            ],\n            args4: [\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args5: [\n                {\n                    type: 'input_statement',\n                    name: 'SUBMARKET',\n                },\n            ],\n            colour         : '#2a3052',\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Trade Definition tooltip'),\n            category       : Blockly.Categories.Trade_Definition,\n        };\n    },\n    meta() {\n        return {\n            'display_name': translate('Trade Definition'),\n            'description' : translate('Define market type, stake, trade type and duration in trade'),\n        };\n    },\n    onchange(event) {\n        setBlockTextColor(this);\n        if (!this.workspace || this.isInFlyout) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.END_DRAG) {\n            this.enforceTradeDefinitionType();\n        } else if (event.type === Blockly.Events.BLOCK_CREATE) {\n            if (event.ids && event.ids.includes(this.id)) {\n                // Maintain single instance of this block\n                this.workspace.getAllBlocks(true).forEach(block => {\n                    if (block.type === this.type && block.id !== this.id) {\n                        block.dispose();\n                    }\n                });\n\n                const tradeDefinitionMarket = this.getChildByType('trade_definition_market');\n                if (!tradeDefinitionMarket) {\n                    return;\n                }\n\n                const selectedMarket = tradeDefinitionMarket.getFieldValue('MARKET_LIST');\n                const eventArgs = [tradeDefinitionMarket, 'field', 'MARKET_LIST', '', selectedMarket];\n                const changeEvent = new Blockly.Events.BlockChange(...eventArgs);\n                Blockly.Events.fire(changeEvent);\n            }\n        }\n    },\n    // Check if blocks within statement are valid, we enforce\n    // this statement to only allow `trade_definition` type blocks.\n    enforceTradeDefinitionType() {\n        const blocksInStatement = this.getBlocksInStatement('TRADE_OPTIONS');\n        blocksInStatement.forEach(block => {\n            if (!/^trade_definition_.+$/.test(block.type)) {\n                Blockly.Events.disable();\n                block.unplug(false);\n                Blockly.Events.enable();\n            }\n        });\n    },\n    requiredParamBlocks: [\n        'trade_definition_market',\n        'trade_definition_tradetype',\n        'trade_definition_contracttype',\n        'trade_definition_candleinterval',\n        'trade_definition_restartbuysell',\n        'trade_definition_restartonerror',\n    ],\n};\n\nBlockly.JavaScript.trade_definition = block => {\n    const account = $('.account-id')\n        .first()\n        .attr('value');\n    if (!account) {\n        throw Error('Please login');\n    }\n\n    const symbol = block.getChildFieldValue('trade_definition_market', 'SYMBOL_LIST') || '';\n    const tradeType = block.getChildFieldValue('trade_definition_tradetype', 'TRADETYPE_LIST') || '';\n\n    // Contract Type (not referring the block)\n    const contractTypeBlock = block.getChildByType('trade_definition_contracttype');\n    const contractTypeSelector = contractTypeBlock.getFieldValue('TYPE_LIST');\n    const oppositesName = tradeType.toUpperCase();\n    const contractTypeList =\n        contractTypeSelector === 'both'\n            ? config.opposites[oppositesName].map(k => Object.keys(k)[0])\n            : [contractTypeSelector];\n\n    const candleIntervalValue =\n        block.getChildFieldValue('trade_definition_candleinterval', 'CANDLEINTERVAL_LIST') || 'default';\n    const shouldRestartOnError = block.childValueToCode('trade_definition_restartonerror', 'RESTARTONERROR') || 'FALSE';\n    const timeMachineEnabled =\n        block.childValueToCode('trade_definition_restartbuysell', 'TIME_MACHINE_ENABLED') || 'FALSE';\n\n    const initialization = Blockly.JavaScript.statementToCode(block, 'INITIALIZATION');\n    const tradeOptionsStatement = Blockly.JavaScript.statementToCode(block, 'SUBMARKET');\n\n    const code = `\n    BinaryBotPrivateInit = function BinaryBotPrivateInit() {\n        Bot.init('${account}', {\n          symbol: '${symbol}',\n          contractTypes: ${JSON.stringify(contractTypeList)},\n          candleInterval: '${candleIntervalValue}',\n          shouldRestartOnError: ${shouldRestartOnError},\n          timeMachineEnabled: ${timeMachineEnabled},\n        });\n        ${initialization.trim()}\n    };\n      BinaryBotPrivateStart = function BinaryBotPrivateStart() {\n        ${tradeOptionsStatement.trim()}\n      };\\n`;\n    return code;\n};\n","import config from '../../../../constants/const';\n\nBlockly.Blocks.trade_definition_candleinterval = {\n    init() {\n        this.jsonInit({\n            message0: 'Default Candle Interval: %1',\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'CANDLEINTERVAL_LIST',\n                    options: config.candleIntervals.slice(1),\n                },\n            ],\n            colour           : Blockly.Colours.BinaryLessPurple.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.BinaryLessPurple.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.END_DRAG) {\n            this.enforceParent();\n        }\n    },\n    enforceParent: Blockly.Blocks.trade_definition_market.enforceParent,\n};\nBlockly.JavaScript.trade_definition_candleinterval = () => {};\n","import { oppositesToDropdown } from '../../../utils';\nimport config                  from '../../../../constants/const';\nimport { translate }           from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.trade_definition_contracttype = {\n    init() {\n        this.jsonInit({\n            message0: 'Contract Type: %1',\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'TYPE_LIST',\n                    options: [['', '']],\n                },\n            ],\n            colour           : Blockly.Colours.BinaryLessPurple.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.BinaryLessPurple.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n        });\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange(event) {\n        const allowedEvents = [Blockly.Events.BLOCK_CREATE, Blockly.Events.BLOCK_CHANGE, Blockly.Events.END_DRAG];\n        if (!this.workspace || this.isInFlyout || !allowedEvents.includes(event.type) || this.workspace.isDragging()) {\n            return;\n        }\n\n        const topParentBlock = this.getTopParent();\n        if (!topParentBlock || topParentBlock.type !== 'trade_definition') {\n            this.enforceParent();\n            return;\n        }\n\n        const getContractTypes = () => {\n            const tradeTypeBlock = topParentBlock.getChildByType('trade_definition_tradetype');\n            const tradeType = tradeTypeBlock && tradeTypeBlock.getFieldValue('TRADETYPE_LIST');\n            if (tradeType) {\n                return [[translate('Both'), 'both'], ...oppositesToDropdown(config.opposites[tradeType.toUpperCase()])];\n            }\n            return [['', '']];\n        };\n\n        const updateTypeList = (useDefault = true) => {\n            const typeList = this.getField('TYPE_LIST');\n            const typeListArgs = [getContractTypes()];\n            if (useDefault) {\n                typeListArgs.push(typeList.getValue());\n            }\n            typeList.updateOptions(...typeListArgs);\n        };\n\n        if (event.type === Blockly.Events.BLOCK_CHANGE) {\n            if (event.name === 'TRADETYPE_LIST') {\n                updateTypeList();\n            }\n        } else if (event.type === Blockly.Events.BLOCK_CREATE) {\n            if (event.ids.includes(this.id)) {\n                updateTypeList();\n            }\n        }\n    },\n    enforceParent: Blockly.Blocks.trade_definition_market.enforceParent,\n};\nBlockly.JavaScript.trade_definition_contracttype = () => '';\n","import { fieldGeneratorMapping }      from '../../../shared';\nimport { observer as globalObserver } from '../../../../utils/observer';\n\nBlockly.Blocks.trade_definition_market = {\n    init() {\n        this.jsonInit({\n            message0: 'Market: %1 Submarket: %2 Symbol: %3',\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'MARKET_LIST',\n                    options: fieldGeneratorMapping.MARKET_LIST,\n                },\n                {\n                    type   : 'field_dropdown',\n                    name   : 'SUBMARKET_LIST',\n                    options: [['', '']],\n                },\n                {\n                    type   : 'field_dropdown',\n                    name   : 'SYMBOL_LIST',\n                    options: [['', '']],\n                },\n            ],\n            colour           : Blockly.Colours.BinaryLessPurple.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.BinaryLessPurple.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange(event) {\n        const allowedEvents = [Blockly.Events.BLOCK_CREATE, Blockly.Events.BLOCK_CHANGE, Blockly.Events.END_DRAG];\n        if (!this.workspace || this.isInFlyout || !allowedEvents.includes(event.type) || this.workspace.isDragging()) {\n            return;\n        }\n\n        globalObserver.emit('bot.init', this.getFieldValue('SYMBOL_LIST'));\n\n        const topParentBlock = this.getTopParent();\n        if (!topParentBlock || topParentBlock.type !== 'trade_definition') {\n            this.enforceParent();\n            return;\n        }\n\n        const updateMarketLists = (fields, useDefault = true) => {\n            fields.forEach(field => {\n                const list = this.getField(field);\n                const listArgs = [fieldGeneratorMapping[field](this)()];\n                if (useDefault) {\n                    listArgs.push(list.getValue());\n                }\n                list.updateOptions(...listArgs);\n            });\n        };\n\n        if (event.type === Blockly.Events.BLOCK_CREATE) {\n            if (event.ids.includes(this.id)) {\n                updateMarketLists(['SUBMARKET_LIST', 'SYMBOL_LIST']);\n            }\n        } else if (event.type === Blockly.Events.BLOCK_CHANGE) {\n            if (event.blockId === this.id) {\n                if (event.name === 'MARKET_LIST') {\n                    updateMarketLists(['SUBMARKET_LIST']);\n                } else if (event.name === 'SUBMARKET_LIST') {\n                    updateMarketLists(['SYMBOL_LIST']);\n                }\n            }\n        }\n    },\n    enforceParent() {\n        if (!this.isDescendantOf('trade_definition')) {\n            Blockly.Events.disable();\n            this.unplug(false);\n\n            const tradeDefinitionBlock = this.workspace.getAllBlocks().find(block => block.type === 'trade_definition');\n            if (tradeDefinitionBlock) {\n                const connection = tradeDefinitionBlock.getLastConnectionInStatement('TRADE_OPTIONS');\n                connection.connect(this.previousConnection);\n            } else {\n                this.dispose();\n            }\n\n            Blockly.Events.enable();\n        }\n    },\n};\n\nBlockly.JavaScript.trade_definition_market = () => {};\n","Blockly.Blocks.trade_definition_restartbuysell = {\n    init() {\n        this.jsonInit({\n            message0: 'Restart buy/sell on error (disable for better performance): %1',\n            args0   : [\n                {\n                    type : 'input_value',\n                    name : 'TIME_MACHINE_ENABLED',\n                    check: 'Boolean',\n                },\n            ],\n            colour           : Blockly.Colours.BinaryLessPurple.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.BinaryLessPurple.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange(event) {\n        const allowedEvents = [Blockly.Events.BLOCK_CREATE, Blockly.Events.BLOCK_CHANGE, Blockly.Events.END_DRAG];\n        if (!this.workspace || this.isInFlyout || !allowedEvents.includes(event.type) || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.END_DRAG) {\n            this.enforceParent();\n        }\n    },\n    enforceParent: Blockly.Blocks.trade_definition_market.enforceParent,\n};\nBlockly.JavaScript.trade_definition_restartbuysell = () => {};\n","Blockly.Blocks.trade_definition_restartonerror = {\n    init() {\n        this.jsonInit({\n            message0: 'Restart last trade on error (bot ignores the unsuccessful trade): %1',\n            args0   : [\n                {\n                    type : 'input_value',\n                    name : 'RESTARTONERROR',\n                    check: 'Boolean',\n                },\n            ],\n            colour           : Blockly.Colours.BinaryLessPurple.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.BinaryLessPurple.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange(event) {\n        const allowedEvents = [Blockly.Events.BLOCK_CREATE, Blockly.Events.BLOCK_CHANGE, Blockly.Events.END_DRAG];\n        if (!this.workspace || this.isInFlyout || !allowedEvents.includes(event.type) || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.END_DRAG) {\n            this.enforceParent();\n        }\n    },\n    enforceParent: Blockly.Blocks.trade_definition_market.enforceParent,\n};\nBlockly.JavaScript.trade_definition_restartonerror = () => {};\n","import {\n    getBarriersForContracts,\n    pollForContracts,\n    getDurationsForContracts,\n}                    from '../../../shared';\nimport config        from '../../../../constants/const';\nimport { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.trade_definition_tradeoptions = {\n    init() {\n        this.jsonInit(this.definition());\n\n        // Ensure one of this type per statement-stack\n        this.setNextStatement(false);\n    },\n    definition(){\n        return {\n            message0: translate('Duration: %1 %2 Stake: %3 %4'),\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'DURATIONTYPE_LIST',\n                    options: [['', '']],\n                },\n                {\n                    type: 'input_value',\n                    name: 'DURATION',\n                },\n                {\n                    type   : 'field_dropdown',\n                    name   : 'CURRENCY_LIST',\n                    options: [['USD', 'USD']], // TODO: Don't use hardcoded currency.\n                },\n                {\n                    type : 'input_value',\n                    name : 'AMOUNT',\n                    check: 'Number',\n                },\n            ],\n            colour           : Blockly.Colours.BinaryLessPurple.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.BinaryLessPurple.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n            tooltip          : translate('Trade Options Tooltip'),\n            category         : Blockly.Categories.Trade_Definition,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Trade Options'),\n            'description' : translate('Trade Options Description'),\n        };\n    },\n    onchange(event) {\n        const allowedEvents = [Blockly.Events.BLOCK_CREATE, Blockly.Events.BLOCK_CHANGE, Blockly.Events.END_DRAG];\n        if (!this.workspace || this.isInFlyout || !allowedEvents.includes(event.type) || this.workspace.isDragging()) {\n            return;\n        }\n\n        const topParentBlock = this.getTopParent();\n        if (!topParentBlock || topParentBlock.type !== 'trade_definition') {\n            if (!this.disabled) {\n                this.setDisabled(true);\n            }\n            return;\n        } else if (this.disabled) {\n            this.setDisabled(false);\n        }\n\n        const symbol = topParentBlock.getChildFieldValue('trade_definition_market', 'SYMBOL_LIST') || '';\n        const tradeTypeBlock = topParentBlock.getChildByType('trade_definition_tradetype');\n        const tradeType = tradeTypeBlock.getFieldValue('TRADETYPE_LIST') || '';\n        const durationUnit = this.getFieldValue('DURATIONTYPE_LIST');\n\n        if (event.type === Blockly.Events.BLOCK_CREATE) {\n            if (event.ids.includes(this.id)) {\n                pollForContracts(symbol).then(contracts => {\n                    const durations = getDurationsForContracts(contracts, tradeType);\n                    this.updateDurationInput(durations, true);\n                });\n            }\n        } else if (event.type === Blockly.Events.BLOCK_CHANGE) {\n            if (event.blockId === this.id) {\n                if (event.name === 'DURATIONTYPE_LIST') {\n                    pollForContracts(symbol).then(contracts => {\n                        this.updateBarrierInputs(contracts, tradeType, durationUnit);\n                    });\n                } else if (event.name === 'BARRIERTYPE_LIST' || event.name === 'SECONDBARRIERTYPE_LIST') {\n                    this.applyBarrierHandlebars(event.name);\n                    pollForContracts(symbol).then(contracts => {\n                        this.updateBarrierInputs(contracts, tradeType, durationUnit);\n                    });\n                }\n            }\n        } else if (event.type === Blockly.Events.END_DRAG) {\n            if (event.blockId === this.id) {\n                pollForContracts(symbol).then(contracts => {\n                    const durations = getDurationsForContracts(contracts, tradeType);\n                    this.updateDurationInput(durations, true);\n                });\n            }\n        }\n    },\n    createPredictionInput(predictionRange) {\n        Blockly.Events.disable();\n\n        if (this.getInput('PREDICTION')) {\n            return;\n        }\n\n        this.appendDummyInput('PREDICTION_LABEL').appendField(translate('Prediction:'));\n\n        const predictionInput = this.appendValueInput('PREDICTION');\n\n        // We can't determine which contract a user buys, so sometimes the prediction range\n        // returned may not be valid, start at minimum index 1 (if possible) to bypass that\n        const index = Math.min(1, predictionRange.length - 1);\n        const shadowBlock = this.workspace.newBlock('math_number');\n\n        shadowBlock.setShadow(true);\n        shadowBlock.setFieldValue(predictionRange[index], 'NUM');\n        shadowBlock.outputConnection.connect(predictionInput.connection);\n        shadowBlock.initSvg();\n        shadowBlock.render(true);\n\n        Blockly.Events.enable();\n    },\n    createBarrierInput(barriers, startIndex = 0) {\n        const inputNames = ['BARRIER', 'SECONDBARRIER'];\n        const inputLabels = [translate('High barrier'), translate('Low barrier')];\n\n        for (let i = startIndex; i < barriers.values.length; i++) {\n            if (this.getInput(inputNames[i])) {\n                return;\n            }\n\n            const label = barriers.values.length === 1 ? translate('Barrier') : inputLabels[i];\n            const input = this.appendValueInput(inputNames[i])\n                .appendField(translate(label), `${inputNames[i]}_LABEL`)\n                .appendField(new Blockly.FieldDropdown(config.barrierTypes), `${inputNames[i]}TYPE_LIST`);\n\n            const shadowBlock = this.workspace.newBlock('math_number');\n            shadowBlock.setShadow(true);\n            shadowBlock.setFieldValue(barriers.values[i], 'NUM');\n            shadowBlock.outputConnection.connect(input.connection);\n            shadowBlock.initSvg();\n            shadowBlock.render(true);\n        }\n    },\n    updateDurationInput(durations, setMinDuration) {\n        const durationList = this.getField('DURATIONTYPE_LIST');\n        durationList.updateOptions(durations.map(duration => [duration.label, duration.unit]));\n\n        const durationInput = this.getInput('DURATION');\n        if (durationInput.connection.isConnected()) {\n            const targetBlock = durationInput.connection.targetBlock();\n            if (targetBlock.isShadow()) {\n                const minDuration = durations.find(duration => duration.unit === durationList.getValue());\n                if (setMinDuration) {\n                    targetBlock.setFieldValue(minDuration.minimum, 'NUM');\n                }\n            }\n        }\n    },\n    // Only updates a single `trade_definition_tradeoptions` block, i.e. `this` instance\n    updateBarrierInputs(contracts, tradeType, durationUnit) {\n        const selectedBarrierTypes = [\n            this.getFieldValue('BARRIERTYPE_LIST') || config.barrierTypes[0][1],\n            this.getFieldValue('SECONDBARRIERTYPE_LIST') || config.barrierTypes[1][1],\n        ];\n\n        const barriers = getBarriersForContracts(contracts, tradeType, durationUnit, selectedBarrierTypes);\n        const inputNames = ['BARRIER', 'SECONDBARRIER'];\n\n        for (let i = 0; i < barriers.values.length; i++) {\n            const input = this.getInput(inputNames[i]);\n\n            if (input && input.connection.isConnected()) {\n                const targetBlock = input.connection.targetBlock();\n                const barrierTypeList = this.getField(`${inputNames[i]}TYPE_LIST`);\n                const absoluteType = [[translate('Absolute'), 'absolute']];\n\n                if (durationUnit === 'd') {\n                    barrierTypeList.updateOptions(absoluteType, 'absolute');\n                } else if (barriers.allowBothTypes || barriers.allowAbsoluteType) {\n                    barrierTypeList.updateOptions(\n                        [...config.barrierTypes, ...absoluteType],\n                        barrierTypeList.getValue()\n                    );\n                } else {\n                    barrierTypeList.updateOptions(config.barrierTypes, barrierTypeList.getValue());\n                }\n\n                if (targetBlock.isShadow()) {\n                    targetBlock.setFieldValue(barriers.values[i], 'NUM');\n                }\n            }\n        }\n    },\n    // Allow only one type of barrier (i.e. either both offset or absolute barrier type)\n    applyBarrierHandlebars(barrierInputName) {\n        const newValue = this.getFieldValue(barrierInputName);\n        const otherBarrierListName =\n            barrierInputName === 'BARRIERTYPE_LIST' ? 'SECONDBARRIERTYPE_LIST' : 'BARRIERTYPE_LIST';\n        const otherBarrierList = this.getField(otherBarrierListName);\n\n        if (otherBarrierList) {\n            const otherBarrierType = otherBarrierList.getValue();\n\n            if (config.barrierTypes.findIndex(type => type[1] === newValue) !== -1 && otherBarrierType === 'absolute') {\n                const otherValue = config.barrierTypes.find(type => type[1] !== newValue);\n\n                otherBarrierList.setValue(otherValue[1]);\n            } else if (newValue === 'absolute' && otherBarrierType !== 'absolute') {\n                otherBarrierList.setValue('absolute');\n            }\n        }\n    },\n    // Rebuild block from XML\n    domToMutation(xmlElement) {\n        const hasFirstBarrier = xmlElement.getAttribute('has_first_barrier') === 'true';\n        const hasSecondBarrier = xmlElement.getAttribute('has_second_barrier') === 'true';\n        const hasPrediction = xmlElement.getAttribute('has_prediction') === 'true';\n\n        if (hasFirstBarrier && hasSecondBarrier) {\n            this.createBarrierInput({ values: [1, 2] });\n        } else if (hasFirstBarrier) {\n            this.createBarrierInput({ values: [1] });\n        } else if (hasPrediction) {\n            this.createPredictionInput([1]);\n        }\n    },\n    // Export mutations to XML\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        container.setAttribute('has_first_barrier', !!this.getInput('BARRIER'));\n        container.setAttribute('has_second_barrier', !!this.getInput('SECONDBARRIER'));\n        container.setAttribute('has_prediction', !!this.getInput('PREDICTION'));\n        return container;\n    },\n    enforceParent: Blockly.Blocks.trade_definition_market.enforceParent,\n};\n\nBlockly.JavaScript.trade_definition_tradeoptions = block => {\n    const durationValue = Blockly.JavaScript.valueToCode(block, 'DURATION') || '0';\n    const durationType = block.getFieldValue('DURATIONTYPE_LIST') || '0';\n    const currency = block.getFieldValue('CURRENCY_LIST');\n    const amount = Blockly.JavaScript.valueToCode(block, 'AMOUNT') || '0';\n\n    let predictionValue = 'undefined';\n\n    if (block.getInput('PREDICTION')) {\n        predictionValue = Blockly.JavaScript.valueToCode(block, 'PREDICTION') || '-1';\n    }\n\n    const getBarrierValue = (barrierOffsetType, value) => {\n        // Variables should not be encapsulated in quotes\n        if (/^(\\d+(\\.\\d+)?)$/.test(value)) {\n            return barrierOffsetType === 'absolute' ? `'${value}'` : `'${barrierOffsetType}${value}'`;\n        }\n        return barrierOffsetType === 'absolute' ? value : `'${barrierOffsetType}' + ${value}`;\n    };\n\n    let barrierOffsetValue = 'undefined';\n    let secondBarrierOffsetValue = 'undefined';\n\n    if (block.getInput('BARRIER')) {\n        const barrierOffsetType = block.getFieldValue('BARRIERTYPE_LIST');\n        const value = Blockly.JavaScript.valueToCode(block, 'BARRIER') || '0';\n        barrierOffsetValue = getBarrierValue(barrierOffsetType, value);\n    }\n\n    if (block.getInput('SECONDBARRIER')) {\n        const barrierOffsetType = block.getFieldValue('SECONDBARRIERTYPE_LIST');\n        const value = Blockly.JavaScript.valueToCode(block, 'SECONDBARRIER') || '0';\n        secondBarrierOffsetValue = getBarrierValue(barrierOffsetType, value);\n    }\n\n    const code = `\n        Bot.start({\n        limitations: BinaryBotPrivateLimitations,\n        duration: ${durationValue},\n        duration_unit: '${durationType}',\n        currency: '${currency}',\n        amount: ${amount},\n        prediction: ${predictionValue},\n        barrierOffset: ${barrierOffsetValue},\n        secondBarrierOffset: ${secondBarrierOffsetValue},\n        });\n    `;\n    return code;\n};\n","import {\n    fieldGeneratorMapping,\n    pollForContracts,\n    getPredictionForContracts,\n    getBarriersForContracts,\n    getDurationsForContracts,\n}                    from '../../../shared';\nimport config        from '../../../../constants/const';\nimport { translate } from '../../../../utils/lang/i18n';\n\nBlockly.Blocks.trade_definition_tradetype = {\n    init() {\n        this.jsonInit({\n            message0: translate('Trade Category: %1 Trade Type: %2'),\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'TRADETYPECAT_LIST',\n                    options: [['', '']],\n                },\n                {\n                    type   : 'field_dropdown',\n                    name   : 'TRADETYPE_LIST',\n                    options: [['', '']],\n                },\n            ],\n            colour           : Blockly.Colours.BinaryLessPurple.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.BinaryLessPurple.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n        });\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange(event) {\n        const allowedEvents = [Blockly.Events.BLOCK_CREATE, Blockly.Events.BLOCK_CHANGE, Blockly.Events.END_DRAG];\n        if (!this.workspace || this.isInFlyout || !allowedEvents.includes(event.type) || this.workspace.isDragging()) {\n            return;\n        }\n\n        const topParentBlock = this.getTopParent();\n        if (!topParentBlock || topParentBlock.type !== 'trade_definition') {\n            this.enforceParent();\n            return;\n        }\n        const marketBlock = topParentBlock.getChildByType('trade_definition_market');\n        if (!marketBlock) {\n            return;\n        }\n        const symbol = marketBlock.getFieldValue('SYMBOL_LIST');\n        if (!symbol) {\n            return;\n        }\n\n        const updateTradeTypeCatList = (useDefault = false) => {\n            const tradeTypeCatList = this.getField('TRADETYPECAT_LIST');\n            const tradeTypeCatArgs = [fieldGeneratorMapping.TRADETYPECAT_LIST(marketBlock)()];\n            if (useDefault) {\n                tradeTypeCatArgs.push(tradeTypeCatList.getValue());\n            }\n            tradeTypeCatList.updateOptions(...tradeTypeCatArgs);\n        };\n\n        const updateTradeTypeList = (useDefault = false) => {\n            const tradeTypeList = this.getField('TRADETYPE_LIST');\n            const tradeTypeArgs = [fieldGeneratorMapping.TRADETYPE_LIST(this)()];\n            if (useDefault) {\n                tradeTypeArgs.push(tradeTypeList.getValue());\n            }\n            tradeTypeList.updateOptions(...tradeTypeArgs);\n        };\n\n        if (event.type === Blockly.Events.BLOCK_CHANGE) {\n            if (event.name === 'MARKET_LIST' || event.name === 'SUBMARKET_LIST' || event.name === 'SYMBOL_LIST') {\n                updateTradeTypeCatList();\n            } else if (event.name === 'TRADETYPECAT_LIST') {\n                updateTradeTypeList();\n            } else if (event.name === 'TRADETYPE_LIST') {\n                pollForContracts(symbol).then(contracts => {\n                    this.updatePredictionInputs(contracts);\n                    this.updateBarrierInputs(contracts);\n                    this.updateDurationInputs(contracts);\n                });\n            }\n        } else if (event.type === Blockly.Events.BLOCK_CREATE) {\n            if (event.ids.includes(this.id)) {\n                updateTradeTypeCatList(true);\n                updateTradeTypeList(true);\n                pollForContracts(symbol).then(contracts => {\n                    this.updateDurationInputs(contracts);\n                });\n            }\n        }\n    },\n    updateBarrierInputs(contracts) {\n        const topParentBlock = this.getTopParent();\n        this.workspace\n            .getAllBlocks()\n            .filter(block => block.type === 'trade_definition_tradeoptions')\n            .forEach(tradeOptionsBlock => {\n                const barrierOffsetNames = ['BARRIER', 'SECONDBARRIER'];\n                const barrierLabels = [translate('High barrier'), translate('Low barrier')];\n\n                const tradeType = topParentBlock.getChildFieldValue('trade_definition_tradetype', 'TRADETYPE_LIST');\n                const durationUnit = tradeOptionsBlock.getFieldValue('DURATIONTYPE_LIST');\n\n                const firstBarrierType =\n                    tradeOptionsBlock.getFieldValue('BARRIERTYPE_LIST') || config.barrierTypes[0][1];\n                const secondBarrierType =\n                    tradeOptionsBlock.getFieldValue('SECONDBARRIERTYPE_LIST') || config.barrierTypes[1][1];\n                const selectedBarrierTypes = [firstBarrierType, secondBarrierType];\n                const barriers = getBarriersForContracts(contracts, tradeType, durationUnit, selectedBarrierTypes);\n\n                if (barriers.values.length === 0) {\n                    tradeOptionsBlock.removeInput('BARRIER', true);\n                    tradeOptionsBlock.removeInput('SECONDBARRIER', true);\n                } else {\n                    Blockly.Events.disable();\n\n                    const firstBarrierInput = tradeOptionsBlock.getInput('BARRIER');\n                    const secondBarrierInput = tradeOptionsBlock.getInput('SECONDBARRIER');\n\n                    if (barriers.values.length > 0) {\n                        if (!firstBarrierInput) {\n                            tradeOptionsBlock.createBarrierInput(barriers);\n                        }\n\n                        if (barriers.values.length === 1 && secondBarrierInput) {\n                            tradeOptionsBlock.removeInput('SECONDBARRIER');\n                        } else if (barriers.values.length === 2 && !secondBarrierInput) {\n                            tradeOptionsBlock.createBarrierInput(barriers, 1);\n                            // Ensure barrier inputs are displayed together\n                            tradeOptionsBlock.moveInputBefore('BARRIER', 'SECONDBARRIER');\n                        }\n\n                        barriers.values.forEach((barrierValue, index) => {\n                            const typeList = tradeOptionsBlock.getField(`${barrierOffsetNames[index]}TYPE_LIST`);\n                            const typeInput = tradeOptionsBlock.getInput(barrierOffsetNames[index]);\n                            const absoluteType = [[translate('Absolute'), 'absolute']];\n\n                            if (durationUnit === 'd') {\n                                typeList.updateOptions(absoluteType);\n                            } else if (barriers.allowBothTypes || barriers.allowAbsoluteType) {\n                                typeList.updateOptions([...config.barrierTypes, ...absoluteType]);\n                            } else {\n                                typeList.updateOptions(config.barrierTypes);\n                            }\n\n                            if (barriers.values.length === 1) {\n                                typeInput.fieldRow[0].setText(`${translate('Barrier')}:`);\n                            } else {\n                                typeInput.fieldRow[0].setText(`${barrierLabels[index]}:`);\n                            }\n                        });\n\n                        // Updates Shadow Block values\n                        const barrierInputArgs = [\n                            contracts,\n                            tradeType,\n                            tradeOptionsBlock.getFieldValue('DURATIONTYPE_LIST'),\n                        ];\n                        tradeOptionsBlock.updateBarrierInputs(...barrierInputArgs);\n                    }\n\n                    tradeOptionsBlock.initSvg();\n                    tradeOptionsBlock.render();\n\n                    Blockly.Events.enable();\n                }\n            });\n    },\n    updatePredictionInputs(contracts) {\n        const topParentBlock = this.getTopParent();\n        const tradeType = topParentBlock.getChildFieldValue('trade_definition_tradetype', 'TRADETYPE_LIST');\n        const predictionRange = getPredictionForContracts(contracts, tradeType);\n\n        this.workspace\n            .getAllBlocks()\n            .filter(block => block.type === 'trade_definition_tradeoptions')\n            .forEach(tradeOptionsBlock => {\n                if (predictionRange.length === 0) {\n                    tradeOptionsBlock.removeInput('PREDICTION_LABEL');\n                    tradeOptionsBlock.removeInput('PREDICTION');\n                } else {\n                    const predictionInput = tradeOptionsBlock.getInput('PREDICTION');\n                    if (predictionInput) {\n                        // TODO: Set new suggested value from API, i.e. first value in prediction range\n                    } else {\n                        tradeOptionsBlock.createPredictionInput(predictionRange);\n                    }\n                }\n                tradeOptionsBlock.initSvg();\n                tradeOptionsBlock.render(true);\n            });\n    },\n    updateDurationInputs(contracts) {\n        const topParentBlock = this.getTopParent();\n        const tradeType = topParentBlock.getChildFieldValue('trade_definition_tradetype', 'TRADETYPE_LIST');\n        const durations = getDurationsForContracts(contracts, tradeType);\n\n        this.workspace\n            .getAllBlocks()\n            .filter(block => block.type === 'trade_definition_tradeoptions')\n            .forEach(tradeOptionsBlock => {\n                const durationUnits = durations.map(duration => [duration.label, duration.unit]);\n                const durationList = tradeOptionsBlock.getField('DURATIONTYPE_LIST');\n                durationList.updateOptions(durationUnits);\n\n                const minDuration = durations.find(duration => duration.unit === durationList.getValue());\n                if (minDuration) {\n                    tradeOptionsBlock.updateDurationInput(durations, minDuration.minimum);\n                }\n            });\n    },\n    enforceParent: Blockly.Blocks.trade_definition_market.enforceParent,\n};\nBlockly.JavaScript.trade_definition_tradetype = () => '';\n","import {\n    plusIconDark,\n    minusIconDark,\n}                    from '../images';\nimport { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.controls_if = {\n    init() {\n        this.elseIfCount = 0;\n        this.elseCount = 0;\n\n        this.jsonInit(this.definition());\n\n        const addInputIcon = this.getAddInputIcon();\n        this.appendDummyInput('MUTATOR').appendField(addInputIcon);\n    },\n    definition(){\n        return {\n            message0: translate('if %1 then'),\n            message1: '%1',\n            args0   : [\n                {\n                    type : 'input_value',\n                    name : 'IF0',\n                    check: 'Boolean',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'DO0',\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            // category         : Blockly.Categories.control,\n            previousStatement: null,\n            nextStatement    : null,\n            tooltip          : translate('If else statement tooltip'),\n            category         : Blockly.Categories.Logic,\n        };\n    },\n    meta(){\n        return {\n            'display_name': 'If else statement',\n            'description' : 'If else statement description',\n        };\n    },\n    /**\n     * Create XML to represent the number of else-if and else inputs.\n     * @return {Element} XML storage element.\n     * @this Blockly.Block\n     */\n    mutationToDom() {\n        if (!this.elseIfCount && !this.elseCount) {\n            return null;\n        }\n\n        const container = document.createElement('mutation');\n\n        if (this.elseIfCount) {\n            container.setAttribute('elseif', this.elseIfCount);\n        }\n\n        if (this.elseCount) {\n            container.setAttribute('else', 1);\n        }\n\n        return container;\n    },\n    /**\n     * Parse XML to restore the else-if and else inputs.\n     * @param {!Element} xmlElement XML storage element.\n     * @this Blockly.Block\n     */\n    domToMutation(xmlElement) {\n        this.elseIfCount = parseInt(xmlElement.getAttribute('elseif')) || 0;\n        this.elseCount = parseInt(xmlElement.getAttribute('else')) || 0;\n\n        this.updateShape();\n    },\n    updateShape() {\n        // Delete everything.\n        if (this.getInput('ELSE')) {\n            this.removeInput('ELSE');\n        }\n\n        let i = 1;\n        while (this.getInput(`IF${i}`)) {\n            this.removeInput(`IF${i}`);\n            this.removeInput(`DO${i}`);\n\n            i++;\n        }\n\n        if (this.getInput('MUTATOR')) {\n            this.removeInput('MUTATOR');\n        }\n\n        // Rebuild block\n        for (let j = 1; j <= this.elseIfCount; j++) {\n            this.appendDummyInput(`IF_LABEL${j}`).appendField(translate('else if'));\n            this.appendValueInput(`IF${j}`).setCheck('Boolean');\n            this.appendDummyInput(`THEN_LABEL${j}`).appendField(translate('then'));\n            this.appendDummyInput(`DELETE_ICON${j}`).appendField(this.getRemoveInputIcon(j, false));\n            this.appendStatementInput(`DO${j}`);\n        }\n\n        if (this.elseCount) {\n            this.appendDummyInput('ELSE_LABEL').appendField(translate('else'));\n            this.appendDummyInput('DELETE_ELSE').appendField(this.getRemoveInputIcon(this.elseIfCount + 1, true));\n            this.appendStatementInput('ELSE');\n        }\n\n        this.appendDummyInput('MUTATOR').appendField(this.getAddInputIcon());\n\n        this.initSvg();\n        this.render();\n    },\n    getAddInputIcon() {\n        const onAddClick = () => {\n            if (!this.workspace || this.isInFlyout) {\n                return;\n            }\n\n            const newInputNum = this.elseIfCount + 1;\n\n            if (this.elseCount === 0) {\n                // No `elseif`, just add an `else`-statement\n                this.appendDummyInput('ELSE_LABEL').appendField(translate('else'));\n                this.appendDummyInput('DELETE_ELSE').appendField(this.getRemoveInputIcon(newInputNum, true));\n                this.appendStatementInput('ELSE');\n\n                this.elseCount++;\n            } else {\n                // We've already got `elseif` + `else`, keep adding more `elseif`'s\n                this.appendDummyInput(`IF_LABEL${newInputNum}`).appendField(translate('else if'));\n                this.appendValueInput(`IF${newInputNum}`).setCheck('Boolean');\n                this.appendDummyInput(`THEN_LABEL${newInputNum}`).appendField(translate('then'));\n                this.appendDummyInput(`DELETE_ICON${newInputNum}`).appendField(\n                    this.getRemoveInputIcon(newInputNum, false)\n                );\n                this.appendStatementInput(`DO${newInputNum}`);\n\n                this.elseIfCount++;\n            }\n\n            // We already have an else, this input needs to be moved to the bottom where it belongs.\n            if (this.getInput('ELSE')) {\n                this.moveInputBefore('ELSE_LABEL', null);\n                this.moveInputBefore('DELETE_ELSE', null);\n                this.moveInputBefore('ELSE', null);\n            }\n\n            // Move plus-icon to the bottom\n            this.moveInputBefore('MUTATOR', null);\n\n            this.initSvg();\n            this.render();\n        };\n\n        const fieldImage = new Blockly.FieldImage(plusIconDark, 24, 24, '+', onAddClick);\n        return fieldImage;\n    },\n    getRemoveInputIcon(index, isElseStack) {\n        const onRemoveClick = () => {\n            if (!this.workspace || this.isInFlyout) {\n                return;\n            }\n\n            if (isElseStack) {\n                this.removeInput('ELSE_LABEL');\n                this.removeInput('DELETE_ELSE');\n                this.removeInput('ELSE');\n                this.elseCount = 0;\n            } else {\n                // Determine which label it is, has to be done inside this function.\n                const inputNames = ['IF_LABEL', 'IF', 'THEN_LABEL', 'DELETE_ICON', 'DO'];\n\n                inputNames.forEach(inputName => {\n                    this.removeInput(`${inputName}${index}`);\n\n                    // Re-number inputs w/ indexes larger than this one, e.g. when removing `IF5` becomes `IF4`\n                    let i = 1;\n                    let j = 0;\n\n                    // e.g. we've removed `IF5`, name of larger input `IF6` should become `IF5`\n                    let largerInput = this.getInput(inputName + (index + i));\n\n                    while (largerInput) {\n                        const newIndex = index + j;\n                        largerInput.name = inputName + newIndex;\n\n                        // Re-attach click handler with correct index.\n                        if (inputName === 'DELETE_ICON') {\n                            for (let k = 0; k < largerInput.fieldRow.length; k++) {\n                                const field = largerInput.fieldRow[k];\n                                field.dispose();\n                                largerInput.fieldRow.splice(k, 1);\n                            }\n\n                            largerInput.appendField(this.getRemoveInputIcon(newIndex, false));\n                        }\n\n                        i++;\n                        j++;\n\n                        largerInput = this.getInput(inputName + (index + i));\n                    }\n                });\n\n                this.elseIfCount--;\n            }\n        };\n\n        const fieldImage = new Blockly.FieldImage(minusIconDark, 24, 24, '-', onRemoveClick);\n        return fieldImage;\n    },\n};\n\nBlockly.JavaScript.controls_if = block => {\n    // If/elseif/else condition.\n    let n = 0;\n    let code = '';\n\n    do {\n        const condition = Blockly.JavaScript.valueToCode(block, `IF${n}`, Blockly.JavaScript.ORDER_NONE) || 'false';\n\n        // i.e. (else)? if { // code }\n        const keyword = n > 0 ? 'else if' : 'if';\n        code += `\n        ${keyword} (${condition}) {\n            ${Blockly.JavaScript.statementToCode(block, `DO${n}`)}\n        }`;\n        n++;\n    } while (block.getInput(`IF${n}`));\n\n    if (block.getInput('ELSE')) {\n        code += `\n        else {\n            ${Blockly.JavaScript.statementToCode(block, 'ELSE')}\n        }`;\n    }\n\n    return `${code}\\n`;\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.logic_boolean = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: '%1',\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'BOOL',\n                    options: [[translate('true'), 'TRUE'], [translate('false'), 'FALSE']],\n                },\n            ],\n            output         : 'Boolean',\n            outputShape    : Blockly.OUTPUT_SHAPE_HEXAGONAL,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Logic Boolean Tooltip'),\n            category       : Blockly.Categories.Logic,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Logic Boolean'),\n            'description' : translate('Logic Boolean Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.logic_boolean = block => {\n    const code = block.getFieldValue('BOOL') === 'TRUE' ? 'true' : 'false';\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.logic_compare = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: '%1 %2 %3',\n            args0   : [\n                {\n                    type: 'input_value',\n                    name: 'A',\n                },\n                {\n                    type   : 'field_dropdown',\n                    name   : 'OP',\n                    options: [\n                        ['=', 'EQ'],\n                        ['\\u2260', 'NEQ'],\n                        ['\\u200F<', 'LT'],\n                        ['\\u200F\\u2264', 'LTE'],\n                        ['\\u200F>', 'GT'],\n                        ['\\u200F\\u2265', 'GTE'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'B',\n                },\n            ],\n            output         : 'Boolean',\n            outputShape    : Blockly.OUTPUT_SHAPE_HEXAGONAL,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Logic Compare Tooltip'),\n            category       : Blockly.Categories.Logic,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Logic Compare'),\n            'description' : translate('Logic Compare Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.logic_compare = block => {\n    const operatorMapping = {\n        EQ : '==',\n        NEQ: '!=',\n        LT : '<',\n        LTE: '<=',\n        GT : '>',\n        GTE: '>=',\n    };\n\n    const operator = operatorMapping[block.getFieldValue('OP') || 'EQ'];\n    const order = ['==', '!='].includes(operator)\n        ? Blockly.JavaScript.ORDER_EQUALITY\n        : Blockly.JavaScript.ORDER_RELATIONAL;\n\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'A', order);\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'B', order);\n\n    const code = `${argument0} ${operator} ${argument1}`;\n    return [code, order];\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.logic_negate = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('not %1'),\n            args0   : [\n                {\n                    type: 'input_value',\n                    name: 'BOOL',\n                },\n            ],\n            output         : 'Boolean',\n            outputShape    : Blockly.OUTPUT_SHAPE_HEXAGONAL,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Logic Negate Tooltip'),\n            category       : Blockly.Categories.Logic,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Logic Negate'),\n            'description' : translate('Logic Negate Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.logic_negate = block => {\n    const order = Blockly.JavaScript.ORDER_LOGICAL_NOT;\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'BOOL', order) || 'true';\n\n    const code = `!${argument0}`;\n    return [code, order];\n};\n","import { translate } from '../../../utils/tools';\n\nBlockly.Blocks.logic_null = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0       : 'null',\n            output         : null,\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Logic Null Tooltip'),\n            category       : Blockly.Categories.Logic,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Logic Null'),\n            'description' : translate('Logic Null Description'),\n        };\n    },\n};\nBlockly.JavaScript.logic_null = () => ['null', Blockly.JavaScript.ORDER_ATOMIC];\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.logic_operation = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: '%1 %2 %3',\n            args0   : [\n                {\n                    type: 'input_value',\n                    name: 'A',\n                },\n                {\n                    type   : 'field_dropdown',\n                    name   : 'OP',\n                    options: [[translate('and'), 'AND'], [translate('or'), 'OR']],\n                },\n                {\n                    type: 'input_value',\n                    name: 'B',\n                },\n            ],\n            output         : 'Boolean',\n            outputShape    : Blockly.OUTPUT_SHAPE_HEXAGONAL,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Logic Operator Tooltip'),\n            category       : Blockly.Categories.Logic,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Logic Operator'),\n            'description' : translate('Logic Operator Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.logic_operation = block => {\n    const selectedOperator = block.getFieldValue('OP');\n\n    let operator,\n        order;\n\n    if (selectedOperator === 'AND') {\n        operator = '&&';\n        order = Blockly.JavaScript.ORDER_LOGICAL_AND;\n    } else if (selectedOperator === 'OR') {\n        operator = '||';\n        order = Blockly.JavaScript.ORDER_LOGICAL_OR;\n    }\n\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'A');\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'B');\n\n    const code = `${argument0} ${operator} ${argument1}`;\n    return [code, order];\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.logic_ternary = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('test %1'),\n            message1: translate('if true %1'),\n            message2: translate('if false %1'),\n            args0   : [\n                {\n                    type : 'input_value',\n                    name : 'IF',\n                    check: 'Boolean',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_value',\n                    name: 'THEN',\n                },\n            ],\n            args2: [\n                {\n                    type: 'input_value',\n                    name: 'ELSE',\n                },\n            ],\n            output         : null,\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Logic Ternary Tooltip'),\n            category       : Blockly.Categories.Logic,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Logic Ternary'),\n            'description' : translate('Logic Ternary Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.logic_ternary = block => {\n    const valueIf = Blockly.JavaScript.valueToCode(block, 'IF', Blockly.JavaScript.ORDER_CONDITIONAL) || 'false';\n    const valueThen = Blockly.JavaScript.valueToCode(block, 'THEN', Blockly.JavaScript.ORDER_CONDITIONAL) || 'null';\n    const valueElse = Blockly.JavaScript.valueToCode(block, 'ELSE', Blockly.JavaScript.ORDER_CONDITIONAL) || 'null';\n\n    const code = `${valueIf} ? ${valueThen} : ${valueElse}`;\n    return [code, Blockly.JavaScript.ORDER_CONDITIONAL];\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.math_arithmetic = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: '%1 %2 %3',\n            args0   : [\n                {\n                    type : 'input_value',\n                    name : 'A',\n                    check: 'Number',\n                },\n                {\n                    type   : 'field_dropdown',\n                    name   : 'OP',\n                    options: [['+', 'ADD'], ['-', 'MINUS'], ['*', 'MULTIPLY'], ['/', 'DIVIDE'], ['^', 'POWER']],\n                },\n                {\n                    type : 'input_value',\n                    name : 'B',\n                    check: 'Number',\n                },\n            ],\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Mathematic Arithmetic (Add, minus, mutiply, divide, power)'),\n            category       : Blockly.Categories.Mathematical,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Mathematic Arithmetic'),\n            'description' : translate('Mathematic Arithmetic Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.math_arithmetic = block => {\n    const operators = {\n        ADD     : ['+', Blockly.JavaScript.ORDER_ADDITION],\n        MINUS   : ['-', Blockly.JavaScript.ORDER_SUBTRACTION],\n        MULTIPLY: ['*', Blockly.JavaScript.ORDER_MULTIPLICATION],\n        DIVIDE  : ['/', Blockly.JavaScript.ORDER_DIVISION],\n        POWER   : [null, Blockly.JavaScript.ORDER_COMMA], // Handle power separately.\n    };\n\n    const tuple = operators[block.getFieldValue('OP')];\n    const operator = tuple[0];\n    const order = tuple[1];\n\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'A', order) || '0';\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'B', order) || '0';\n\n    let code;\n\n    // Power in JavaScript requires a special case since it has no operator.\n    if (!operator) {\n        code = `Math.pow(${argument0}, ${argument1})`;\n        return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n    }\n\n    code = `${argument0} ${operator} ${argument1}`;\n    return [code, order];\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.math_change = {\n    /**\n    * Initializes the block, in most cases this calls the jsonInit function, in some\n    * cases it may add extra properties to the block object.\n    * https://developers.google.com/blockly/reference/js/Blockly.Block#jsonInit\n    */\n    init() {\n        this.jsonInit(this.definition());\n    },\n    /**\n     * Block definitions describe how a block looks and behaves, including the text,\n     * the colour, the shape, and what other blocks it can connect to. We've separated\n     * the block definition from the init function so we can search through it.\n     * https://developers.google.com/blockly/guides/create-custom-blocks/define-blocks\n     */\n    definition() {\n        return {\n            message0: translate('change %1 by %2'),\n            args0   : [\n                {\n                    type    : 'field_variable',\n                    name    : 'VAR',\n                    variable: translate('item'),\n                },\n                {\n                    type : 'input_value',\n                    name : 'DELTA',\n                    check: 'Number',\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n            tooltip          : translate('Change Number variable'),\n            category         : Blockly.Categories.Mathematical,\n        };\n    },\n    /**\n     * Meta returns an object with with properties that contain human readable strings,\n     * these strings are used in the flyout help content, as well as used for searching\n     * for specific blocks.\n     */\n    meta() {\n        return {\n            'display_name': translate('Change Math'),\n            'description' : translate('Change Number Type Variable'),\n        };\n    },\n};\n\nBlockly.JavaScript.math_change = block => {\n    const variable = block.getFieldValue('VAR');\n    // eslint-disable-next-line no-underscore-dangle\n    const argument0 = Blockly.JavaScript.variableDB_.getName(variable, Blockly.Variables.NAME_TYPE);\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'DELTA', Blockly.JavaScript.ORDER_ADDITION) || '0';\n\n    const code = `\n    if (typeof ${argument0} != 'number') {\n        ${argument0} = 0;\n    };\n    ${argument0} += ${argument1};\\n`;\n    return code;\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.math_constant = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: '%1',\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'CONSTANT',\n                    options: [\n                        ['\\u03C0', 'PI'],\n                        ['\\u2107', 'E'],\n                        ['\\u03d5', 'GOLDEN_RATIO'],\n                        ['sqrt(2)', 'SQRT2'],\n                        ['sqrt(\\u00bd)', 'SQRT1_2'],\n                        ['\\u221e', 'INFINITY'],\n                    ],\n                },\n            ],\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Math Constant Tooltip'),\n            category       : Blockly.Categories.Mathematical,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Math Constant'),\n            'description' : translate('Math Constant Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.math_constant = block => {\n    const constant = block.getFieldValue('CONSTANT');\n\n    let code,\n        order;\n\n    if (constant === 'PI') {\n        code = 'Math.PI';\n        order = Blockly.JavaScript.ORDER_MEMBER;\n    } else if (constant === 'E') {\n        code = 'Math.E';\n        order = Blockly.JavaScript.ORDER_MEMBER;\n    } else if (constant === 'GOLDEN_RATIO') {\n        code = '(1 + Math.sqrt(5)) / 2';\n        order = Blockly.JavaScript.ORDER_DIVISION;\n    } else if (constant === 'SQRT2') {\n        code = 'Math.SQRT2';\n        order = Blockly.JavaScript.ORDER_MEMBER;\n    } else if (constant === 'SQRT1_2') {\n        code = 'Math.SQRT1_2';\n        order = Blockly.JavaScript.ORDER_MEMBER;\n    } else if (constant === 'INFINITY') {\n        code = 'Infinity';\n        order = Blockly.JavaScript.ORDER_ATOMIC;\n    }\n\n    return [code, order];\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.math_constrain = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('constrain %1 low %2 high %3'),\n            args0   : [\n                {\n                    type : 'input_value',\n                    name : 'VALUE',\n                    check: 'Number',\n                },\n                {\n                    type : 'input_value',\n                    name : 'LOW',\n                    check: 'Number',\n                },\n                {\n                    type : 'input_value',\n                    name : 'HIGH',\n                    check: 'Number',\n                },\n            ],\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Math Constrain Tooltip'),\n            category       : Blockly.Categories.Mathematical,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Math Constrain'),\n            'description' : translate('Math Constrain Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.math_constrain = block => {\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_COMMA) || '0';\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'LOW', Blockly.JavaScript.ORDER_COMMA) || '0';\n    const argument2 = Blockly.JavaScript.valueToCode(block, 'HIGH', Blockly.JavaScript.ORDER_COMMA) || '0';\n\n    const code = `Math.min(Math.max(${argument0}, ${argument1}), ${argument2})`;\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.math_modulo = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('remainder of %1  %2'),\n            args0   : [\n                {\n                    type : 'input_value',\n                    name : 'DIVIDEND',\n                    check: 'Number',\n                },\n                {\n                    type : 'input_value',\n                    name : 'DIVISOR',\n                    check: 'Number',\n                },\n            ],\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Math Modulo Tooltip'),\n            category       : Blockly.Categories.Mathematical,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Math Modulo'),\n            'description' : translate('Math Modulo Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.math_modulo = block => {\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'DIVIDEND', Blockly.JavaScript.ORDER_MODULUS) || '0';\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'DIVISOR', Blockly.JavaScript.ORDER_MODULUS) || '0';\n\n    const code = `${argument0} % ${argument1}`;\n    return [code, Blockly.JavaScript.ORDER_MODULUS];\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.math_number = {\n    init() {\n        this.jsonInit(this.definition());\n\n        const fieldInput = this.getField('NUM');\n        fieldInput.setValidator(input => this.numberValidator(input));\n    },\n    definition(){\n        return {\n            message0: '%1',\n            args0   : [\n                {\n                    type : 'field_number',\n                    name : 'NUM',\n                    value: 0,\n                },\n            ],\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : '#dedede',\n            colourSecondary: '#ffffff',\n            colourTertiary : '#ffffff',\n            tooltip        : translate('Math Number Tooltip'),\n            category       : Blockly.Categories.Mathematical,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Math Number'),\n            'description' : translate('Math Number Decscription'),\n        };\n    },\n    numberValidator(input) {\n        if (/^-?([0][,.]|[1-9]+[,.])?([0]|[1-9])*$/.test(input)) {\n            return undefined;\n        }\n        return null;\n    },\n};\n\nBlockly.JavaScript.math_number = block => {\n    const code = block.getFieldValue('NUM');\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.math_number_positive = {\n    init      : Blockly.Blocks.math_number.init,\n    definition: Blockly.Blocks.math_number.definition,\n    meta() {\n        return {\n            'display_name': translate('Math Number Positive'),\n            'description' : translate('Math Number Description'),\n        };\n    },\n    numberValidator(input) {\n        if (/^([0][,.]|[1-9]+[,.])?([0]|[1-9])*$/.test(input)) {\n            return undefined;\n        }\n        return null;\n    },\n};\n\nBlockly.JavaScript.math_number_positive = Blockly.JavaScript.math_number;\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.math_number_property = {\n    init() {\n        this.jsonInit(this.definition());\n\n        this.setOnChange(event => {\n            if (event.name === 'PROPERTY') {\n                const hasDivisorInput = this.getFieldValue('PROPERTY') === 'DIVISIBLE_BY';\n                this.updateShape(hasDivisorInput);\n            }\n        });\n    },\n    definition(){\n        return {\n            message0: translate('%1 is %2'),\n            args0   : [\n                {\n                    type: 'input_value',\n                    name: 'NUMBER_TO_CHECK',\n                },\n                {\n                    type   : 'field_dropdown',\n                    name   : 'PROPERTY',\n                    options: [\n                        [translate('even'), 'EVEN'],\n                        [translate('odd'), 'ODD'],\n                        [translate('prime'), 'PRIME'],\n                        [translate('whole'), 'WHOLE'],\n                        [translate('positive'), 'POSITIVE'],\n                        [translate('negative'), 'NEGATIVE'],\n                        [translate('divisible by'), 'DIVISIBLE_BY'],\n                    ],\n                },\n            ],\n            output         : 'Boolean',\n            outputShape    : Blockly.OUTPUT_SHAPE_HEXAGONAL,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            toolip         : translate('Math Number Tooltip'),\n            category       : Blockly.Categories.Mathematical,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Math Number'),\n            'description' : translate('Math Number Description'),\n        };\n    },\n    domToMutation(xmlElement) {\n        const hasDivisorInput = xmlElement.getAttribute('divisor_input') === 'true';\n        this.updateShape(hasDivisorInput);\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        const divisorInput = this.getFieldValue('PROPERTY') === 'DIVISIBLE_BY';\n        container.setAttribute('divisor_input', divisorInput);\n        return container;\n    },\n    updateShape(hasDivisorInput) {\n        const inputExists = this.getInput('DIVISOR');\n\n        if (hasDivisorInput) {\n            if (!inputExists) {\n                this.appendValueInput('DIVISOR').setCheck('Number');\n                this.initSvg();\n                this.render(false);\n            }\n        } else {\n            this.removeInput('DIVISOR');\n        }\n    },\n};\n\nBlockly.JavaScript.math_number_property = block => {\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'NUMBER_TO_CHECK', Blockly.JavaScript.ORDER_MODULUS) || '0';\n    const property = block.getFieldValue('PROPERTY');\n\n    let code;\n\n    if (property === 'PRIME') {\n        // eslint-disable-next-line no-underscore-dangle\n        const functionName = Blockly.JavaScript.provideFunction_('mathIsPrime', [\n            // eslint-disable-next-line no-underscore-dangle\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(n) {\n                // https://en.wikipedia.org/wiki/Primality_test#Naive_methods\n                if (n == 2 || n == 3) {\n                    return true;\n                }\n\n                // False if n is NaN, negative, is 1, or not whole.\n                // And false if n is divisible by 2 or 3.\n                if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {\n                    return false;\n                }\n\n                // Check all the numbers of form 6k +/- 1, up to sqrt(n).\n                for (var x  = 6; x <= Math.sqrt(n) + 1; x += 6) {\n                    if (n % (x - 1) == 0 || n % (x + 1) == 0) {\n                        return false;\n                    }\n                }\n                return true;\n            }`,\n        ]);\n        code = `${functionName}(${argument0})`;\n        return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n    } else if (property === 'EVEN') {\n        code = `${argument0} % 2 === 0`;\n    } else if (property === 'ODD') {\n        code = `${argument0} % 2 === 1`;\n    } else if (property === 'WHOLE') {\n        code = `${argument0} % 1 === 0`;\n    } else if (property === 'POSITIVE') {\n        code = `${argument0} > 0`;\n    } else if (property === 'NEGATIVE') {\n        code = `${argument0} < 0`;\n    } else if (property === 'DIVISIBLE_BY') {\n        const divisor = Blockly.JavaScript.valueToCode(block, 'DIVISOR', Blockly.JavaScript.ORDER_MODULUS) || '0';\n        code = `${argument0} % ${divisor} == 0`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_EQUALITY];\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.math_on_list = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('%1 of list %2'),\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'OPERATION',\n                    options: [\n                        [translate('sum'), 'SUM'],\n                        [translate('min'), 'MIN'],\n                        [translate('max'), 'MAX'],\n                        [translate('average'), 'AVERAGE'],\n                        [translate('median'), 'MEDIAN'],\n                        [translate('modes'), 'MODE'],\n                        [translate('standard deviation'), 'STD_DEV'],\n                        [translate('random item'), 'RANDOM'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'LIST',\n                },\n            ],\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Math On List'),\n            category       : Blockly.Categories.Mathematical,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Math On List'),\n            'description' : translate('Math On List Description'),\n        };\n    },\n};\n\n/* eslint-disable no-underscore-dangle */\nBlockly.JavaScript.math_on_list = block => {\n    const operation = block.getFieldValue('OPERATION');\n\n    let code,\n        list;\n\n    if (operation === 'SUM') {\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_MEMBER) || '[]';\n        code = `${list}.reduce(function(x, y) { return x + y; })`;\n    } else if (operation === 'MIN') {\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_COMMA) || '[]';\n        code = `Math.min.apply(null, ${list})`;\n    } else if (operation === 'MAX') {\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_COMMA) || '[]';\n        code = `Math.max.apply(null, ${list})`;\n    } else if (operation === 'AVERAGE') {\n        const functionName = Blockly.JavaScript.provideFunction_('mathMean', [\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n                return myList.reduce(function(x, y) { \n                    return x + y; \n                }) / myList.length;\n            }`,\n        ]);\n\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_NONE) || '[]';\n        code = `${functionName}(${list})`;\n    } else if (operation === 'MEDIAN') {\n        const functionName = Blockly.JavaScript.provideFunction_('mathMedian', [\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n                var localList = myList.filter(function(x) { \n                    return typeof x == 'number'; \n                });\n                if (!localList.length) {\n                    return null;\n                }\n                localList.sort(function(a, b) { \n                    return b - a; \n                });\n                if (localList.length % 2 == 0) {\n                    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;\n                } else {\n                    return localList[(localList.length - 1) / 2];\n                }\n            }`,\n        ]);\n\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_NONE) || '[]';\n        code = `${functionName}(${list})`;\n    } else if (operation === 'MODE') {\n        const functionName = Blockly.JavaScript.provideFunction_('mathModes', [\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(values) {\n                var modes = [];\n                var counts = [];\n                var maxCount = 0;\n\n                for (var i = 0; i < values.length; i++) {\n                    var value = values[i];\n                    var found = false;\n                    var thisCount;\n\n                    for (var j = 0; j < counts.length; j++) {\n                        if (counts[j][0] === value) {\n                            thisCount = ++counts[j][1];\n                            found = true;\n                            break;\n                        }\n                    }\n\n                    if (!found) {\n                        counts.push([value, 1]);\n                        thisCount = 1;\n                    }\n                    maxCount = Math.max(thisCount, maxCount);\n                }\n                \n                for (var j = 0; j < counts.length; j++) {\n                    if (counts[j][1] == maxCount) {\n                        modes.push(counts[j][0]);\n                    }\n                }\n\n                return modes;\n            }`,\n        ]);\n\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_NONE) || '[]';\n        code = `${functionName}(${list})`;\n    } else if (operation === 'STD_DEV') {\n        const functionName = Blockly.JavaScript.provideFunction_('mathStandardDeviation', [\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(numbers) {\n                var n = numbers.length;\n                if (!n) {\n                    return null;\n                }\n\n                var mean = numbers.reduce(function(x, y) {\n                    return x + y;\n                }) / n;\n\n                var variance = 0;\n                for (var j = 0; j < n; j++) {\n                    variance += Math.pow(numbers[j] - mean, 2);\n                }\n                variance = variance / n;\n                return Math.sqrt(variance);\n            }`,\n        ]);\n\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_NONE) || '[]';\n        code = `${functionName}(${list})`;\n    } else if (operation === 'RANDOM') {\n        const functionName = Blockly.JavaScript.provideFunction_('mathRandomList', [\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(list) {\n                var x = Math.floor(Math.random() * list.length);\n                return list[x];\n            }`,\n        ]);\n\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_NONE) || '[]';\n        code = `${functionName}(${list})`;\n    }\n\n    return [code, Blockly.JavaScript.FUNCTION_CALL];\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.math_random_float = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0       : translate('random fraction'),\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Math Random Float Tooltip'),\n            category       : Blockly.Categories.Mathematical,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Math Random Float'),\n            'description' : translate('Math Random Float Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.math_random_float = () => ['Math.random()', Blockly.JavaScript.ORDER_FUNCTION_CALL];\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.math_random_int = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('random integer from %1 to %2'),\n            args0   : [\n                {\n                    type : 'input_value',\n                    name : 'FROM',\n                    check: 'Number',\n                },\n                {\n                    type : 'input_value',\n                    name : 'TO',\n                    check: 'Number',\n                },\n            ],\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Math Random Integer Tooltip'),\n            category       : Blockly.Categories.Mathematical,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Math Random Integer'),\n            'description' : translate('Math Random Integer Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.math_random_int = block => {\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'FROM', Blockly.JavaScript.ORDER_COMMA) || '0';\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'TO', Blockly.JavaScript.ORDER_COMMA) || '0';\n\n    // eslint-disable-next-line no-underscore-dangle\n    const functionName = Blockly.JavaScript.provideFunction_('mathRandomInt', [\n        // eslint-disable-next-line no-underscore-dangle\n        `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(a, b) {\n            if (a > b) {\n                // Swap a and b to ensure a is smaller.\n                var c = a;\n                a = b;\n                b = c;\n            }\n            return Math.floor(Math.random() * (b - a + 1) + a);\n        }`,\n    ]);\n\n    const code = `${functionName}(${argument0}, ${argument1})`;\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { translate } from '../../../utils/lang/i18n';\n\n// https://github.com/google/blockly/blob/master/generators/javascript/math.js\nBlockly.Blocks.math_round = {\n    /**\n     * Check if a number is even, odd, prime, whole, positive, or negative\n     * or if it is divisible by certain number. Returns true or false.\n     * @this Blockly.Block\n     */\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: '%1 %2',\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'OP',\n                    options: [['round', 'ROUND'], ['round up', 'ROUNDUP'], ['round down', 'ROUNDDOWN']],\n                },\n                {\n                    type: 'input_value',\n                    name: 'NUM',\n                },\n            ],\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Math Round Tooltip'),\n            category       : Blockly.Categories.Mathematical,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Math Round'),\n            'description' : translate('Math Round Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.math_round = block => {\n    const operation = block.getFieldValue('OP');\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'NUM') || '0';\n\n    let code;\n\n    if (operation === 'ROUND') {\n        code = `Math.round(${argument0})`;\n    } else if (operation === 'ROUNDUP') {\n        code = `Math.ceil(${argument0})`;\n    } else if (operation === 'ROUNDDOWN') {\n        code = `Math.floor(${argument0})`;\n    }\n\n    return [code, Blockly.JavaScript.FUNCTION_CALL];\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.math_single = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('%1 %2'),\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'OP',\n                    options: [\n                        [translate('square root'), 'ROOT'],\n                        [translate('absolute'), 'ABS'],\n                        ['-', 'NEG'],\n                        ['ln', 'LN'],\n                        ['log10', 'LOG10'],\n                        ['e^', 'EXP'],\n                        ['10^', 'POW10'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'NUM',\n                },\n            ],\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Mathematical Single Tooltip'),\n            category       : Blockly.Categories.Mathematical,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Mathematical Single'),\n            'description' : translate('Mathematical Single Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.math_single = block => {\n    const operator = block.getFieldValue('OP');\n\n    let code,\n        arg;\n\n    if (operator === 'NEG') {\n        // Negation is a special case given its different operator precedence.\n        arg = Blockly.JavaScript.valueToCode(block, 'NUM', Blockly.JavaScript.ORDER_UNARY_NEGATION) || '0';\n        if (arg[0] === '-') {\n            // --3 is not legal in JS\n            arg = ` ${arg}`;\n        }\n        code = `-${arg}`;\n        return [code, Blockly.JavaScript.ORDER_UNARY_NEGATION];\n    }\n\n    if (['SIN', 'COS', 'TAN'].includes(operator)) {\n        arg = Blockly.JavaScript.valueToCode(block, 'NUM', Blockly.JavaScript.ORDER_DIVISION) || '0';\n    } else {\n        arg = Blockly.JavaScript.valueToCode(block, 'NUM', Blockly.JavaScript.ORDER_NONE) || '0';\n    }\n\n    // First, handle cases which generate values that don't need parentheses\n    // wrapping the code.\n    if (operator === 'ABS') {\n        code = `Math.abs(${arg})`;\n    } else if (operator === 'ROOT') {\n        code = `Math.sqrt(${arg})`;\n    } else if (operator === 'LN') {\n        code = `Math.log(${arg})`;\n    } else if (operator === 'EXP') {\n        code = `Math.pow(Math.E, ${arg})`;\n    } else if (operator === 'POW10') {\n        code = `Math.pow(10, ${arg})`;\n    } else if (operator === 'ROUND') {\n        code = `Math.round(${arg})`;\n    } else if (operator === 'ROUNDUP') {\n        code = `Math.ceil(${arg})`;\n    } else if (operator === 'ROUNDDOWN') {\n        code = `Math.floor(${arg})`;\n    } else if (operator === 'SIN') {\n        code = `Math.sin(${arg} / 180 * Math.PI)`;\n    } else if (operator === 'COS') {\n        code = `Math.cos(${arg} / 180 * Math.PI)`;\n    } else if (operator === 'TAN') {\n        code = `Math.tan(${arg} / 180 * Math.PI)`;\n    }\n\n    if (code) {\n        return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n    }\n\n    // Second, handle cases which generate values that may need parentheses\n    // wrapping the code.\n    if (operator === 'LOG10') {\n        code = `Math.log(${arg}) / Math.log(10)`;\n    } else if (operator === 'ASIN') {\n        code = `Math.asin(${arg}) / Math.PI * 180`;\n    } else if (operator === 'ACOS') {\n        code = `Math.acos(${arg}) / Math.PI * 180`;\n    } else if (operator === 'ATAN') {\n        code = `Math.atan(${arg}) / Math.PI * 180`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_DIVISION];\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.math_trig = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('%1 %2'),\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'OP',\n                    options: [\n                        ['sin', 'SIN'],\n                        ['cos', 'COS'],\n                        ['tan', 'TAN'],\n                        ['asin', 'ASIN'],\n                        ['acos', 'ACOS'],\n                        ['atan', 'ATAN'],\n                    ],\n                },\n                {\n                    type : 'input_value',\n                    name : 'NUM',\n                    check: 'Number',\n                },\n            ],\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Mathematical Trig Tooltip'),\n            category       : Blockly.Categories.Mathematical,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Mathematical Trig'),\n            'description' : translate('Mathematical Trig Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.math_trig = Blockly.JavaScript.math_single;\n","import { translate } from '../../../utils/tools';\n\nBlockly.Blocks.text = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: '%1',\n            args0   : [\n                {\n                    type: 'field_input',\n                    name: 'TEXT',\n                },\n            ],\n            output         : 'String',\n            outputShape    : Blockly.OUTPUT_SHAPE_SQUARE,\n            colour         : '#dedede',\n            colourSecondary: '#ffffff',\n            colourTertiary : '#ffffff',\n            tooltip        : translate('Text Tooltip'),\n            category       : Blockly.Categories.Text,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('text'),\n            'description' : translate('Text Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.text = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const code = Blockly.JavaScript.quote_(block.getFieldValue('TEXT'));\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.text_append = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('to %1 append text %2'),\n            args0   : [\n                {\n                    type    : 'field_variable',\n                    name    : 'VAR',\n                    variable: translate('text'),\n                },\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n            tooltip          : translate('Text Append Tooltip'),\n            category         : Blockly.Categories.Text,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Text Append'),\n            'description' : translate('Text Append Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.text_append = block => {\n    const forceString = value => {\n        const strRegExp = /^\\s*'([^']|\\\\')*'\\s*$/;\n        if (strRegExp.test(value)) {\n            return value;\n        }\n        return `String(${value})`;\n    };\n\n    // eslint-disable-next-line no-underscore-dangle\n    const varName = Blockly.JavaScript.variableDB_.getName(block.getFieldValue('VAR'), Blockly.Variables.NAME_TYPE);\n    const value = Blockly.JavaScript.valueToCode(block, 'TEXT', Blockly.JavaScript.ORDER_NONE) || '\\'\\'';\n\n    const code = `${varName} += ${forceString(value)};\\n`;\n    return code;\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.text_changeCase = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('to %1 %2'),\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'CASE',\n                    options: [\n                        [translate('UPPER CASE'), 'UPPERCASE'],\n                        [translate('lower case'), 'LOWERCASE'],\n                        [translate('Title Case'), 'TITLECASE'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n            ],\n            output         : 'String',\n            outputShape    : Blockly.OUTPUT_SHAPE_SQUARE,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Text Change Case Tooltip'),\n            category       : Blockly.Categories.Text,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Text Change Case'),\n            'description' : translate('Text Change Case Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.text_changeCase = block => {\n    const operators = {\n        UPPERCASE: '.toUpperCase()',\n        LOWERCASE: '.toLowerCase()',\n        TITLECASE: null,\n    };\n    const operator = operators[block.getFieldValue('CASE')];\n    const textOrder = operator ? Blockly.JavaScript.ORDER_MEMBER : Blockly.JavaScript.ORDER_NONE;\n    const text = Blockly.JavaScript.valueToCode(block, 'TEXT', textOrder) || '\\'\\'';\n\n    let code;\n\n    if (operator) {\n        code = `${text}${operator}`;\n    } else {\n        // eslint-disable-next-line no-underscore-dangle\n        const functionName = Blockly.JavaScript.provideFunction_('textToTitleCase', [\n            // eslint-disable-next-line no-underscore-dangle\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(str) {\n                return str.toLowerCase().split(' ').map(function(word) {\n                    return word.replace(word[0], word[0].toUpperCase());\n                }).join(' ');\n            }`,\n        ]);\n        code = `${functionName}(${text})`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.text_charAt = {\n    init() {\n        this.jsonInit(this.definition());\n\n        const dropdown = this.getField('WHERE');\n        dropdown.setValidator(value => {\n            const newAt = ['FROM_START', 'FROM_END'].includes(value);\n            if (newAt !== this.isAt) {\n                this.updateAt(newAt);\n                this.setFieldValue(value, 'WHERE');\n                return null;\n            }\n            return undefined;\n        });\n\n        this.updateAt(true);\n    },\n    definition(){\n        return {\n            message0: translate('in text %1 get %2'),\n            args0   : [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n                {\n                    type   : 'field_dropdown',\n                    name   : 'WHERE',\n                    options: [\n                        [translate('letter #'), 'FROM_START'],\n                        [translate('letter # from end'), 'FROM_END'],\n                        [translate('first letter'), 'FIRST'],\n                        [translate('last letter'), 'LAST'],\n                        [translate('random letter'), 'RANDOM'],\n                    ],\n                },\n            ],\n            output         : 'String',\n            outputShape    : Blockly.OUTPUT_SHAPE_SQUARE,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Text Char At Tooltip'),\n            category       : Blockly.Categories.Text,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Text Char At'),\n            'description' : translate('Text Char At Description'),\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        container.setAttribute('at', !!this.isAt);\n        return container;\n    },\n    domToMutation(xmlElement) {\n        const isAt = xmlElement.getAttribute('at') !== 'false';\n        this.updateAt(isAt);\n    },\n    updateAt(isAt) {\n        this.removeInput('AT', true);\n        if (isAt) {\n            this.appendValueInput('AT').setCheck('Number');\n        }\n\n        this.isAt = isAt;\n        this.initSvg();\n        this.render(false);\n    },\n};\n\nBlockly.JavaScript.text_charAt = block => {\n    const where = block.getFieldValue('WHERE') || 'FROM_START';\n    const textOrder = where === 'RANDOM' ? Blockly.JavaScript.ORDER_NONE : Blockly.JavaScript.ORDER_MEMBER;\n    const text = Blockly.JavaScript.valueToCode(block, 'VALUE', textOrder) || '\\'\\'';\n\n    let code;\n\n    if (where === 'FROM_START') {\n        const at = Blockly.JavaScript.getAdjusted(block, 'AT');\n        // Adjust index if using one-based indices\n        code = `${text}.charAt(${at})`;\n    } else if (where === 'FROM_END') {\n        const at = Blockly.JavaScript.getAdjusted(block, 'AT', 1, true);\n        code = `${text}.slice(${at}).charAt(0)`;\n    } else if (where === 'FIRST') {\n        code = `${text}.charAt(0)`;\n    } else if (where === 'LAST') {\n        code = `${text}.slice(-1)`;\n    } else if (where === 'RANDOM') {\n        // eslint-disable-next-line no-underscore-dangle\n        const functionName = Blockly.JavaScript.provideFunction_('textRandomLetter', [\n            // eslint-disable-next-line no-underscore-dangle\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(text) {\n                var x = Math.floor(Math.random() * text.length);\n                return text[x];\n            }`,\n        ]);\n        code = `${functionName}(${text})`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.text_getSubstring = {\n    init() {\n        this.WHERE_OPTIONS_1 = [\n            [translate('letter\\u00A0#'), 'FROM_START'],\n            [translate('letter\\u00A0#\\u00A0from end'), 'FROM_END'],\n            [translate('first'), 'FIRST'],\n        ];\n        this.WHERE_OPTIONS_2 = [\n            [translate('letter\\u00A0#'), 'FROM_START'],\n            [translate('letter\\u00A0#\\u00A0from end'), 'FROM_END'],\n            [translate('last'), 'LAST'],\n        ];\n\n        this.jsonInit(this.definition());\n\n        this.updateAt(1, true);\n        this.updateAt(2, true);\n    },\n    definition(){\n        return {\n            message0: translate('in text %1 get substring from %2 %3 to %4 %5'),\n            args0   : [\n                {\n                    type: 'input_value',\n                    name: 'STRING',\n                },\n                {\n                    type   : 'field_dropdown',\n                    name   : 'WHERE1',\n                    options: this.WHERE_OPTIONS_1,\n                },\n                {\n                    type: 'input_dummy',\n                    name: 'AT1',\n                },\n                {\n                    type   : 'field_dropdown',\n                    name   : 'WHERE2',\n                    options: this.WHERE_OPTIONS_2,\n                },\n                {\n                    type: 'input_dummy',\n                    name: 'AT2',\n                },\n            ],\n            output         : 'String',\n            outputShape    : Blockly.OUTPUT_SHAPE_SQUARE,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Text Substring tooltip'),\n            category       : Blockly.Categories.Text,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Text Substring'),\n            'description' : translate('Text Substring Description'),\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        const isAt1 = this.getInput('AT1').type === Blockly.INPUT_VALUE;\n        const isAt2 = this.getInput('AT2').type === Blockly.INPUT_VALUE;\n\n        container.setAttribute('at1', isAt1);\n        container.setAttribute('at2', isAt2);\n\n        return container;\n    },\n    domToMutation(xmlElement) {\n        const isAt1 = xmlElement.getAttribute('at1') === 'true';\n        const isAt2 = xmlElement.getAttribute('at2') === 'true';\n\n        this.updateAt(1, isAt1);\n        this.updateAt(2, isAt2);\n    },\n    updateAt(n, isAt) {\n        this.removeInput(`AT${n}`, true);\n        if (isAt) {\n            this.appendValueInput(`AT${n}`).setCheck('Number');\n        } else {\n            this.appendDummyInput(`AT${n}`);\n        }\n\n        const menu = new Blockly.FieldDropdown(this[`WHERE_OPTIONS_${n}`], value => {\n            const newAt = ['FROM_START', 'FROM_END'].includes(value);\n            if (newAt !== isAt) {\n                this.updateAt(n, newAt);\n                this.setFieldValue(value, `WHERE${n}`);\n                return null;\n            }\n            return undefined;\n        });\n\n        this.getInput(`AT${n}`).appendField(menu, `WHERE${n}`);\n        if (n === 1) {\n            this.moveInputBefore('AT1', 'AT2');\n        }\n\n        this.initSvg();\n        this.render(false);\n    },\n};\n\nBlockly.JavaScript.text_getSubstring = block => {\n    const text = Blockly.JavaScript.valueToCode(block, 'STRING', Blockly.JavaScript.ORDER_FUNCTION_CALL) || '\\'\\'';\n    const where1 = block.getFieldValue('WHERE1');\n    const where2 = block.getFieldValue('WHERE2');\n\n    let at1,\n        at2,\n        code;\n\n    if (where1 === 'FIRST' && where2 === 'LAST') {\n        code = text;\n    } else if (\n        text.match(/^'?\\w+'?$/) ||\n        (where1 !== 'FROM_END' && where1 !== 'LAST' && where2 !== 'FROM_END' && where2 !== 'LAST')\n    ) {\n        if (where1 === 'FROM_START') {\n            at1 = Blockly.JavaScript.getAdjusted(block, 'AT1');\n        } else if (where1 === 'FROM_END') {\n            at1 = Blockly.JavaScript.getAdjusted(block, 'AT1', 1, false, Blockly.JavaScript.ORDER_SUBTRACTION);\n            at1 = `${text}.length - ${at1}`;\n        } else if (where1 === 'FIRST') {\n            at1 = '0';\n        }\n\n        if (where2 === 'FROM_START') {\n            at2 = Blockly.JavaScript.getAdjusted(block, 'AT2');\n        } else if (where2 === 'FROM_END') {\n            at2 = Blockly.JavaScript.getAdjusted(block, 'AT2', 0, false, Blockly.JavaScript.ORDER_SUBTRACTION);\n            at2 = `${text}.length - ${at2}`;\n        } else if (where2 === 'LAST') {\n            at2 = `${text}.length`;\n        }\n    } else {\n        at1 = Blockly.JavaScript.getAdjusted(block, 'AT1');\n        at2 = Blockly.JavaScript.getAdjusted(block, 'AT2');\n\n        // binary-bot: Blockly.JavaScript.text.getIndex_ (Blockly)\n        const getIndex = (stringName, where, optAt) => {\n            if (where === 'FIRST') {\n                return '0';\n            } else if (where === 'FROM_END') {\n                return `${stringName}.length - 1 - ${optAt}`;\n            } else if (where === 'LAST') {\n                return `${stringName}.length - 1`;\n            }\n            return optAt;\n        };\n        const wherePascalCase = {\n            FIRST     : 'First',\n            LAST      : 'Last',\n            FROM_START: 'FromStart',\n            FROM_END  : 'FromEnd',\n        };\n        // eslint-disable-next-line no-underscore-dangle\n        const functionName = Blockly.JavaScript.provideFunction_(\n            `subsequence${wherePascalCase[where1]}${wherePascalCase[where2]}`,\n            [\n                // eslint-disable-next-line no-underscore-dangle\n                `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(\n                    sequence\n                    ${where1 === 'FROM_END' || where1 === 'FROM_START' ? ', at1' : ''}\n                    ${where2 === 'FROM_END' || where2 === 'FROM_START' ? ', at2' : ''}\n                ) {\n                    var start = ${getIndex('sequence', where1, 'at1')};\n                    var end = ${getIndex('sequence', where2, 'at2')};\n                    return sequence.slice(start, end);\n                }`,\n            ]\n        );\n\n        code = `${functionName}(\n            ${text}\n            ${where1 === 'FROM_END' || where1 === 'FROM_START' ? `, ${at1}` : ''}\n            ${where2 === 'FROM_END' || where2 === 'FROM_START' ? `, ${at2}` : ''}\n        )`;\n    }\n\n    code = `${text}.slice(${at1}, ${at2})`;\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.text_indexOf = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('in text %1 find %2 occurence of text %3'),\n            args0   : [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                    // check: 'String', Rendering looks off when check is enabled.\n                },\n                {\n                    type   : 'field_dropdown',\n                    name   : 'END',\n                    options: [[translate('first'), 'FIRST'], [translate('last'), 'LAST']],\n                },\n                {\n                    type: 'input_value',\n                    name: 'FIND',\n                    // check: 'String',\n                },\n            ],\n            output         : 'String',\n            outputShape    : Blockly.OUTPUT_SHAPE_SQUARE,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Text Index of Tooltip'),\n            cateogry       : Blockly.Categories.Text,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Text Index of'),\n            'description' : translate('Text Index of Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.text_indexOf = block => {\n    const functionName = block.getFieldValue('END') === 'FIRST' ? 'indexOf' : 'lastIndexOf';\n    const substring = Blockly.JavaScript.valueToCode(block, 'FIND', Blockly.JavaScript.ORDER_NONE) || '\\'\\'';\n    const text = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_MEMBER) || '\\'\\'';\n\n    const code = `${text}.${functionName}(${substring})`;\n    if (block.workspace.options.oneBasedIndex) {\n        return [`${code} + 1`, Blockly.JavaScript.ORDER_ADDITION];\n    }\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.text_isEmpty = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('text %1 is empty'),\n            args0   : [\n                {\n                    type : 'input_value',\n                    name : 'VALUE',\n                    check: ['String'],\n                },\n            ],\n            output         : 'Boolean',\n            outputShape    : Blockly.OUTPUT_SHAPE_HEXAGONAL,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Text Is empty'),\n            category       : Blockly.Categories.Text,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Text Is empty'),\n            'description' : translate('Text Is empty'),\n        };\n    },\n};\n\nBlockly.JavaScript.text_isEmpty = block => {\n    const text = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_MEMBER) || '\\'\\'';\n    const isVariable = block.workspace.getAllVariables().findIndex(variable => variable.name === text) !== -1;\n\n    const code = isVariable ? `!${text} || !${text}.length` : `!${text}.length`;\n    return [code, Blockly.JavaScript.ORDER_LOGICAL_NOT];\n};\n","import { plusIconDark } from '../images';\nimport { translate }    from '../../../utils/lang/i18n';\n\nBlockly.Blocks.text_join = {\n    init() {\n        this.jsonInit(this.definition());\n\n        const fieldImage = new Blockly.FieldImage(plusIconDark, 25, 25, '', this.onIconClick.bind(this));\n\n        this.appendDummyInput('ADD_ICON').appendField(fieldImage);\n        this.moveInputBefore('ADD_ICON', 'STACK');\n    },\n    definition(){\n        return {\n            message0: translate('set %1 to create text with'),\n            message1: '%1',\n            args0   : [\n                {\n                    type    : 'field_variable',\n                    name    : 'VARIABLE',\n                    variable: translate('text'),\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STACK',\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n            tooltip          : translate('Text Join Tooltip'),\n            category         : Blockly.Categories.Text,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Text Join'),\n            'description' : translate('Text Join Description'),\n        };\n    },\n    onIconClick() {\n        if (!this.workspace || this.isInFlyout) {\n            return;\n        }\n\n        Blockly.Events.setGroup(true);\n\n        const textBlock = this.workspace.newBlock('text_statement');\n        textBlock.requiredParentId = this.id;\n        textBlock.setMovable(false);\n        textBlock.initSvg();\n        textBlock.render();\n\n        const shadowBlock = this.workspace.newBlock('text');\n        shadowBlock.setShadow(true);\n        shadowBlock.setFieldValue('', 'TEXT');\n        shadowBlock.initSvg();\n        shadowBlock.render();\n\n        const textInput = textBlock.getInput('TEXT');\n        textInput.connection.connect(shadowBlock.outputConnection);\n\n        const connection = this.getLastConnectionInStatement('STACK');\n        connection.connect(textBlock.previousConnection);\n\n        Blockly.Events.setGroup(false);\n\n        // TODO: Open editor and focus so user can add string right away?\n        // const inputField = shadowBlock.getField('TEXT');\n        // inputField.showEditor_();\n    },\n    enforceTextStatementType() {\n        let currentBlock = this.getInputTargetBlock('STACK');\n\n        while (currentBlock !== null) {\n            if (currentBlock.type !== 'text_statement') {\n                currentBlock.unplug(false);\n            }\n            currentBlock = currentBlock.getNextBlock();\n        }\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.END_DRAG) {\n            // Only allow `text_statement` type blocks\n            const blocksInStatement = this.getBlocksInStatement('STACK');\n            blocksInStatement.forEach(block => {\n                if (block.type !== 'text_statement') {\n                    Blockly.Events.disable();\n                    block.unplug();\n                    Blockly.Events.enable();\n                }\n            });\n        }\n    },\n};\n\nBlockly.JavaScript.text_join = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const varName = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n\n    const elements = [];\n\n    let currentBlock = block.getInputTargetBlock('STACK');\n\n    while (currentBlock !== null) {\n        const value = Blockly.JavaScript[currentBlock.type](currentBlock);\n\n        if (Array.isArray(value) && value.length === 2) {\n            elements.push(value[0]);\n        } else {\n            elements.push(value);\n        }\n\n        currentBlock = currentBlock.getNextBlock();\n    }\n\n    let code;\n\n    if (elements.length === 0) {\n        code = `${varName} = '';\\n`;\n    } else {\n        code = `${varName} = ${elements.join(' + ')};\\n`;\n    }\n\n    return code;\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.text_length = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('length of %1'),\n            args0   : [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n            ],\n            output         : 'Number',\n            outputShape    : Blockly.OUTPUT_SHAPE_ROUND,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Text Length Tooltip'),\n            category       : Blockly.Categories.Text,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Text Length'),\n            'description' : translate('Text Length Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.text_length = block => {\n    const text = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_FUNCTION_CALL) || '\\'\\'';\n\n    const code = `${text}.length`;\n    return [code, Blockly.JavaScript.ORDER_MEMBER];\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.text_print = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('print %1'),\n            args0   : [\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n            ],\n            colour           : Blockly.Colours.Binary.colour,\n            colourSecondary  : Blockly.Colours.Binary.colourSecondary,\n            colourTertiary   : Blockly.Colours.Binary.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n            tooltip          : translate('Text Print Tooltip'),\n            category         : Blockly.Categories.Text,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Text Print'),\n            'description' : translate('Text Print Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.text_print = block => {\n    const msg = Blockly.JavaScript.valueToCode(block, 'TEXT', Blockly.JavaScript.ORDER_NONE) || '\\'\\'';\n    const code = `window.alert(${msg});\\n`;\n    return code;\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.text_prompt_ext = {\n    init() {\n        this.jsonInit(this.definition());\n\n        // Change shape based on selected type\n        const typeField = this.getField('TYPE');\n        typeField.setValidator(value => {\n            if (value === 'TEXT') {\n                this.setOutputShape(Blockly.OUTPUT_SHAPE_SQUARE);\n                this.setOutput(true, 'String');\n            } else if (value === 'NUMBER') {\n                this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND);\n                this.setOutput(true, 'Number');\n            }\n            this.initSvg();\n            this.render(false);\n            return undefined;\n        });\n    },\n    definition(){\n        return {\n            message0: translate('prompt for %1 with message %2'),\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'TYPE',\n                    options: [[translate('string'), 'TEXT'], [translate('number'), 'NUMBER']],\n                },\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n            ],\n            output         : 'String',\n            outputShape    : Blockly.OUTPUT_SHAPE_SQUARE,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Text Prompt Tooltip'),\n            category       : Blockly.Categories.Text,\n        };\n    },\n    meta(){\n        return {\n            'trade_name' : translate('Text Prompt'),\n            'description': translate('Text Prompt Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.text_prompt_ext = block => {\n    let msg,\n        code;\n\n    if (block.getField('TEXT')) {\n        // Internal message\n        // eslint-disable-next-line no-underscore-dangle\n        msg = Blockly.JavaScript.quote_(block.getFieldValue('TEXT'));\n    } else {\n        // External message\n        msg = Blockly.JavaScript.valueToCode(block, 'TEXT', Blockly.JavaScript.ORDER_NONE) || '\\'\\'';\n    }\n\n    if (block.getFieldValue('TYPE') === 'NUMBER') {\n        code = `parseFloat(window.prompt(${msg}))`;\n    } else {\n        code = `window.prompt(${msg})`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { minusIconDark } from '../images';\nimport { translate } from '../../../utils/tools';\n\nBlockly.Blocks.text_statement = {\n    init() {\n        this.requiredParentId = '';\n\n        this.jsonInit(this.definition());\n\n        const fieldImage = new Blockly.FieldImage(minusIconDark, 25, 25, '', () => this.onIconClick());\n\n        this.appendDummyInput('REMOVE_ICON').appendField(fieldImage);\n    },\n    definition(){\n        return {\n            message0: '%1',\n            args0   : [\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n            ],\n            colour           : Blockly.Colours.BinaryLessGray.colour,\n            colourSecondary  : Blockly.Colours.BinaryLessGray.colourSecondary,\n            colourTertiary   : Blockly.Colours.BinaryLessGray.colourTertiary,\n            previousStatement: null,\n            nextStatement    : null,\n            tooltip          : translate('Text Statement Tooltip'),\n            category         : Blockly.Categories.Text,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Text Statement'),\n            'description' : translate('Text Statement Description'),\n        };\n    },\n    onIconClick() {\n        if (!this.workspace || this.isInFlyout) {\n            return;\n        }\n\n        this.unplug(true);\n        this.dispose();\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        const surroundParent = this.getSurroundParent();\n        if (event.type === Blockly.Events.END_DRAG) {\n            if (!this.requiredParentId && surroundParent.type === 'text_join') {\n                this.requiredParentId = surroundParent.id;\n            } else if (!surroundParent || surroundParent.id !== this.requiredParentId) {\n                Blockly.Events.disable();\n                this.unplug(false);\n\n                const parentBlock = this.workspace.getAllBlocks().find(block => block.id === this.requiredParentId);\n\n                if (parentBlock) {\n                    const parentConnection = parentBlock.getLastConnectionInStatement('STACK');\n                    parentConnection.connect(this.previousConnection);\n                } else {\n                    this.dispose();\n                }\n                Blockly.Events.enable();\n            }\n        }\n    },\n};\n\nBlockly.JavaScript.text_statement = block => {\n    const code = Blockly.JavaScript.valueToCode(block, 'TEXT') || '';\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { translate } from '../../../utils/lang/i18n';\n\nBlockly.Blocks.text_trim = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition(){\n        return {\n            message0: translate('trim spaces from %1 of %2'),\n            args0   : [\n                {\n                    type   : 'field_dropdown',\n                    name   : 'MODE',\n                    options: [\n                        [translate('both sides'), 'BOTH'],\n                        [translate('left side'), 'LEFT'],\n                        [translate('right side'), 'RIGHT'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n            ],\n            output         : 'String',\n            outputShape    : Blockly.OUTPUT_SHAPE_SQUARE,\n            colour         : Blockly.Colours.Binary.colour,\n            colourSecondary: Blockly.Colours.Binary.colourSecondary,\n            colourTertiary : Blockly.Colours.Binary.colourTertiary,\n            tooltip        : translate('Text Trim Tooltip'),\n            category       : Blockly.Categories.Text,\n        };\n    },\n    meta(){\n        return {\n            'display_name': translate('Text Trim'),\n            'description' : translate('Text Trim Description'),\n        };\n    },\n};\n\nBlockly.JavaScript.text_trim = block => {\n    const operators = {\n        LEFT : '.replace(/^[\\\\s\\\\xa0]+/, \\'\\')',\n        RIGHT: '.replace(/[\\\\s\\\\xa0]+$/, \\'\\')',\n        BOTH : '.trim()',\n    };\n\n    const operator = operators[block.getFieldValue('MODE')];\n    const text = Blockly.JavaScript.valueToCode(block, 'TEXT', Blockly.JavaScript.ORDER_MEMBER) || '\\'\\'';\n\n    const code = `${text}${operator}`;\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport * as config from './help-content.config';\nimport FlyoutVideo from './help-components/flyout-video.jsx';\nimport FlyoutText from './help-components/flyout-text.jsx';\nimport FlyoutImage from './help-components/flyout-img.jsx';\nimport FlyoutBlock from '../../components/flyout-block.jsx';\nimport { Arrow2Icon } from '../../components/Icons.jsx';\nimport { connect } from '../../stores/connect';\nimport { translate } from '../../utils/tools';\n\nclass HelpBase extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        const { onSequenceClick, block_nodes } = props;\n\n        this.state = {\n            onSequenceClick,\n            block_nodes,\n            help_string     : null,\n            has_help_content: true,\n        };\n    }\n\n    getHelpString = block_nodes => {\n        const block_type = block_nodes[0].getAttribute('type');\n        const title = Blockly.Blocks[block_type].meta().display_name;\n\n        import(`./help-string/${block_type}.json`)\n            .then(help_string => {\n                this.setState({ help_string, has_help_content: true });\n            })\n            .catch(() => this.setState({ has_help_content: false }));\n\n        this.setState({ title, block_type });\n    }\n\n    componentDidMount() {\n        const { block_nodes } = this.props;\n        this.getHelpString(block_nodes);\n    }\n\n    componentDidUpdate(prev_state) {\n        const { block_nodes } = this.props;\n\n        if (prev_state !== this.props) {\n            this.setState({ ...this.props });\n            this.getHelpString(block_nodes);\n        }\n    }\n\n    render() {\n        const {\n            onSequenceClick,\n            block_type,\n            title,\n            block_nodes,\n            help_string,\n            has_help_content,\n        } = this.state;\n        const block_help_component = help_string.length && config[block_type];\n        let text_count = 0;\n\n        return (\n            <React.Fragment>\n                <div className='flyout__help-header'>\n                    <button className='flyout__button flyout__button-back' onClick={() => Blockly.derivWorkspace.reshowFlyout()}>\n                        <Arrow2Icon />\n                    </button>\n                    <span className='flyout__help-title'>{title}</span>\n                </div>\n                <div className='flyout__help-content'>\n                    {\n                        block_help_component.length &&\n                        block_help_component.map(component => {\n                            const { type, url } = component;\n\n                            switch (type) {\n                                case config.TEXT:\n                                    return (\n                                        <FlyoutText text={help_string[text_count++]} />\n                                    );\n                                case config.VIDEO:\n                                    return (\n                                        <FlyoutVideo url={url} />\n                                    );\n                                case config.IMAGE:\n                                    return (\n                                        <FlyoutImage url={url} />\n                                    );\n                                case config.BLOCK:\n                                {\n                                    return Object.keys(block_nodes).map(key => {\n                                        return (\n                                            <FlyoutBlock\n                                                key={key}\n                                                should_center_block={true}\n                                                block_node={block_nodes[key]}\n                                            />\n                                        );\n                                    });\n                                }\n                                default:\n                                    return null;\n                            }\n                        })\n                    }\n                    {\n                        !has_help_content &&\n                        <div className='flyout__item'>\n                            <h3>Coming soon...</h3>\n                        </div>\n                    }\n                </div>\n                <div className='flyout__help-footer'>\n                    <button className='flyout__button flyout__button-previous' onClick={() => onSequenceClick(block_type, false)}>{translate('Previous')}</button>\n                    <button className='flyout__button flyout__button-next' onClick={() => onSequenceClick(block_type, true)}>{translate('Next')}</button>\n                </div>\n            </React.Fragment >\n        );\n    }\n}\n\nHelpBase.propTypes = {\n    block_nodes    : PropTypes.array,\n    onSequenceClick: PropTypes.func,\n    title          : PropTypes.string,\n};\n\nexport default connect(({ flyout }) => ({\n    onSequenceClick: flyout.onSequenceClick,\n}))(HelpBase);\n","const TEXT = 'text';\nconst VIDEO = 'video';\nconst IMAGE = 'image';\nconst BLOCK = 'block';\n\nmodule.exports = {\n    math_change: [\n        { type: TEXT },\n        { type: VIDEO, url: 'https://www.youtube.com/embed/mi18spqE7R4?controls=0' },\n        { type: IMAGE, url: 'https://d2.alternativeto.net/dist/s/scratch_830736_full.png?format=jpg&width=1600&height=1600&mode=min&upscale=false' },\n        { type: VIDEO, url: 'https://www.youtube.com/embed/mi18spqE7R4?controls=0' },\n        { type: IMAGE, url: 'https://d2.alternativeto.net/dist/s/scratch_830736_full.png?format=jpg&width=1600&height=1600&mode=min&upscale=false' },\n        { type: TEXT },\n        { type: BLOCK },\n    ],\n};\n","/* eslint-disable func-names, no-underscore-dangle */\n\nBlockly.Block.prototype.getDisplayName = function() {\n    if (this.meta) {\n        const block_meta = this.meta();\n        return block_meta && block_meta.display_name;\n    }\n    return this.type;\n};\n\nBlockly.Block.prototype.getDisplayName = function() {\n    if (this.meta) {\n        const block_meta = this.meta();\n        return block_meta && block_meta.display_name;\n    }\n    return this.type;\n};\n\nBlockly.Block.prototype.getSiblings = function() {\n    const siblings = [this];\n    ['getPreviousBlock', 'getNextBlock'].forEach(functionName => {\n        let block = this[functionName]();\n        while (block !== null) {\n            const parent = this.getParent();\n            if (parent && parent.id === block.id) {\n                break;\n            }\n\n            siblings.push(block);\n            block = block[functionName]();\n        }\n    });\n    return siblings;\n};\n\nBlockly.Block.prototype.getChildByType = function(type) {\n    return this.getDescendants().find(child => child.type === type);\n};\n\nBlockly.Block.prototype.getChildFieldValue = function(childType, childField) {\n    const childBlock = this.getChildByType(childType);\n    if (childBlock) {\n        const value = childBlock.getFieldValue(childField);\n        return value;\n    }\n    return null;\n};\n\nBlockly.Block.prototype.childValueToCode = function(childType, childField) {\n    const childBlock = this.getChildByType(childType);\n    return childBlock && Blockly.JavaScript.valueToCode(childBlock, childField, Blockly.JavaScript.ORDER_ATOMIC);\n};\n\nBlockly.Block.prototype.getBlocksInStatement = function(statementInputName) {\n    const blocksInStatement = [];\n    const firstBlock = this.getInputTargetBlock(statementInputName);\n\n    if (firstBlock) {\n        return firstBlock.getSiblings();\n    }\n    return blocksInStatement;\n};\n\nBlockly.Block.prototype.getLastConnectionInStatement = function(statementInputName) {\n    const firstBlockInStack = this.getInputTargetBlock(statementInputName);\n    if (firstBlockInStack) {\n        return firstBlockInStack.lastConnectionInStack();\n    }\n    const statementInput = this.getInput(statementInputName);\n    return statementInput.connection;\n};\n\nBlockly.Block.prototype.isDescendantOf = function(type) {\n    let parentBlock = this.getParent();\n    while (parentBlock !== null) {\n        if (parentBlock.type === type) {\n            return true;\n        }\n        parentBlock = parentBlock.getParent();\n    }\n    return false;\n};\n\nBlockly.Block.prototype.getTopParent = function() {\n    let parent = this.getParent();\n    while (parent !== null) {\n        const nextParent = parent.getParent();\n        if (!nextParent) {\n            return parent;\n        }\n        parent = nextParent;\n    }\n    return null;\n};\n\nBlockly.Block.getDimensions = function(block_node) {\n    // eslint-disable-next-line\n    const options = new Blockly.Options({ media: `${__webpack_public_path__}media/` });\n    const fragment = document.createDocumentFragment();\n    const el_injection_div = document.createElement('div');\n\n    fragment.appendChild(el_injection_div);\n\n    // Create a headless workspace to calculate xmlList block dimensions\n    const svg = Blockly.createDom_(el_injection_div, options);\n    const workspace = Blockly.createMainWorkspace_(svg, options, false, false);\n\n    const block = Blockly.Xml.domToBlock(block_node, workspace);\n    const block_hw = block.getHeightWidth();\n\n    workspace.dispose();\n\n    return block_hw;\n};\n\nBlockly.Block.isDynamic = function(block_type) {\n    return /^((procedures_)|(variables_)|(math_change$))/.test(block_type);\n};\n","import { translate } from '../../utils/lang/i18n';\n\n/* eslint-disable func-names, no-underscore-dangle */\n\n// deriv-bot: Blockly value, Scratch resets this to 0, req for correct spacing in flyout.\nBlockly.BlockSvg.TAB_WIDTH = 8;\n\n/**\n * Set whether the block is disabled or not.\n * @param {boolean} disabled True if disabled.\n * deriv-bot: Call updateDisabled() when setDisabled is called.\n */\nBlockly.BlockSvg.prototype.setDisabled = function(disabled) {\n    if (this.disabled !== disabled) {\n        Blockly.BlockSvg.superClass_.setDisabled.call(this, disabled);\n        if (this.rendered) {\n            this.updateDisabled();\n        }\n    }\n};\n\n/**\n * Enable or disable a block.\n */\nBlockly.BlockSvg.prototype.updateDisabled = function() {\n    if (this.disabled || this.getInheritedDisabled()) {\n        const added = Blockly.utils.addClass(/** @type {!Element} */ (this.svgGroup_), 'blocklyDisabled');\n        if (added) {\n            this.svgPath_.setAttribute('fill', `url(#${this.workspace.options.disabledPatternId})`);\n        }\n    } else {\n        const removed = Blockly.utils.removeClass(/** @type {!Element} */ (this.svgGroup_), 'blocklyDisabled');\n        if (removed) {\n            this.updateColour();\n        }\n    }\n    const children = this.getChildren(false);\n    children.forEach(child => {\n        child.updateDisabled();\n    });\n};\n\n/**\n * Show the context menu for this block.\n * @param {!Event} e Mouse event.\n * @private\n * deriv-bot: Restore contextMenu options from Blockly unavailable in Scratch\n */\nBlockly.BlockSvg.prototype.showContextMenu_ = function(e) {\n    if (this.workspace.options.readOnly || !this.contextMenu) {\n        return;\n    }\n    // Save the current block in a variable for use in closures.\n    const block = this;\n    const menuOptions = [];\n\n    if (this.isDeletable() && this.isMovable() && !block.isInFlyout) {\n        menuOptions.push(Blockly.ContextMenu.blockDuplicateOption(block, e));\n\n        if (this.isEditable() && this.workspace.options.comments) {\n            menuOptions.push(Blockly.ContextMenu.blockCommentOption(block));\n        }\n\n        menuOptions.push(Blockly.ContextMenu.blockDeleteOption(block));\n    } else if (this.parentBlock_ && this.isShadow_) {\n        this.parentBlock_.showContextMenu_(e);\n        return;\n    }\n\n    // Option to collapse/expand block.\n    if (this.workspace.options.collapse) {\n        if (this.collapsed_) {\n            const expandOption = { enabled: true };\n            expandOption.text = translate('Expand Block');\n            expandOption.callback = function() {\n                block.setCollapsed(false);\n            };\n            menuOptions.push(expandOption);\n        } else {\n            const collapseOption = { enabled: true };\n            collapseOption.text = translate('Collapse Block');\n            collapseOption.callback = function() {\n                block.setCollapsed(true);\n            };\n            menuOptions.push(collapseOption);\n        }\n    }\n\n    // Option to disable/enable block.\n    if (this.workspace.options.disable) {\n        const disableOption = {\n            text   : this.disabled ? translate('Enable Block') : translate('Disable Block'),\n            enabled: !this.getInheritedDisabled(),\n            callback() {\n                const group = Blockly.Events.getGroup();\n\n                if (!group) {\n                    Blockly.Events.setGroup(true);\n                }\n\n                block.setDisabled(!block.disabled);\n\n                if (!group) {\n                    Blockly.Events.setGroup(false);\n                }\n            },\n        };\n        menuOptions.push(disableOption);\n\n        // Allow the block to add or modify menuOptions.\n        if (this.customContextMenu) {\n            this.customContextMenu(menuOptions);\n        }\n\n        Blockly.ContextMenu.show(e, menuOptions, this.RTL);\n        Blockly.ContextMenu.currentBlock = this;\n    }\n};\n","Blockly.Colours.Binary = {\n    colour         : '#dedede',\n    colourSecondary: '#e2e2e2',\n    colourTertiary : '#bababa',\n};\n\nBlockly.Colours.BinaryLessGray = {\n    colour         : '#f3f3f3',\n    colourSecondary: '#e2e2e2',\n    colourTertiary : '#bababa',\n};\n\nBlockly.Colours.BinaryPurple = {\n    colour         : '#dedede',\n    colourSecondary: '#e2e2e2',\n    colourTertiary : '#bababa',\n};\n\nBlockly.Colours.BinaryLessPurple = {\n    colour         : '#dedede',\n    colourSecondary: '#e2e2e2',\n    colourTertiary : '#bababa',\n};\n\nBlockly.Colours.BinaryProcedures = {\n    colour         : '#1876d2',\n    colourSecondary: '#0d47a1',\n    colourTertiary : '#0d47a1',\n};\n","import { translate } from '../../utils/lang/i18n';\n\n/**\n * ENUM for categories.\n * @const\n */\nBlockly.Categories = {\n    'Trade_Definition': translate('trade_parameters'),\n    'Before_Purchase' : translate('purchase_conditions'),\n    'During_Purchase' : translate('sell_conditions'),\n    'After_Purchase'  : translate('trade_results'),\n    'Mathematical'    : translate('math'),\n    'Logic'           : translate('logic'),\n    'Text'            : translate('text'),\n    'Variables'       : translate('variables'),\n    'Functions'       : translate('custom_functions'),\n    'List'            : translate('lists'),\n    'Indicators'      : translate('indicators'),\n    'Time'            : translate('time'),\n    'Tick_Analysis'   : translate('technical_analysis'),\n    'Candle'          : translate('candle'),\n    'Miscellaneous'   : translate('miscellaneous'),\n    'Loop'            : translate('loops'),\n};\n/**\n * Number of pixels the mouse must move before a drag starts.\n */\nBlockly.DRAG_RADIUS = 3;\n\n/**\n * Number of pixels the mouse must move before a drag/scroll starts from the\n * flyout.  Because the drag-intention is determined when this is reached, it is\n * larger than Blockly.DRAG_RADIUS so that the drag-direction is clearer.\n */\nBlockly.FLYOUT_DRAG_RADIUS = 1;\n","import { translate } from '../../utils/lang/i18n';\n\n/* eslint-disable func-names, no-underscore-dangle */\n\n/**\n * Construct the blocks required by the flyout for the variable category.\n * @param {!Blockly.Workspace} workspace The workspace containing variables.\n * @return {!Array.<!Element>} Array of XML block elements.\n */\nBlockly.DataCategory = function(workspace) {\n    const variableModelList = workspace.getVariablesOfType('');\n    let xmlList = [];\n    \n    // `Create Variable`-button\n    Blockly.DataCategory.addCreateButton(xmlList, workspace);\n\n    const block_types = ['variables_set', 'variables_get', 'math_change'];\n    xmlList = xmlList.concat(Blockly.DataCategory.search(variableModelList, block_types));\n\n    return xmlList;\n};\n\nBlockly.DataCategory.search = function(variableModelList){\n    const xmlList = [];\n    if (variableModelList.length > 0) {\n        const generateVariableFieldXmlString = variableModel => {\n            // The variable name may be user input, so it may contain characters that\n            // need to be escaped to create valid XML.\n            const escapedText = `<field name=\"VAR\" id=\"${variableModel.getId()}\" variabletype=\"${goog.string.htmlEscape(\n                variableModel.type\n            )}\">${goog.string.htmlEscape(variableModel.name)}</field>`;\n            return escapedText;\n        };\n\n        const firstVariable = variableModelList[0];\n\n        // Create 'Set `var` to'-block\n        if (Blockly.Blocks.variables_set) {\n            const gap = Blockly.Blocks.math_change ? 8 : 24;\n            const setBlockText = `<xml><block type=\"variables_set\" gap=\"${gap}\">${generateVariableFieldXmlString(\n                firstVariable\n            )}</block></xml>`;\n            const setBlock = Blockly.Xml.textToDom(setBlockText).firstChild;\n            xmlList.push(setBlock);\n        }\n\n        // Create 'Change `var` by `1`'-block\n        if (Blockly.Blocks.math_change) {\n            const gap = Blockly.Blocks.variables_get ? 20 : 8;\n            const changeBlockText = `<xml><block type=\"math_change\" gap=\"${gap}\">${generateVariableFieldXmlString(\n                firstVariable\n            )}<value name=\"DELTA\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></xml>`;\n            const changeBlock = Blockly.Xml.textToDom(changeBlockText).firstChild;\n            xmlList.push(changeBlock);\n        }\n\n        // Create `variable_get` block for each variable\n        if (Blockly.Blocks.variables_get) {\n            variableModelList.sort(Blockly.VariableModel.compareByName);\n\n            variableModelList.forEach(variable => {\n                const getBlockText = `<xml><block type=\"variables_get\">${generateVariableFieldXmlString(\n                    variable\n                )}</block></xml>`;\n                const getBlock = Blockly.Xml.textToDom(getBlockText).firstChild;\n                xmlList.push(getBlock);\n            });\n        }\n    }\n\n    return xmlList;\n};\n\n/**\n * Construct a create variable button and push it to the xmlList.\n * @param {!Array.<!Element>} xmlList Array of XML block elements.\n * @param {Blockly.Workspace} workspace Workspace to register callback to.\n * deriv-bot: We only use a single type of variable, so `type` arg was removed.\n */\nBlockly.DataCategory.addCreateButton = function(xmlList, workspace) {\n    const buttonXml = goog.dom.createDom('button');\n    // Set default msg, callbackKey, and callback values for type 'VARIABLE'\n    const msg = translate('Create variable');\n    const callbackKey = 'CREATE_VARIABLE';\n    const callback = function(button) {\n        const buttonWorkspace = button.getTargetWorkspace();\n        Blockly.Variables.createVariable(buttonWorkspace, null, '');\n\n        const toolbox = Blockly.derivWorkspace.toolbox_;\n        const category = Blockly.derivWorkspace.toolbox_.getSelectedItem();\n        toolbox.setSelectedItem(category, false);\n    };\n\n    buttonXml.setAttribute('text', msg);\n    buttonXml.setAttribute('callbackKey', callbackKey);\n    workspace.registerButtonCallback(callbackKey, callback);\n    xmlList.push(buttonXml);\n};\n","/* eslint-disable func-names, no-underscore-dangle */\nBlockly.FieldDropdown.prototype.updateOptions = function(options, optDefault = null, triggerEvent = true) {\n    const previousValue = this.getValue();\n\n    Blockly.Events.disable();\n\n    this.menuGenerator_ = options;\n\n    if (optDefault && this.menuGenerator_.findIndex(item => item[1] === optDefault) !== -1) {\n        this.setValue('');\n        this.setValue(optDefault);\n    } else if (this.menuGenerator_.length > 0) {\n        this.setValue('');\n        this.setValue(this.menuGenerator_[0][1]);\n    }\n\n    Blockly.Events.enable();\n\n    if (triggerEvent) {\n        const event = new Blockly.Events.BlockChange(\n            this.sourceBlock_,\n            'field',\n            this.name,\n            previousValue,\n            this.getValue()\n        );\n        Blockly.Events.fire(event);\n    }\n};\n","/* eslint-disable func-names, no-underscore-dangle */\n/**\n * Class for an image on a block.\n * deriv-bot: Blockly implementation vs. Scratch for click handlers\n * @param {string} src The URL of the image.\n * @param {number} width Width of the image.\n * @param {number} height Height of the image.\n * @param {string=} optAlt Optional alt text for when block is collapsed.\n * @param {Function=} optOnClick Optional function to be called when the image\n *     is clicked.  If optOnClick is defined, optAlt must also be defined.\n * @param {boolean=} optFlipRtl Whether to flip the icon in RTL.\n * @extends {Blockly.Field}\n * @constructor\n */\nBlockly.FieldImage = function(src, width, height, optAlt, optOnClick, optFlipRtl) {\n    this.sourceBlock_ = null;\n\n    // Ensure height and width are numbers.  Strings are bad at math.\n    this.height_ = Number(height);\n    this.width_ = Number(width);\n    this.size_ = new goog.math.Size(this.width_, this.height_);\n    this.flipRtl_ = optFlipRtl;\n    this.tooltip_ = '';\n    this.setValue(src);\n    this.setText(optAlt);\n\n    if (typeof optOnClick === 'function') {\n        this.clickHandler_ = optOnClick;\n    }\n};\ngoog.inherits(Blockly.FieldImage, Blockly.Field);\n\n/**\n * Construct a FieldImage from a JSON arg object,\n * dereferencing any string table references.\n * @param {!Object} options A JSON object with options (src, width, height,\n *    alt, and flipRtl).\n * @return {!Blockly.FieldImage} The new field instance.\n * @package\n * @nocollapse\n */\nBlockly.FieldImage.fromJson = function(options) {\n    const src = Blockly.utils.replaceMessageReferences(options.src);\n    const width = Number(Blockly.utils.replaceMessageReferences(options.width));\n    const height = Number(Blockly.utils.replaceMessageReferences(options.height));\n    const alt = Blockly.utils.replaceMessageReferences(options.alt);\n    const flipRtl = !!options.flipRtl;\n    return new Blockly.FieldImage(src, width, height, alt, null, flipRtl);\n};\n\n/**\n * Editable fields are saved by the XML renderer, non-editable fields are not.\n */\nBlockly.FieldImage.prototype.EDITABLE = false;\n\n/**\n * Install this image on a block.\n */\nBlockly.FieldImage.prototype.init = function() {\n    if (this.fieldGroup_) {\n        // Image has already been initialized once.\n        return;\n    }\n    // Build the DOM.\n    /** @type {SVGElement} */\n    this.fieldGroup_ = Blockly.utils.createSvgElement('g', {}, null);\n    if (!this.visible_) {\n        this.fieldGroup_.style.display = 'none';\n    }\n    /** @type {SVGElement} */\n    this.imageElement_ = Blockly.utils.createSvgElement(\n        'image',\n        {\n            height: `${this.height_}px`,\n            width : `${this.width_}px`,\n        },\n        this.fieldGroup_\n    );\n    this.setValue(this.src_);\n    this.setText(this.text_);\n    this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_);\n\n    if (this.tooltip_) {\n        this.imageElement_.tooltip = this.tooltip_;\n    } else {\n        // Configure the field to be transparent with respect to tooltips.\n        this.setTooltip(this.sourceBlock_);\n    }\n    Blockly.Tooltip.bindMouseEvents(this.imageElement_);\n\n    this.maybeAddClickHandler_();\n};\n\n/**\n * Dispose of all DOM objects belonging to this text.\n */\nBlockly.FieldImage.prototype.dispose = function() {\n    goog.dom.removeNode(this.fieldGroup_);\n    this.fieldGroup_ = null;\n    this.imageElement_ = null;\n};\n\n/**\n * Bind events for a mouse down on the image, but only if a click handler has\n * been defined.\n * @private\n */\nBlockly.FieldImage.prototype.maybeAddClickHandler_ = function() {\n    if (this.clickHandler_) {\n        this.mouseDownWrapper_ = Blockly.bindEventWithChecks_(this.fieldGroup_, 'mousedown', this, this.clickHandler_);\n        // pxtblockly & deriv-bot: if a click handler is attached to the image, change the cursor to a pointer\n        if (this.imageElement_) this.imageElement_.style.cursor = 'pointer';\n    }\n};\n\n/**\n * Change the tooltip text for this field.\n * @param {string|!Element} newTip Text for tooltip or a parent element to\n *     link to for its tooltip.\n */\nBlockly.FieldImage.prototype.setTooltip = function(newTip) {\n    this.tooltip_ = newTip;\n    if (this.imageElement_) {\n        this.imageElement_.tooltip = newTip;\n    }\n};\n\n/**\n * Get the source URL of this image.\n * @return {string} Current text.\n * @override\n */\nBlockly.FieldImage.prototype.getValue = function() {\n    return this.src_;\n};\n\n/**\n * Set the source URL of this image.\n * @param {?string} src New source.\n * @override\n */\nBlockly.FieldImage.prototype.setValue = function(src) {\n    if (src === null) {\n        // No change if null.\n        return;\n    }\n    this.src_ = src;\n    if (this.imageElement_) {\n        this.imageElement_.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', src || '');\n    }\n};\n\n/**\n * Get whether to flip this image in RTL\n * @return {boolean} True if we should flip in RTL.\n */\nBlockly.FieldImage.prototype.getFlipRtl = function() {\n    return this.flipRtl_;\n};\n\n/**\n * Set the alt text of this image.\n * @param {?string} alt New alt text.\n * @override\n */\nBlockly.FieldImage.prototype.setText = function(alt) {\n    if (alt === null) {\n        // No change if null.\n        return;\n    }\n    this.text_ = alt;\n    if (this.imageElement_) {\n        this.imageElement_.setAttribute('alt', alt || '');\n    }\n};\n\n/**\n * Images are fixed width, no need to render.\n * @private\n */\nBlockly.FieldImage.prototype.render_ = function() {\n    // NOP\n};\n\n/**\n * Images are fixed width, no need to render even if forced.\n */\nBlockly.FieldImage.prototype.forceRerender = function() {\n    // NOP\n};\n\n/**\n * Images are fixed width, no need to update.\n * @private\n */\nBlockly.FieldImage.prototype.updateWidth = function() {\n    // NOP\n};\n\n/**\n * If field click is called, and click handler defined,\n * call the handler.\n */\nBlockly.FieldImage.prototype.showEditor_ = function() {\n    if (this.clickHandler_) {\n        this.clickHandler_(this);\n    }\n};\n\nBlockly.Field.register('field_image', Blockly.FieldImage);\n","/* eslint-disable no-underscore-dangle */\n/**\n * Create a copy of this block on the workspace.\n * @param {!Blockly.BlockSvg} originalBlock The block to copy from the flyout.\n * @return {Blockly.BlockSvg} The newly created block, or null if something\n *     went wrong with deserialization.\n * @package\n */\nBlockly.Flyout.prototype.createBlock = function(event, originalBlock) {\n    Blockly.Events.disable();\n\n    const variablesBeforeCreation = this.targetWorkspace_.getAllVariables();\n\n    this.targetWorkspace_.setResizesEnabled(false);\n\n    let newBlock = null;\n\n    try {\n        newBlock = this.placeNewBlock_(event, originalBlock);\n        // Close the flyout.\n        Blockly.hideChaff();\n    } finally {\n        Blockly.Events.enable();\n    }\n  \n    const newVariables = Blockly.Variables.getAddedVariables(this.targetWorkspace_, variablesBeforeCreation);\n  \n    if (Blockly.Events.isEnabled()) {\n        Blockly.Events.setGroup(true);\n        Blockly.Events.fire(new Blockly.Events.Create(newBlock));\n        // Fire a VarCreate event for each (if any) new variable created.\n        for (let i = 0; i < newVariables.length; i++) {\n            const thisVariable = newVariables[i];\n            Blockly.Events.fire(new Blockly.Events.VarCreate(thisVariable));\n        }\n    }\n\n    if (this.autoClose) {\n        this.hide();\n    }\n\n    Blockly.derivWorkspace.toolbox_.clearSelection();\n    newBlock.isInFlyout = false;\n\n    return newBlock;\n};\n\n/**\n * Copy a block from the flyout to the workspace and position it correctly.\n * @param {!Blockly.Block} oldBlock The flyout block to copy.\n * @return {!Blockly.Block} The new block in the main workspace.\n * @private\n */\nBlockly.Flyout.prototype.placeNewBlock_ = function(event, oldBlock) {\n    const targetWorkspace = this.targetWorkspace_;\n    const svgRootOld = oldBlock.getSvgRoot();\n\n    if (!svgRootOld) {\n        throw new Error('oldBlock is not rendered.');\n    }\n  \n    // Create the new block by cloning the block in the flyout (via XML).\n    const xml = Blockly.Xml.blockToDom(oldBlock);\n    // The target workspace would normally resize during domToBlock, which will\n    // lead to weird jumps.  Save it for terminateDrag.\n    targetWorkspace.setResizesEnabled(false);\n  \n    // Using domToBlock instead of domToWorkspace means that the new block will be\n    // placed at position (0, 0) in main workspace units.\n    const block = Blockly.Xml.domToBlock(xml, targetWorkspace);\n    const svgRootNew = block.getSvgRoot();\n\n    if (!svgRootNew) {\n        throw new Error('block is not rendered.');\n    }\n  \n    // The offset in pixels between the main workspace's origin and the upper left\n    // corner of the injection div.\n    const mainOffsetPixels = targetWorkspace.getOriginOffsetInPixels();\n  \n    // The offset in pixels between the flyout workspace's origin and the upper\n    // left corner of the injection div.\n    const flyoutOffsetPixels = this.workspace_.getOriginOffsetInPixels();\n  \n    // The position of the old block in pixels relative to the flyout\n    // workspace's origin.\n    const oldBlockPosPixels = new goog.math.Coordinate(event.clientX - 50 , event.clientY - 20);\n  \n    // The position of the old block in pixels relative to the upper left corner\n    // of the injection div.\n    const oldBlockOffsetPixels = goog.math.Coordinate.sum(flyoutOffsetPixels, oldBlockPosPixels);\n  \n    // The position of the old block in pixels relative to the origin of the\n    // main workspace.\n    const finalOffsetPixels = goog.math.Coordinate.difference(oldBlockOffsetPixels, mainOffsetPixels);\n  \n    // The position of the old block in main workspace coordinates.\n    const finalOffsetMainWs = finalOffsetPixels.scale(1 / targetWorkspace.scale);\n  \n    block.moveBy(finalOffsetMainWs.x, finalOffsetMainWs.y);\n    return block;\n};\n","/* eslint-disable no-underscore-dangle */\n/**\n * Update this gesture to record whether a block is being dragged from the\n * flyout. This function should be called on a mouse/touch move event the first time the\n * drag radius is exceeded.  It should be called no more than once per gesture.\n * If a block should be dragged from the flyout this function creates the new\n * block on the main workspace and updates targetBlock_ and startWorkspace_.\n * @return {boolean} True if a block is being dragged from the flyout.\n * @private\n */\nBlockly.Gesture.prototype.updateIsDraggingFromFlyout_ = function() {\n    // Disabled blocks may not be dragged from the flyout.\n    if (this.targetBlock_.disabled) {\n        return false;\n    }\n    \n    if (!this.flyout_.isScrollable() ||\n        this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)) {\n        this.startWorkspace_ = this.flyout_.targetWorkspace_;\n        this.startWorkspace_.updateScreenCalculationsIfScrolled();\n\n        // Start the event group now, so that the same event group is used for block\n        // creation and block dragging.\n        if (!Blockly.Events.getGroup()) {\n            Blockly.Events.setGroup(true);\n        }\n\n        // The start block is no longer relevant, because this is a drag.\n        this.startBlock_ = null;\n        this.targetBlock_ = this.flyout_.createBlock(this.mostRecentEvent_, this.targetBlock_);\n        this.targetBlock_.select();\n        return true;\n    }\n    return false;\n};\n","/* eslint-disable func-names, no-underscore-dangle */\n/**\n * Render the icon.\n * @param {number} cursorX Horizontal offset at which to position the icon.\n * @return {number} Horizontal offset for next item to draw.\n */\nBlockly.Icon.prototype.renderIcon = function(cursorX) {\n    if (this.collapseHidden && this.block_.isCollapsed()) {\n        this.iconGroup_.setAttribute('display', 'none');\n        return cursorX;\n    }\n\n    this.iconGroup_.setAttribute('display', 'block');\n\n    let newCursorX = cursorX;\n\n    const TOP_MARGIN = 9;\n    const width = this.SIZE;\n\n    if (this.block_.RTL) {\n        newCursorX -= width;\n    }\n\n    this.iconGroup_.setAttribute('transform', `translate(${newCursorX},${TOP_MARGIN})`);\n    this.computeIconLocation();\n\n    if (this.block_.RTL) {\n        newCursorX -= Blockly.BlockSvg.SEP_SPACE_X;\n    } else {\n        newCursorX += width + Blockly.BlockSvg.SEP_SPACE_X;\n    }\n\n    return newCursorX;\n};\n","/* eslint-disable func-names, no-underscore-dangle */\nimport { translate } from '../../utils/lang/i18n';\n\n/**\n * Construct the blocks required by the flyout for the procedure category.\n * @param {!Blockly.Workspace} workspace The workspace containing procedures.\n * @return {!Array.<!Element>} Array of XML block elements.\n */\nBlockly.Procedures.flyoutCategory = function(workspace) {\n    let xmlList = [];\n\n    if (Blockly.Blocks.procedures_defnoreturn) {\n        // <block type=\"procedures_defnoreturn\" gap=\"16\">\n        //     <field name=\"NAME\">do something</field>\n        // </block>\n        const block = document.createElement('block');\n        block.setAttribute('type', 'procedures_defnoreturn');\n        block.setAttribute('gap', 16);\n\n        // TEMP\n        const nameField = document.createElement('field');\n        nameField.setAttribute('name', 'NAME');\n        nameField.appendChild(document.createTextNode(translate('do something')));\n\n        block.appendChild(nameField);\n        xmlList.push(block);\n    }\n\n    if (Blockly.Blocks.procedures_defreturn) {\n        // <block type=\"procedures_defreturn\" gap=\"16\">\n        //     <field name=\"NAME\">do something</field>\n        // </block>\n        const block = document.createElement('block');\n        block.setAttribute('type', 'procedures_defreturn');\n        block.setAttribute('gap', 16);\n\n        const nameField = document.createElement('field');\n        nameField.setAttribute('name', 'NAME');\n        nameField.appendChild(document.createTextNode(translate('do something')));\n\n        block.appendChild(nameField);\n        xmlList.push(block);\n    }\n\n    if (Blockly.Blocks.procedures_ifreturn) {\n        // <block type=\"procedures_ifreturn\" gap=\"16\"></block>\n        const block = document.createElement('block');\n        block.setAttribute('type', 'procedures_ifreturn');\n        block.setAttribute('gap', 16);\n        xmlList.push(block);\n    }\n\n    if (xmlList.length) {\n        // Add slightly larger gap between system blocks and user calls.\n        xmlList[xmlList.length - 1].setAttribute('gap', 24);\n    }\n\n    const tuple = Blockly.Procedures.allProcedures(workspace);\n    xmlList = xmlList.concat(Blockly.Procedures.populateDynamicProcedures(tuple));\n    return xmlList;\n};\n\nBlockly.Procedures.populateDynamicProcedures = function(tuple) {\n    let xmlList = [];\n\n    const populateProcedures = (procedureList, templateName) => {\n        const xml = [];\n\n        if (!procedureList){\n            return xml;\n        }\n\n        for (let i = 0; i < procedureList.length; i++) {\n            const name = procedureList[i][0];\n            const args = procedureList[i][1];\n    \n            // <block type=\"procedures_callnoreturn\" gap=\"16\">\n            //   <mutation name=\"do something\">\n            //     <arg name=\"x\"></arg>\n            //   </mutation>\n            // </block>\n            const block = document.createElement('block');\n            block.setAttribute('type', templateName);\n            block.setAttribute('gap', 16);\n\n            const mutation = document.createElement('mutation');\n            mutation.setAttribute('name', name);\n            block.appendChild(mutation);\n    \n            args.forEach(argumentName => {\n                const arg = document.createElement('arg');\n                arg.setAttribute('name', argumentName);\n                mutation.appendChild(arg);\n            });\n    \n            xml.push(block);\n        }\n\n        return xml;\n    };\n\n    xmlList = xmlList.concat(populateProcedures(tuple[0], 'procedures_callnoreturn'));\n    xmlList = xmlList.concat(populateProcedures(tuple[1], 'procedures_callreturn'));\n\n    return xmlList;\n};\n\n/**\n * Find the definition block for the named procedure.\n * @param {string} name Name of procedure.\n * @param {!Blockly.Workspace} workspace The workspace to search.\n * @return {Blockly.Block} The procedure definition block, or null not found.\n */\nBlockly.Procedures.getDefinition = function(name, workspace) {\n    // Assume that a procedure definition is a top block.\n    const blocks = workspace.getTopBlocks(false);\n    for (let i = 0; i < blocks.length; i++) {\n        if (blocks[i].getProcedureDef) {\n            const tuple = blocks[i].getProcedureDef();\n            if (tuple && Blockly.Names.equals(tuple[0], name)) {\n                return blocks[i];\n            }\n        }\n    }\n    return null;\n};\n\n// Scratch has a broken version where they return `false` if Blockly.Names.equals(procName[0], name).\n// https://github.com/LLK/scratch-blocks/pull/1930\nBlockly.Procedures.isNameUsed = function(name, workspace, optExclude) {\n    const blocks = workspace.getAllBlocks(false);\n    // Iterate through every block and check the name.\n    return blocks.some(block => {\n        if (block !== optExclude && block.getProcedureDef) {\n            const procName = block.getProcedureDef();\n            return Blockly.Names.equals(procName[0], name);\n        }\n        return false;\n    });\n};\n\n/**\n * Move the workspace based on the most recent mouse movements.\n * @param {!goog.math.Coordinate} currentDragDeltaXY How far the pointer has\n *     moved from the position at the start of the drag, in pixel coordinates.\n * @package\n */\nBlockly.WorkspaceDragger.prototype.drag = function(currentDragDeltaXY) {\n    if (this.workspace_.isFlyout) {\n        return;\n    }\n\n    const metrics = this.startDragMetrics_;\n    const newXY = goog.math.Coordinate.sum(this.startScrollXY_, currentDragDeltaXY);\n\n    // Bound the new XY based on workspace bounds.\n    let x = Math.min(newXY.x, -metrics.contentLeft);\n    let y = Math.min(newXY.y, -metrics.contentTop);\n\n    x = Math.max(x, metrics.viewWidth - metrics.contentLeft - metrics.contentWidth);\n    y = Math.max(y, metrics.viewHeight - metrics.contentTop - metrics.contentHeight);\n\n    x = -x - metrics.contentLeft;\n    y = -y - metrics.contentTop;\n\n    this.updateScroll_(x, y);\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Arrow1Icon } from '../../components/Icons.jsx';\nimport { flyout }    from '../../stores';\nimport { translate } from '../../utils/lang/i18n';\n\n/* eslint-disable func-names, no-underscore-dangle */\n\n/**\n * Initializes the toolbox.\n */\nBlockly.Toolbox.prototype.init = function () {\n    const workspace = this.workspace_;\n    const svg = this.workspace_.getParentSvg();\n\n    /**\n     * HTML container for the Toolbox menu.\n     * @type {Element}\n     */\n    this.HtmlDiv = goog.dom.createDom(goog.dom.TagName.DIV, 'toolbox');\n    this.HtmlDiv.setAttribute('dir', workspace.RTL ? 'RTL' : 'LTR');\n\n    // deriv-bot: Create Toolbox header\n    const el_toolbox_header = goog.dom.createDom(goog.dom.TagName.DIV, 'toolbox__header');\n    const el_toolbox_title = goog.dom.createDom(goog.dom.TagName.DIV, 'toolbox__title');\n\n    el_toolbox_title.textContent = translate('Blocks Library');\n    el_toolbox_header.appendChild(el_toolbox_title);\n    this.HtmlDiv.appendChild(el_toolbox_header);\n\n    const el_toolbox_search = goog.dom.createDom(goog.dom.TagName.INPUT, { 'id': 'search_input', 'placeholder': 'Search' });\n\n    this.HtmlDiv.appendChild(el_toolbox_search);\n\n    ['keyup', 'click'].forEach(e => {\n        el_toolbox_search.addEventListener(e, () => {\n            const toolbox = workspace.toolbox_;\n    \n            flyout.setVisibility(false);\n    \n            toolbox.setSelectedItem('search');\n        });\n    });\n\n    svg.parentNode.insertBefore(this.HtmlDiv, svg);\n\n    // Clicking on toolbox closes popups.\n    Blockly.bindEventWithChecks_(this.HtmlDiv, 'mousedown', this, function (e) {\n        // Cancel any gestures in progress.\n        this.workspace_.cancelCurrentGesture();\n\n        if (Blockly.utils.isRightButton(e) || e.target === this.HtmlDiv) {\n            // Close flyout.\n            Blockly.hideChaff(false);\n        } else {\n            // Just close popups.\n            Blockly.hideChaff(true);\n        }\n        Blockly.Touch.clearTouchIdentifier();  // Don't block future drags.\n    }, /* opt_noCaptureIdentifier */ false, /* opt_noPreventDefault */ true);\n\n    this.createFlyout_();\n    this.categoryMenu_ = new Blockly.Toolbox.CategoryMenu(this, this.HtmlDiv);\n    this.populate_(workspace.options.languageTree);\n    this.position();\n};\n\n/**\n * Fill the toolbox with categories and blocks.\n * @param {!Node} newTree DOM tree of blocks.\n * @private\n * deriv-bot: We don't want to `showAll` or `setSelectedItem` here (like in Scratch)\n */\nBlockly.Toolbox.prototype.populate_ = function (newTree) {\n    this.categoryMenu_.populate(newTree);\n};\n\n/**\n * deriv-bot: Show blocks for a specific category in flyout\n * @private\n */\nBlockly.Toolbox.prototype.showCategory_ = function (category_id) {\n    let flyout_content;\n\n    if (category_id === 'search') {\n        let search_term = document.getElementById('search_input').value;\n        const all_variables = this.flyout_.workspace_.getVariablesOfType('');\n        const all_procedures = Blockly.Procedures.allProcedures(Blockly.derivWorkspace);\n\n        if (search_term.length <= 1) {\n            flyout.setVisibility(false);\n            return;\n        }\n\n        flyout_content = {\n            type  : 'search',\n            blocks: [],\n        };\n\n        if (typeof search_term === 'string') {\n            search_term = search_term.trim().toLowerCase();\n            search_term = search_term.split(' ');\n        }\n\n        const blocks = Blockly.Blocks;\n        Object.keys(blocks).forEach(blockKey => {\n            let keywords = ` ${blockKey}`;\n            const block = blocks[blockKey];\n            const block_meta = block.meta instanceof Function && block.meta();\n            const block_definition = block.definition instanceof Function && block.definition();\n\n            if (!block_meta) {\n                return;\n            }\n\n            Object.keys(block_meta).forEach(key => {\n                const meta = block_meta[key];\n                keywords += ` ${meta}`;\n            });\n\n            Object.keys(block_definition).forEach(key => {\n                const definition = block_definition[key];\n\n                if (typeof definition === 'string') {\n                    keywords += ` ${definition}`;\n                } else if (definition instanceof Array) {\n                    definition.forEach(def => {\n                        if (def instanceof Object) {\n                            keywords += !def.type.includes('image') ? ` ${JSON.stringify(def)}` : '';\n                        } else {\n                            keywords += ` ${def}`;\n                        }\n                    });\n                }\n            });\n\n            const block_category = (block_definition && block_definition.category) ||\n                                    (block_meta && block_meta.category);\n            const category =\n                this.categoryMenu_.categories_\n                    .find(menuCategory => menuCategory.id_ === block_category);\n            let contents = category && category.getContents();\n\n            if (typeof contents === 'string') {\n                const fnToApply = this.workspace_.getToolboxCategoryCallback(contents);\n                contents = fnToApply(this.workspace_);\n            }\n\n            if (contents) {\n                search_term.forEach(term => {\n                    if (keywords.toLowerCase().includes(term)) {\n                        const blockContents = contents\n                            .filter(content => content.attributes[0].nodeValue === blockKey);\n\n                        if (blockContents.length && flyout_content.blocks.indexOf(blockContents[0]) === -1) {\n                            flyout_content.blocks.push(blockContents[0]);\n                        }\n\n                    }\n                });\n            }\n        });\n\n        const searched_variables = [];\n        all_variables.forEach(variable => {\n            search_term.forEach(term => {\n                if (variable.name.toLowerCase().includes(term)) {\n                    searched_variables.push(variable);\n                }\n            });\n        });\n\n        const variables_blocks = Blockly.DataCategory.search(searched_variables);\n        /* eslint-disable-next-line consistent-return */\n        const uniqueVarBlocks = variables_blocks.map(variableBlock => {\n            if (flyout_content.blocks.indexOf(variableBlock) === -1){\n                return variableBlock;\n            }\n        });\n        flyout_content.blocks = flyout_content.blocks.concat(uniqueVarBlocks);\n\n        const searched_procedures = {};\n        Object.keys(all_procedures).forEach(key => {\n            search_term.forEach(term => {\n                if (all_procedures[key].length && all_procedures[key][0][0].toLowerCase().includes(term)) {\n                    searched_procedures[key] = all_procedures[key];\n                }\n            });\n        });\n\n        const procedures_blocks = Blockly.Procedures.populateDynamicProcedures(searched_procedures);\n        /* eslint-disable-next-line consistent-return */\n        const uniqueProceBlocks = procedures_blocks.map(procedureBlock => {\n            if (flyout_content.blocks.indexOf(procedureBlock) === -1){\n                return procedureBlock;\n            }\n        });\n        flyout_content.blocks = flyout_content.blocks.concat(uniqueProceBlocks);\n    } else {\n        const selected_category = this.categoryMenu_.categories_.find(category => category.id_ === category_id);\n        flyout_content = this.getCategoryContents(selected_category);\n    }\n\n    flyout.setContents(flyout_content);\n};\n\nBlockly.Toolbox.prototype.getCategoryContents = function(selected_category) {\n    let xml_list = selected_category.getContents();\n\n    // Dynamic categories\n    if (typeof xml_list === 'string') {\n        const fnToApply = this.workspace_.getToolboxCategoryCallback(xml_list);\n        xml_list = fnToApply(this.workspace_);\n    }\n\n    return xml_list;\n};\n\n/**\n * Used to determine the css classes for the menu item for this category\n * based on its current state.\n * @private\n * @param {boolean=} selected Indication whether the category is currently selected.\n * @return {string} The css class names to be applied, space-separated.\n * deriv-bot: Custom class names\n */\nBlockly.Toolbox.Category.prototype.getMenuItemClassName_ = function (selected) {\n    const classNames = ['toolbox__item', `toolbox__category--${this.id_}`];\n\n    if (selected) {\n        classNames.push('toolbox__category--selected');\n    }\n\n    return classNames.join(' ');\n};\n\n/**\n * Opens the selected category\n * deriv-bot: Category-specific flyouts + removed opt_shouldScroll\n * @param {Blockly.Toolbox.Category} item The category to select.\n * @param {boolean} should_close_on_same_category Close when select the same category\n */\nBlockly.Toolbox.prototype.setSelectedItem = function (item, should_close_on_same_category = true) {\n    const category_item = item;\n    if (category_item === 'search'){\n        if (this.selectedItem_) {\n            this.selectedItem_.setSelected(false);\n        }\n        this.selectedItem_ = null;\n        this.showCategory_('search');\n        return;\n    }\n\n    if (this.selectedItem_) {\n        // They selected a different category but one was already open.  Close it.\n        this.selectedItem_.setSelected(false);\n\n        // Selecting the same category will close it.\n        if (\n            item &&\n            !item.is_category_return_ &&\n            !item.has_child_category_ &&\n            this.selectedItem_.id_ === item.id_ &&\n            should_close_on_same_category\n        ) {\n            this.selectedItem_ = null;\n            if (flyout.is_visible) {\n                flyout.setVisibility(false);\n            }\n            return;\n        }\n    }\n\n    this.selectedItem_ = item;\n\n    if (!item) {\n        flyout.setVisibility(false);\n    } else {\n        const getCategoryTree = (parent_name, parent_id, colour, children) => {\n            const xml_document = document.implementation.createDocument(null, null, null);\n            const el_xml = xml_document.createElement('xml');\n            const parent_category = xml_document.createElement('category');\n\n            parent_category.setAttribute('name', parent_name);\n            parent_category.setAttribute('id', parent_id);\n            parent_category.setAttribute('is_category_return', true);\n            parent_category.setAttribute('colour', colour);\n\n            const el_separator = xml_document.createElement('sep');\n            const category_nodes = [\n                parent_category,\n                el_separator,\n                ...Array.from(children),\n            ];\n\n            category_nodes.forEach(childNode => el_xml.appendChild(childNode));\n            xml_document.appendChild(el_xml);\n            return el_xml;\n        };\n\n        if (this.selectedItem_.is_category_return_) {\n            // Go up a level if this is a return category\n            const findCategory = (category_collection) => {\n                // Finds a category based on `this.selectedItem_.id_` in the given `category_collection`\n                for (let i = 0; i < category_collection.length; i++) {\n                    const el_category = category_collection[i];\n                    const is_correct_child =\n                        el_category.tagName.toUpperCase() === 'CATEGORY' &&\n                        el_category.getAttribute('id') === this.selectedItem_.id_;\n\n                    if (is_correct_child) {\n                        return el_category;\n                    }\n\n                    const category = findCategory(el_category.children);\n                    if (category) {\n                        return category;\n                    }\n                }\n                return null;\n            };\n\n            const { initial_toolbox_xml } = this.workspace_;\n            const toolboxDom = Blockly.Xml.textToDom(initial_toolbox_xml);\n            const selected_category = findCategory(toolboxDom.children);\n\n            if (selected_category) {\n                const el_parent = selected_category.parentElement;\n\n                if (el_parent.tagName === 'xml') {\n                    flyout.setVisibility(false);\n                    this.workspace_.updateToolbox(initial_toolbox_xml);\n                } else {\n                    const newTree = getCategoryTree(\n                        el_parent.getAttribute('name'),\n                        el_parent.getAttribute('id'),\n                        el_parent.getAttribute('colour'),\n                        el_parent.children,\n                    );\n\n                    flyout.setVisibility(false);\n                    this.workspace_.updateToolbox(newTree);\n                }\n            }\n        } else if (this.selectedItem_.has_child_category_) {\n            // Show categories in toolbox that are descendants of `this.selectedItem_`\n            const newTree = getCategoryTree(\n                this.selectedItem_.name_,\n                this.selectedItem_.id_,\n                this.selectedItem_.colour_,\n                this.selectedItem_.contents_,\n            );\n\n            flyout.setVisibility(false);\n            this.workspace_.updateToolbox(newTree);\n        } else {\n            // Show blocks that belong to this category.\n            this.selectedItem_.setSelected(true);\n            this.showCategory_(this.selectedItem_.id_);\n        }\n    }\n};\n\n/**\n * Update the flyout's contents without closing it.  Should be used in response\n * to a change in one of the dynamic categories, such as variables or\n * procedures.\n * deriv-bot: Calls showAll() in Scratch, we don't want that.\n */\nBlockly.Toolbox.prototype.refreshSelection = function () {};\n\n/**\n * Create the DOM for a category in the toolbox.\n * deriv-bot: Custom class names + injection of description\n */\nBlockly.Toolbox.Category.prototype.createDom = function () {\n    const toolbox = this.parent_.parent_;\n    const el_item = goog.dom.createDom('div', this.getMenuItemClassName_());\n\n    this.item_ = el_item;\n\n    if (this.is_category_return_) {\n        const el_return_arrow = goog.dom.createDom('div', 'toolbox__category-arrow toolbox__category-arrow--back');\n        ReactDOM.render(<Arrow1Icon className='arrow' />, el_return_arrow);\n        el_item.appendChild(el_return_arrow);\n    } else {\n        const el_colour = goog.dom.createDom('div', 'toolbox__category-colour');\n        el_item.appendChild(el_colour);\n    }\n\n    const el_label = goog.dom.createDom('div', 'toolbox__label', this.name_);\n    const el_toolbox_text = goog.dom.createDom('div', 'toolbox__category-text');\n\n    this.label_ = el_label;\n    el_toolbox_text.appendChild(el_label);\n\n    if (this.description_) {\n        const el_description = goog.dom.createDom('div', 'toolbox__description', this.description_);\n        el_toolbox_text.appendChild(el_description);\n    }\n\n    el_item.appendChild(el_toolbox_text);\n\n    if (this.has_child_category_) {\n        const el_category_arrow = goog.dom.createDom('div', 'toolbox__category-arrow toolbox__category-arrow--open');\n        ReactDOM.render(<Arrow1Icon className='arrow' />, el_category_arrow);\n        el_item.appendChild(el_category_arrow);\n    } else if (this.iconURI_) {\n        // If category has iconURI attribute, it refers to an entry in our bot-sprite.svg\n        const el_icon = goog.dom.createDom('div', { class: 'toolbox__icon' });\n        // eslint-disable-next-line\n        el_icon.innerHTML = `<svg><use xlink:href=\"${__webpack_public_path__}bot-sprite.svg#${this.iconURI_}\"></use></svg>`;\n        el_item.appendChild(el_icon);\n    }\n\n    this.parentHtml_.appendChild(el_item);\n\n    Blockly.bindEvent_(el_item, 'mouseup', toolbox, toolbox.setSelectedItemFactory(this));\n};\n\n/**\n * Get the contents of this category.\n * @return {!Array|string} xmlList List of blocks to show, or a string with the\n * name of a custom category.\n * deriv-bot: Use this.dynamic_ rather than this.custom_ for dynamic categories\n * if we specify this.custom_, parseContents() is never called (see core/toolbox.js),\n * so we don't get extra props we require. See parseContents_\n */\nBlockly.Toolbox.Category.prototype.getContents = function () {\n    return this.custom_ || this.dynamic_ || this.contents_;\n};\n\n/**\n* Set the contents of this category from DOM.\n* @param {Node} domTree DOM tree of blocks.\n* @constructor\n* deriv-bot: Set some extra properties on the Blockly.Toolbox.Category\n*/\nBlockly.Toolbox.Category.prototype.parseContents_ = function (domTree) {\n    this.description_ = domTree.getAttribute('description');\n    this.dynamic_ = domTree.getAttribute('dynamic');\n    this.is_category_return_ = !!domTree.getAttribute('is_category_return');\n\n    domTree.childNodes.forEach(child => {\n        if (child.tagName) {\n            const tag = child.tagName.toUpperCase();\n\n            if (tag === 'CATEGORY') {\n                this.has_child_category_ = true;\n            }\n\n            switch (tag) {\n                case 'BLOCK':\n                case 'SHADOW':\n                case 'LABEL':\n                case 'BUTTON':\n                case 'SEP':\n                case 'TEXT':\n                case 'CATEGORY':\n                    this.contents_.push(child);\n                    break;\n                default:\n                    break;\n            }\n        }\n    });\n};\n\n/**\n * Set the colour of the category's background from a DOM node.\n * @param {Node} node DOM node with \"colour\" and \"secondaryColour\" attribute.\n *     Colours are a hex string or hue on a colour wheel (0-360).\n * deriv-bot: We don't need secondaryColour\n */\nBlockly.Toolbox.Category.prototype.setColour = function (node) {\n    const colour = node.getAttribute('colour');\n\n    if (goog.isString(colour)) {\n        if (colour.match(/^#[0-9a-fA-F]{6}$/)) {\n            this.colour_ = colour;\n        } else {\n            this.colour_ = Blockly.hueToRgb(colour);\n        }\n        this.hasColours_ = true;\n    } else {\n        this.colour_ = '#000000';\n    }\n};\n\n/**\n * Create the DOM for the category menu.\n * deriv-bot: Custom class names\n */\nBlockly.Toolbox.CategoryMenu.prototype.createDom = function () {\n    const className = this.parent_.horizontalLayout_ ?\n        'toolbox__horizontal-category-menu' :\n        'toolbox__category-menu';\n\n    this.table = goog.dom.createDom('div', className);\n    this.parentHtml_.appendChild(this.table);\n};\n\n/**\n * Fill the toolbox with categories and blocks by creating a new\n * {Blockly.Toolbox.Category} for every category tag in the toolbox xml.\n * @param {Node} domTree DOM tree of blocks, or null.\n */\nBlockly.Toolbox.CategoryMenu.prototype.populate = function (domTree, isSubCategory = false) {\n    if (!domTree) {\n        return;\n    }\n\n    // Remove old categories\n    if (!isSubCategory) {\n        this.dispose();\n        this.createDom();\n    }\n\n    domTree.childNodes.forEach(childNode => {\n        const is_category = () => childNode.tagName && childNode.tagName.toUpperCase() === 'CATEGORY';\n        const is_separator = () => childNode.tagName && childNode.tagName.toUpperCase() === 'SEP';\n\n        if (is_category()) {\n            const row_class = childNode.getAttribute('is_category_return') ?\n                'toolbox__category-return' :\n                'toolbox__row';\n            const el_row = goog.dom.createDom('div', { class: row_class });\n\n            // Convert xml web-class attributes to class attributes in el_row\n            const web_classes = childNode.getAttribute('web-class');\n            if (web_classes) {\n                web_classes.split(' ').forEach(className => el_row.classList.add(className));\n            }\n\n            const toolbox_category = new Blockly.Toolbox.Category(this, el_row, childNode);\n\n            const child = childNode.children;\n            /* eslint-disable consistent-return */\n            const subCategory = Object.keys(child).map(key => {\n                if (child[key].tagName === 'category') {\n                    return child[key];\n                }\n            });\n\n            if (subCategory.length) {\n                this.populate(childNode, true);\n            }\n\n            if (!isSubCategory) {\n                this.table.appendChild(el_row);\n            }\n            this.categories_.push(toolbox_category);\n        } else if (is_separator()) {\n            const el_separator = goog.dom.createDom('div', { class: 'toolbox__separator' });\n            this.table.appendChild(el_separator);\n        }\n    });\n\n    this.height_ = this.table.offsetHeight;\n};\n\nBlockly.Toolbox.prototype.refreshCategory = function() {\n    const category = this.getSelectedItem();\n\n    this.setSelectedItem(category, false);\n};\n","/* eslint-disable func-names */\n/**\n * Find all user-created variables that are in use in the workspace.\n * For use by generators.\n * To get a list of all variables on a workspace, including unused variables,\n * call Workspace.getAllVariables.\n * deriv-bot: Required for JS generator to work.\n * @param {!Blockly.Workspace} ws The workspace to search for variables.\n * @return {!Array.<!Blockly.VariableModel>} Array of variable models.\n */\nBlockly.Variables.allUsedVarModels = function(ws) {\n    const blocks = ws.getAllBlocks(false);\n    const variableHash = Object.create(null);\n\n    // Iterate through every block and add each variable to the hash.\n    blocks.forEach(block => {\n        const blockVariables = block.getVarModels();\n        if (blockVariables) {\n            blockVariables.forEach(blockVariable => {\n                const id = blockVariable.getId();\n                if (id) {\n                    variableHash[id] = blockVariable;\n                }\n            });\n        }\n    });\n\n    // Flatten the hash into a list.\n    const variableList = [];\n    Object.keys(variableHash).forEach(id => {\n        variableList.push(variableHash[id]);\n    });\n\n    return variableList;\n};\n","Blockly.WorkspaceAudio.prototype.preload = function () {};\n","/* eslint-disable */\n\n/**\n * Scroll the workspace to center on the given block.\n * @param {?string} id ID of block center on.\n * @public\n */\nBlockly.WorkspaceSvg.prototype.centerOnBlock = function(id, hideChaff = true) {\n    if (!this.scrollbar) {\n        console.warn('Tried to scroll a non-scrollable workspace.');\n        return;\n    }\n\n    var block = this.getBlockById(id);\n    if (!block) {\n        return;\n    }\n\n    // XY is in workspace coordinates.\n    var xy = block.getRelativeToSurfaceXY();\n    // Height/width is in workspace units.\n    var heightWidth = block.getHeightWidth();\n\n    // Find the enter of the block in workspace units.\n    var blockCenterY = xy.y + heightWidth.height / 2;\n\n    // In RTL the block's position is the top right of the block, not top left.\n    var multiplier = this.RTL ? -1 : 1;\n    var blockCenterX = xy.x + (multiplier * heightWidth.width / 2);\n\n    // Workspace scale, used to convert from workspace coordinates to pixels.\n    var scale = this.scale;\n\n    // Center in pixels.  0, 0 is at the workspace origin.  These numbers may\n    // be negative.\n    var pixelX = blockCenterX * scale;\n    var pixelY = blockCenterY * scale;\n\n    var metrics = this.getMetrics();\n\n    // Scrolling to here would put the block in the top-left corner of the\n    // visible workspace.\n    var scrollToBlockX = pixelX - metrics.contentLeft;\n    var scrollToBlockY = pixelY - metrics.contentTop;\n\n    // viewHeight and viewWidth are in pixels.\n    var halfViewWidth = metrics.viewWidth / 2;\n    var halfViewHeight = metrics.viewHeight / 2;\n\n    // Put the block in the center of the visible workspace instead.\n    var scrollToCenterX = scrollToBlockX - halfViewWidth;\n    var scrollToCenterY = scrollToBlockY - halfViewHeight;\n\n    if (hideChaff) {\n        Blockly.hideChaff();\n    }\n\n    this.scrollbar.set(scrollToCenterX, scrollToCenterY);\n};\n\n/**\n * Creates a copy of passed block_node on main workspace and positions it\n * below the lowest block on the canvas.\n * @static\n * @param {Element} block_node\n * @public\n */\nBlockly.WorkspaceSvg.prototype.addBlockNode = function (block_node) {\n    const block = Blockly.Xml.domToBlock(block_node, this);\n    const top_blocks = this.getTopBlocks(true);\n\n    if (top_blocks.length) {\n        const last_block = top_blocks[top_blocks.length - 1];\n        const last_block_xy = last_block.getRelativeToSurfaceXY();\n        const extra_spacing = (last_block.startHat_ ? Blockly.BlockSvg.START_HAT_HEIGHT : 0);\n        const y = last_block_xy.y + last_block.getHeightWidth().height + extra_spacing + 30;\n\n        block.moveBy(last_block_xy.x, y);\n    }\n\n    if (/^procedures_/.test(block_node.getAttribute('type'))) {\n        const toolbox = this.toolbox_;\n        toolbox.refreshCategory();\n    }\n\n    this.centerOnBlock(block.id, false);\n}\n\nBlockly.WorkspaceSvg.prototype.reshowFlyout = function () {\n    const toolbox = this.toolbox_;\n    toolbox.refreshCategory();\n}\n","Blockly.Xml.NODE_BLOCK  = 'BLOCK';\nBlockly.Xml.NODE_BUTTON = 'BUTTON';\nBlockly.Xml.NODE_LABEL  = 'LABEL';\nBlockly.Xml.NODE_SHADOW = 'SHADOW';\n","import './blocks';\nimport './hooks';\nimport {\n    isMainBlock,\n    save,\n    disable,\n    addLoadersFirst,\n    cleanUpOnLoad,\n    addDomAsBlock,\n    backwardCompatibility,\n    fixCollapsedBlocks,\n    fixArgumentAttribute,\n    removeUnavailableMarkets,\n    strategyHasValidTradeTypeCategory,\n    cleanBeforeExport,\n}                                         from './utils';\nimport { showDialog }                     from '../services/tradeEngine/utils/helpers';\nimport Interpreter                        from '../services/tradeEngine/utils/interpreter';\nimport GTM                                from '../utils/gtm';\nimport createError                        from '../utils/error';\nimport { translate, xml as translateXml } from '../utils/lang/i18n';\nimport { getLanguage }                    from '../utils/lang/lang';\nimport { observer as globalObserver }     from '../utils/observer';\n\nexport const scratchWorkspaceInit = async (scratch_area_name, scratch_div_name) => {\n    try {\n        const el_scratch_area = document.getElementById(scratch_area_name);\n        const el_scratch_div = document.getElementById(scratch_div_name);\n        const el_app_contents = document.getElementById('app_contents');\n\n        // eslint-disable-next-line\n        const toolbox_xml = await fetch(`${__webpack_public_path__}xml/toolbox.xml`).then(response => response.text());\n        // eslint-disable-next-line\n        const main_xml = await fetch(`${__webpack_public_path__}xml/main.xml`).then(response => response.text());\n\n        const workspace = Blockly.inject(el_scratch_div, {\n            grid    : { spacing: 40, length: 11, colour: '#ebebeb' },\n            media   : `${__webpack_public_path__}media/`, // eslint-disable-line\n            toolbox : toolbox_xml,\n            trashcan: true,\n            zoom    : { wheel: true },\n        });\n\n        Blockly.derivWorkspace = workspace;\n\n        // Ensure flyout closes on click in workspace.\n        const el_blockly_svg = document.querySelector('.blocklySvg');\n        document.addEventListener('click', (event) => {\n            if (el_blockly_svg.contains(event.target)) {\n                Blockly.derivWorkspace.toolbox_.clearSelection(); // eslint-disable-line\n            }\n        });\n\n        // Keep XML in memory to allow multilevel categories\n        Blockly.derivWorkspace.initial_toolbox_xml = toolbox_xml;\n        Blockly.Xml.domToWorkspace(Blockly.Xml.textToDom(main_xml), Blockly.derivWorkspace);\n\n        const onWorkspaceResize = () => {\n            let element = el_scratch_area;\n            let x = 0;\n            let y = 0;\n        \n            do {\n                x += element.offsetLeft;\n                y += element.offsetTop;\n                element = element.offsetParent;\n            } while (element);\n        \n            // Position scratch_div over scratch_area.\n            el_scratch_div.style.left   = `${x}px`;\n            el_scratch_div.style.top    = `${y}px`;\n            el_scratch_div.style.width  = `${el_app_contents.offsetWidth}px`;\n            el_scratch_div.style.height = `${el_app_contents.offsetHeight}px`;\n            \n            Blockly.svgResize(workspace);\n\n            // eslint-disable-next-line no-underscore-dangle\n            workspace.toolbox_.flyout_.position();\n            \n            // Center on first root block, if applicable.\n            const top_blocks = workspace.getTopBlocks(true);\n\n            if (top_blocks.length > 0) {\n                workspace.centerOnBlock(top_blocks[0].id);\n            }\n        };\n\n        window.addEventListener('resize', onWorkspaceResize);\n        onWorkspaceResize();\n    } catch (error) {\n        // TODO: Handle error.\n        throw error;\n    }\n};\n\nconst setBeforeUnload = off => {\n    if (off) {\n        window.onbeforeunload = null;\n    } else {\n        window.onbeforeunload = () => 'You have some unsaved blocks, do you want to save them before you exit?';\n    }\n};\n\nconst disableStrayBlocks = () => {\n    const topBlocks = Blockly.mainWorkspace.getTopBlocks();\n    topBlocks.forEach(block => {\n        if (\n            !isMainBlock(block.type) &&\n            ['block_holder', 'tick_analysis', 'loader', 'procedures_defreturn', 'procedures_defnoreturn'].indexOf(\n                block.type\n            ) < 0 &&\n            !block.disabled\n        ) {\n            disable(block, translate('Blocks must be inside block holders, main blocks or functions'));\n        }\n    });\n};\n\nconst marketsWereRemoved = xml => {\n    if (!Array.from(xml.children).every(block => !removeUnavailableMarkets(block))) {\n        if (window.trackJs) {\n            trackJs.track('Invalid financial market');\n        }\n        showDialog({\n            title  : translate('Warning'),\n            text   : [translate('This strategy is not available in your country.')],\n            buttons: [\n                {\n                    text : translate('OK'),\n                    class: 'button-primary',\n                    click() {\n                        $(this).dialog('close');\n                    },\n                },\n            ],\n        })\n            .then(() => {})\n            .catch(() => {});\n        return true;\n    }\n    return false;\n};\n\nexport const loadWorkspace = xml => {\n    if (!strategyHasValidTradeTypeCategory(xml)) return;\n    if (marketsWereRemoved(xml)) return;\n\n    Blockly.Events.setGroup('load');\n    Blockly.mainWorkspace.clear();\n\n    Array.from(xml.children).forEach(block => {\n        backwardCompatibility(block);\n    });\n\n    fixArgumentAttribute(xml);\n    Blockly.Xml.domToWorkspace(xml, Blockly.mainWorkspace);\n    addLoadersFirst(xml).then(\n        () => {\n            fixCollapsedBlocks();\n            Blockly.Events.setGroup(false);\n            globalObserver.emit('ui.log.success', translate('Blocks are loaded successfully'));\n        },\n        e => {\n            Blockly.Events.setGroup(false);\n            throw e;\n        }\n    );\n};\n\nexport const loadBlocks = (xml, dropEvent = {}) => {\n    if (!strategyHasValidTradeTypeCategory(xml)) return;\n    if (marketsWereRemoved(xml)) return;\n\n    const variables = xml.getElementsByTagName('variables');\n    if (variables.length > 0) {\n        Blockly.Xml.domToVariables(variables[0], Blockly.mainWorkspace);\n    }\n    Blockly.Events.setGroup('load');\n    addLoadersFirst(xml).then(\n        loaders => {\n            const addedBlocks = [\n                ...loaders,\n                ...Array.from(xml.children)\n                    .map(block => addDomAsBlock(block))\n                    .filter(b => b),\n            ];\n            cleanUpOnLoad(addedBlocks, dropEvent);\n            fixCollapsedBlocks();\n            globalObserver.emit('ui.log.success', translate('Blocks are loaded successfully'));\n        },\n        e => {\n            throw e;\n        }\n    );\n};\n\nconst xmlToStr = xml => {\n    const serializer = new XMLSerializer();\n    return serializer.serializeToString(xml);\n};\n\nconst addBlocklyTranslation = () => {\n    $.ajaxPrefilter(options => {\n        options.async = true; // eslint-disable-line no-param-reassign\n    });\n    let lang = getLanguage();\n    if (lang === 'ach') {\n        lang = 'en';\n    } else if (lang === 'zh_cn') {\n        lang = 'zh-hans';\n    } else if (lang === 'zh_tw') {\n        lang = 'zh-hant';\n    }\n    return new Promise(resolve => {\n        $.getScript(`translations/${lang}.js`, resolve);\n    });\n};\n\nconst onresize = () => {\n    let element = document.getElementById('blocklyArea');\n    const blocklyArea = element;\n    const blocklyDiv = document.getElementById('blocklyDiv');\n    let x = 0;\n    let y = 0;\n    do {\n        x += element.offsetLeft;\n        y += element.offsetTop;\n        element = element.offsetParent;\n    } while (element);\n    // Position blocklyDiv over blocklyArea.\n    blocklyDiv.style.left = `${x}px`;\n    blocklyDiv.style.top = `${y}px`;\n    blocklyDiv.style.width = `${blocklyArea.offsetWidth}px`;\n    blocklyDiv.style.height = `${blocklyArea.offsetHeight}px`;\n};\n\nconst render = workspace => () => {\n    onresize();\n    Blockly.svgResize(workspace);\n};\n\nconst overrideBlocklyDefaultShape = () => {\n    const addDownloadToMenu = block => {\n        if (block instanceof Object) {\n            // eslint-disable-next-line no-param-reassign, max-len\n            block.customContextMenu = function(options) {\n                options.push({\n                    text    : translate('Download'),\n                    enabled : true,\n                    callback: () => {\n                        const xml = Blockly.Xml.textToDom(\n                            '<xml xmlns=\"http://www.w3.org/1999/xhtml\" collection=\"false\"></xml>'\n                        );\n                        xml.appendChild(Blockly.Xml.blockToDom(this));\n                        save('deriv-bot-block', true, xml);\n                    },\n                });\n            };\n        }\n    };\n    Object.keys(Blockly.Blocks).forEach(blockName => {\n        const downloadDisabledBlocks = ['controls_forEach', 'controls_for', 'variables_get', 'variables_set'];\n        if (!downloadDisabledBlocks.includes(blockName)) {\n            addDownloadToMenu(Blockly.Blocks[blockName]);\n        }\n    });\n};\n\nconst repaintDefaultColours = () => {\n    Blockly.Msg.LOGIC_HUE = '#DEDEDE';\n    Blockly.Msg.LOOPS_HUE = '#DEDEDE';\n    Blockly.Msg.MATH_HUE = '#DEDEDE';\n    Blockly.Msg.TEXTS_HUE = '#DEDEDE';\n    Blockly.Msg.LISTS_HUE = '#DEDEDE';\n    Blockly.Msg.COLOUR_HUE = '#DEDEDE';\n    Blockly.Msg.VARIABLES_HUE = '#DEDEDE';\n    Blockly.Msg.VARIABLES_DYNAMIC_HUE = '#DEDEDE';\n    Blockly.Msg.PROCEDURES_HUE = '#DEDEDE';\n\n    // Blockly.Blocks.logic.HUE = '#DEDEDE';\n    // Blockly.Blocks.loops.HUE = '#DEDEDE';\n    // Blockly.Blocks.math.HUE = '#DEDEDE';\n    // Blockly.Blocks.texts.HUE = '#DEDEDE';\n    // Blockly.Blocks.lists.HUE = '#DEDEDE';\n    // Blockly.Blocks.colour.HUE = '#DEDEDE';\n    // Blockly.Blocks.variables.HUE = '#DEDEDE';\n    // Blockly.Blocks.procedures.HUE = '#DEDEDE';\n};\n\nexport default class _Blockly {\n    constructor() {\n        this.blocksXmlStr = '';\n        this.generatedJs = '';\n        // eslint-disable-next-line no-underscore-dangle\n        // Blockly.WorkspaceSvg.prototype.preloadAudio_ = () => {}; // https://github.com/google/blockly/issues/299\n        this.initPromise = new Promise(resolve => {\n            $.get('xml/toolbox.xml', toolboxXml => {\n                const workspace = Blockly.inject('blocklyDiv', {\n                    toolbox: xmlToStr(translateXml(toolboxXml.getElementsByTagName('xml')[0])),\n                    zoom   : {\n                        wheel     : true,\n                        startScale: 1.1,\n                    },\n                    trashcan  : true,\n                    scrollbars: true,\n                    media     : 'image/scratch/',\n                });\n                workspace.addChangeListener(event => {\n                    if (event.type === Blockly.Events.BLOCK_CREATE) {\n                        event.ids.forEach(id => {\n                            const block = workspace.getBlockById(id);\n                            if (block) {\n                                GTM.pushDataLayer({\n                                    event     : 'Block Event',\n                                    blockEvent: event.type,\n                                    blockType : block.type,\n                                });\n                            }\n                        });\n                    } else if (event.type === Blockly.Events.BLOCK_DELETE) {\n                        const dom = Blockly.Xml.textToDom(`<xml>${event.oldXml.outerHTML}</xml>`);\n                        const blockNodes = dom.getElementsByTagName('block');\n                        Array.from(blockNodes).forEach(blockNode => {\n                            GTM.pushDataLayer({\n                                event     : 'Block Event',\n                                blockEvent: event.type,\n                                blockType : blockNode.getAttribute('type'),\n                            });\n                        });\n                    }\n                });\n\n                const renderInstance = render(workspace);\n                window.addEventListener('resize', renderInstance, false);\n                renderInstance();\n                addBlocklyTranslation().then(() => {\n                    $.get('xml/main.xml', main => {\n                        repaintDefaultColours();\n                        overrideBlocklyDefaultShape();\n                        this.blocksXmlStr = Blockly.Xml.domToPrettyText(main);\n                        Blockly.Xml.domToWorkspace(main.getElementsByTagName('xml')[0], workspace);\n                        this.zoomOnPlusMinus();\n                        setTimeout(() => {\n                            setBeforeUnload(true);\n                            Blockly.mainWorkspace.cleanUp();\n                            Blockly.mainWorkspace.clearUndo();\n                        }, 0);\n                        resolve();\n                    });\n                });\n            });\n        });\n    }\n\n    /* eslint-disable class-methods-use-this */\n    zoomOnPlusMinus(zoomIn) {\n        const metrics = Blockly.mainWorkspace.getMetrics();\n        if (zoomIn) {\n            Blockly.mainWorkspace.zoom(metrics.viewWidth / 2, metrics.viewHeight / 2, 1);\n        } else {\n            Blockly.mainWorkspace.zoom(metrics.viewWidth / 2, metrics.viewHeight / 2, -1);\n        }\n    }\n\n    resetWorkspace() {\n        Blockly.Events.setGroup('reset');\n        Blockly.mainWorkspace.clear();\n        Blockly.Xml.domToWorkspace(Blockly.Xml.textToDom(this.blocksXmlStr), Blockly.mainWorkspace);\n        Blockly.Events.setGroup(false);\n    }\n\n    /* eslint-disable class-methods-use-this */\n    cleanUp() {\n        Blockly.Events.setGroup(true);\n        const topBlocks = Blockly.mainWorkspace.getTopBlocks(true);\n        let cursorY = 0;\n        topBlocks.forEach(block => {\n            if (block.getSvgRoot().style.display !== 'none') {\n                const xy = block.getRelativeToSurfaceXY();\n                block.moveBy(-xy.x, cursorY - xy.y);\n                block.snapToGrid();\n                cursorY =\n                    block.getRelativeToSurfaceXY().y + block.getHeightWidth().height + Blockly.BlockSvg.MIN_BLOCK_Y;\n            }\n        });\n        Blockly.Events.setGroup(false);\n        // Fire an event to allow scrollbars to resize.\n        Blockly.mainWorkspace.resizeContents();\n    }\n\n    /* eslint-disable class-methods-use-this */\n    load(blockStr = '', dropEvent = {}) {\n        let xml;\n\n        try {\n            xml = Blockly.Xml.textToDom(blockStr);\n        } catch (e) {\n            throw createError('FileLoad', translate('Unrecognized file format'));\n        }\n\n        try {\n            if (xml.hasAttribute('collection') && xml.getAttribute('collection') === 'true') {\n                loadBlocks(xml, dropEvent);\n            } else {\n                loadWorkspace(xml);\n            }\n        } catch (e) {\n            throw createError('FileLoad', translate('Unable to load the block file'));\n        }\n    }\n\n    /* eslint-disable class-methods-use-this */\n    save(arg) {\n        const { filename, collection } = arg;\n\n        setBeforeUnload(true);\n\n        const xml = Blockly.Xml.workspaceToDom(Blockly.mainWorkspace);\n        cleanBeforeExport(xml);\n\n        save(filename, collection, xml);\n    }\n\n    run(limitations = {}) {\n        disableStrayBlocks();\n\n        let code;\n        try {\n            code = `\nvar BinaryBotPrivateInit, BinaryBotPrivateStart, BinaryBotPrivateBeforePurchase, BinaryBotPrivateDuringPurchase, BinaryBotPrivateAfterPurchase;\nvar BinaryBotPrivateLastTickTime\nvar BinaryBotPrivateTickAnalysisList = [];\nfunction BinaryBotPrivateRun(f, arg) {\n if (f) return f(arg);\n return false;\n}\nfunction BinaryBotPrivateTickAnalysis() {\n var currentTickTime = Bot.getLastTick(true).epoch\n if (currentTickTime === BinaryBotPrivateLastTickTime) {\n   return\n }\n BinaryBotPrivateLastTickTime = currentTickTime\n for (var BinaryBotPrivateI = 0; BinaryBotPrivateI < BinaryBotPrivateTickAnalysisList.length; BinaryBotPrivateI++) {\n   BinaryBotPrivateRun(BinaryBotPrivateTickAnalysisList[BinaryBotPrivateI]);\n }\n}\nvar BinaryBotPrivateLimitations = ${JSON.stringify(limitations)};\n${Blockly.JavaScript.workspaceToCode(Blockly.mainWorkspace)}\nBinaryBotPrivateRun(BinaryBotPrivateInit);\nwhile(true) {\n BinaryBotPrivateTickAnalysis();\n BinaryBotPrivateRun(BinaryBotPrivateStart)\n while(watch('before')) {\n   BinaryBotPrivateTickAnalysis();\n   BinaryBotPrivateRun(BinaryBotPrivateBeforePurchase);\n }\n while(watch('during')) {\n   BinaryBotPrivateTickAnalysis();\n   BinaryBotPrivateRun(BinaryBotPrivateDuringPurchase);\n }\n BinaryBotPrivateTickAnalysis();\n if(!BinaryBotPrivateRun(BinaryBotPrivateAfterPurchase)) {\n   break;\n }\n}\n       `;\n            this.generatedJs = code;\n            if (code) {\n                this.stop(true);\n                this.interpreter = new Interpreter();\n                this.interpreter.run(code).catch(e => {\n                    globalObserver.emit('Error', e);\n                    this.stop();\n                });\n            }\n        } catch (e) {\n            globalObserver.emit('Error', e);\n            this.stop();\n        }\n    }\n\n    stop(stopBeforeStart) {\n        if (!stopBeforeStart) {\n            const $runButtons = $('#runButton, #summaryRunButton');\n            const $stopButtons = $('#stopButton, #summaryStopButton');\n            if ($runButtons.is(':visible') || $stopButtons.is(':visible')) {\n                $runButtons.show();\n                $stopButtons.hide();\n            }\n        }\n        if (this.interpreter) {\n            this.interpreter.stop();\n            this.interpreter = null;\n        }\n    }\n\n    /* eslint-disable class-methods-use-this */\n    undo() {\n        Blockly.Events.setGroup('undo');\n        Blockly.mainWorkspace.undo();\n        Blockly.Events.setGroup(false);\n    }\n\n    /* eslint-disable class-methods-use-this */\n    redo() {\n        Blockly.mainWorkspace.undo(true);\n    }\n\n    /* eslint-disable class-methods-use-this */\n    hasStarted() {\n        return this.interpreter && this.interpreter.hasStarted();\n    }\n    /* eslint-enable */\n}\n","import filesaver                         from 'file-saver';\nimport { oppositesToDropdown }           from './utils';\nimport config                            from '../constants/const';\nimport { generateLiveApiInstance }       from '../services/api/appId';\nimport { symbolApi }                     from '../services/api/shared';\nimport { translate }                     from '../utils/lang/i18n';\nimport { observer as globalObserver }    from '../utils/observer';\nimport { getTokenList, removeAllTokens } from '../utils/tokenHelper';\n\nlet purchaseChoices = [[translate('Click to select'), '']];\n\nexport const saveAs = ({ data, filename, type }) => {\n    const blob = new Blob([data], { type });\n    filesaver.saveAs(blob, filename);\n};\n\nexport const getPurchaseChoices = () => purchaseChoices;\n\nconst filterPurchaseChoices = (contractType, oppositesName) => {\n    const { [oppositesName]: tradeTypes } = config.opposites;\n\n    let tmpPurchaseChoices = tradeTypes.filter(k =>\n        contractType === 'both' ? true : contractType === Object.keys(k)[0]\n    );\n\n    if (!tmpPurchaseChoices.length) {\n        tmpPurchaseChoices = tradeTypes;\n    }\n    return oppositesToDropdown(tmpPurchaseChoices);\n};\n\nexport const updatePurchaseChoices = (contractType, oppositesName) => {\n    purchaseChoices = filterPurchaseChoices(contractType, oppositesName);\n    const purchases = Blockly.mainWorkspace\n        .getAllBlocks()\n        .filter(r => ['purchase', 'payout', 'ask_price'].indexOf(r.type) >= 0);\n    Blockly.Events.recordUndo = false;\n    purchases.forEach(purchase => {\n        const value = purchase.getField('PURCHASE_LIST').getValue();\n        Blockly.WidgetDiv.hideIfOwner(purchase.getField('PURCHASE_LIST'));\n        if (value === purchaseChoices[0][1]) {\n            purchase.getField('PURCHASE_LIST').setText(purchaseChoices[0][0]);\n        } else if (purchaseChoices.length === 2 && value === purchaseChoices[1][1]) {\n            purchase.getField('PURCHASE_LIST').setText(purchaseChoices[1][0]);\n        } else {\n            purchase.getField('PURCHASE_LIST').setValue(purchaseChoices[0][1]);\n            purchase.getField('PURCHASE_LIST').setText(purchaseChoices[0][0]);\n        }\n    });\n    Blockly.Events.recordUndo = true;\n};\n\nexport const expectValue = (block, field) => {\n    const value = Blockly.JavaScript.valueToCode(block, field, Blockly.JavaScript.ORDER_ATOMIC);\n    if (!value) {\n        throw Error(translate(`${field} cannot be empty`));\n    }\n    return value;\n};\n\nexport const fieldGeneratorMapping = {};\n\nconst getActiveSymbols = symbols =>\n    Object.keys(symbols).reduce(\n        (acc, symbol) =>\n            symbolApi.getAllowedCategories(symbol).length ? { ...acc, [symbol]: symbols[symbol] } : { ...acc },\n        {}\n    );\n\nconst getActiveSubMarket = submarkets =>\n    Object.keys(submarkets).reduce(\n        (acc, submarket) =>\n            Object.keys(getActiveSymbols(submarkets[submarket].symbols)).length\n                ? { ...acc, [submarket]: submarkets[submarket] }\n                : { ...acc },\n        {}\n    );\n\nconst getActiveMarket = markets =>\n    Object.keys(markets).reduce(\n        (acc, market) =>\n            Object.keys(getActiveSubMarket(markets[market].submarkets)).length\n                ? { ...acc, [market]: markets[market] }\n                : { ...acc },\n        {}\n    );\n\n/* eslint-disable no-unreachable */\nfieldGeneratorMapping.MARKET_LIST = () => {\n    return [['', '']];\n    const markets = getActiveMarket(symbolApi.activeSymbols.getMarkets());\n    return Object.keys(markets).map(e => [markets[e].name, e]);\n};\n\nfieldGeneratorMapping.SUBMARKET_LIST = block => () => {\n    return [['', '']];\n    const markets = getActiveMarket(symbolApi.activeSymbols.getMarkets());\n    const marketName = block.getFieldValue('MARKET_LIST');\n    if (!marketName || marketName === 'Invalid') {\n        return [['', 'Invalid']];\n    }\n    const submarkets = getActiveSubMarket(markets[marketName].submarkets);\n    return (\n        Object.keys(submarkets)\n            .map(e => [submarkets[e].name, e])\n            // Filter out markets we don't have contracts for\n            .filter(submarket => !['energy'].includes(submarket[1]))\n    );\n};\n\nfieldGeneratorMapping.SYMBOL_LIST = block => () => {\n    return [['', '']];\n    const markets = getActiveMarket(symbolApi.activeSymbols.getMarkets());\n    const submarketName = block.getFieldValue('SUBMARKET_LIST');\n    if (!submarketName || submarketName === 'Invalid') {\n        return [['', '']];\n    }\n    const marketName = block.getFieldValue('MARKET_LIST');\n    const submarkets = getActiveSubMarket(markets[marketName].submarkets);\n    const symbols = getActiveSymbols(submarkets[submarketName].symbols);\n    return (\n        Object.keys(symbols)\n            .map(e => [symbols[e].display, symbols[e].symbol])\n            // Filter out symbols we don't have contracts for (these symbols have only forward-starting)\n            .filter(symbol => !['frxGBPNOK', 'frxUSDNOK', 'frxUSDNEK', 'frxUSDSEK'].includes(symbol[1]))\n    );\n};\n/* eslint-enable */\n\nfieldGeneratorMapping.TRADETYPECAT_LIST = block => () => {\n    const symbol = block.getFieldValue('SYMBOL_LIST');\n    if (!symbol) {\n        return [['', '']];\n    }\n    const allowedCategories = symbolApi.getAllowedCategories(symbol.toLowerCase());\n    return Object.keys(config.conditionsCategoryName)\n        .filter(e => allowedCategories.indexOf(e) >= 0)\n        .map(e => [config.conditionsCategoryName[e], e]);\n};\n\nfieldGeneratorMapping.TRADETYPE_LIST = block => () => {\n    const tradeTypeCat = block.getFieldValue('TRADETYPECAT_LIST');\n    if (!tradeTypeCat) {\n        return [['', '']];\n    }\n    return (\n        config.conditionsCategory[tradeTypeCat]\n            .map(e => [config.opposites[e.toUpperCase()].map(c => c[Object.keys(c)[0]]).join('/'), e])\n            // Filter out trade types we don't offer\n            .filter(\n                tradeType => !(block.getFieldValue('SUBMARKET_LIST') === 'smart_fx' && tradeType[1] === 'higherlower')\n            )\n    );\n};\n\nexport const dependentFieldMapping = {\n    MARKET_LIST      : 'SUBMARKET_LIST',\n    SUBMARKET_LIST   : 'SYMBOL_LIST',\n    SYMBOL_LIST      : 'TRADETYPECAT_LIST',\n    TRADETYPECAT_LIST: 'TRADETYPE_LIST',\n};\n\nconst contractsForStore = JSON.parse(localStorage.getItem('contractsForStore') || '[]');\n\nconst getContractCategory = input =>\n    Object.keys(config.conditionsCategory).find(c => c === input || config.conditionsCategory[c].includes(input));\n\nconst matchesBarrierCategory = (contract, contractCategory) => {\n    const conditions = [];\n    Object.keys(config.barrierCategories).some(barrierCategory => {\n        if (config.barrierCategories[barrierCategory].includes(contractCategory)) {\n            conditions.push(contract.barrier_category === barrierCategory);\n        }\n        return conditions.length;\n    });\n    // If `barrierCategory` for `contractCategory` not found fallback to all contracts\n    return !conditions.includes(false);\n};\n\nconst filterContractsByCategory = (contracts, contractCategory, contractType) => {\n    if (!contracts) return [];\n    return contracts.filter(contract => {\n        // We don't offer forward-starting contracts in deriv-bot, remove these\n        if (contract.start_type === 'forward') {\n            return false;\n        }\n        return contract.contract_category === contractCategory && matchesBarrierCategory(contract, contractType);\n    });\n};\n\nexport const getDurationsForContracts = (contractsAvailable, selectedContractType) => {\n    const defaultDurations = [\n        [translate('Ticks'), 't'],\n        [translate('Seconds'), 's'],\n        [translate('Minutes'), 'm'],\n        [translate('Hours'), 'h'],\n        [translate('Days'), 'd'],\n    ];\n    const noDurationsAvailable = [{ label: translate('Not available'), unit: 'na', minimum: 0 }];\n    if (!contractsAvailable) return noDurationsAvailable;\n\n    const getMinimumAmount = input => input.replace(/\\D/g, '');\n    const getDurationIndex = input => defaultDurations.findIndex(d => d[1] === input.replace(/\\d+/g, ''));\n\n    const offeredDurations = [];\n\n    const contractsForContractCategory = filterContractsByCategory(\n        contractsAvailable,\n        getContractCategory(selectedContractType),\n        selectedContractType\n    );\n    contractsForContractCategory.forEach(c => {\n        if (!c.min_contract_duration || !c.max_contract_duration) return;\n\n        const startIndex = getDurationIndex(c.min_contract_duration);\n        const endIndex = getDurationIndex(c.max_contract_duration === '1d' ? '24h' : c.max_contract_duration);\n\n        defaultDurations.slice(startIndex, endIndex + 1).forEach((duration, index) => {\n            if (!offeredDurations.find(offeredDuration => offeredDuration.unit === duration[1])) {\n                offeredDurations.push({\n                    label  : duration[0],\n                    unit   : duration[1],\n                    minimum: index === 0 ? getMinimumAmount(c.min_contract_duration) : 1,\n                });\n            }\n        });\n    });\n    // If only intraday contracts available remove day-durations\n    if (contractsForContractCategory.every(c => c.expiry_type === 'intraday')) {\n        const dayDurationIndex = offeredDurations.findIndex(d => d[1] === 'd');\n        if (dayDurationIndex !== -1) {\n            offeredDurations.splice(dayDurationIndex, 1);\n        }\n    }\n    if (!offeredDurations.length) {\n        return noDurationsAvailable;\n    }\n    return (\n        offeredDurations\n            // Maintain order based on duration unit\n            .sort((a, b) => getDurationIndex(a.unit) - getDurationIndex(b.unit))\n    );\n};\n\nexport const haveContractsForSymbol = underlyingSymbol => {\n    const contractsForSymbol = contractsForStore.find(c => c.symbol === underlyingSymbol);\n    if (!contractsForSymbol) {\n        return false;\n    }\n    const tokenList = getTokenList();\n    const isDifferentAccount = () => tokenList.length && contractsForSymbol.accountName !== tokenList[0].accountName;\n    if (isDifferentAccount()) {\n        return false;\n    }\n    // Data expired, return cached data, retrieve updated data in background (if not already doing so)\n    const isExpiredData = () => Math.floor((Date.now() - contractsForSymbol.timestamp) / 1000) > 600;\n    if (isExpiredData()) {\n        const event = `contractsLoaded.${underlyingSymbol}`;\n        if (!globalObserver.isRegistered(event)) {\n            globalObserver.register(event);\n            getContractsAvailableForSymbolFromApi(underlyingSymbol);\n        }\n    }\n    return contractsForSymbol;\n};\n\nexport const getContractsAvailableForSymbol = async underlyingSymbol => {\n    const contractsForSymbol = haveContractsForSymbol(underlyingSymbol);\n    if (!contractsForSymbol) {\n        const contractsAvailableForSymbol = await getContractsAvailableForSymbolFromApi(underlyingSymbol);\n        return Promise.resolve(contractsAvailableForSymbol.available);\n    }\n    return Promise.resolve(contractsForSymbol.available);\n};\n\nexport const getContractsAvailableForSymbolFromApi = async underlyingSymbol => {\n    const api = generateLiveApiInstance();\n    let tokenList = getTokenList();\n    if (tokenList.length) {\n        try {\n            await api.authorize(tokenList[0].token);\n        } catch (e) {\n            removeAllTokens();\n            tokenList = [];\n        }\n    }\n    const contractsForSymbol = {};\n    try {\n        const response = await api.getContractsForSymbol(underlyingSymbol);\n        if (response.contracts_for) {\n            Object.assign(contractsForSymbol, {\n                symbol   : underlyingSymbol,\n                available: response.contracts_for.available,\n                timestamp: Date.now(),\n            });\n            if (tokenList.length) {\n                Object.assign(contractsForSymbol, {\n                    accountName: tokenList[0].accountName,\n                });\n            }\n            // Avoid duplicate symbols in contractsForStore\n            contractsForStore\n                .filter(c => c.symbol === underlyingSymbol)\n                .forEach(() =>\n                    contractsForStore.splice(contractsForStore.findIndex(c => c.symbol === underlyingSymbol), 1)\n                );\n            contractsForStore.push(contractsForSymbol);\n            localStorage.setItem('contractsForStore', JSON.stringify(contractsForStore));\n            globalObserver.unregisterAll(`contractsLoaded.${underlyingSymbol}`);\n        }\n    } catch (e) {\n        if (window.trackJs) {\n            trackJs.addMetadata('getContractsAvailableForSymbolFromApi Error', e.message);\n        }\n    }\n    if (typeof api.disconnect === 'function') {\n        api.disconnect();\n    }\n    return contractsForSymbol;\n};\n\nexport const getBarriersForContracts = (contracts, selectedContractType, selectedDuration, selectedBarrierTypes) => {\n    const barriers = { values: [] };\n    const category = getContractCategory(selectedContractType);\n    const contractsForContractCategory = filterContractsByCategory(contracts, category, selectedContractType);\n\n    const offsetRegex = new RegExp('^[-|+]([0-9]+.[0-9]+)$');\n    const isOffset = input => input && offsetRegex.test(input.toString());\n\n    if (contractsForContractCategory) {\n        const barrierProps = ['high_barrier', 'low_barrier'];\n\n        selectedBarrierTypes.forEach((barrierType, index) => {\n            const selectedOffset = ['+', '-'].includes(barrierType);\n\n            // Find barriers based on selected duration & by selected barrier type\n            // i.e. Hours & days can have different barrier values, offset + absolute sometimes have different values\n            let contract;\n            contract = contractsForContractCategory.find(c => {\n                const durations = getDurationsForContracts([c], selectedContractType);\n                if (durations.map(duration => duration.unit).includes(selectedDuration)) {\n                    const barrierIsOffset = () => isOffset(c.barrier || c[barrierProps[index]]);\n                    return (selectedOffset && barrierIsOffset()) || (!selectedOffset && !barrierIsOffset());\n                }\n                return false;\n            });\n            if (!contract) {\n                contract = contractsForContractCategory.find(\n                    c => barrierType === 'absolute' && !isOffset(c.barrier || c.high_barrier)\n                );\n            }\n            // Fallback to contract with smallest barriers\n            if (!contract) {\n                contract = contractsForContractCategory\n                    .sort((a, b) => {\n                        const c = a.barrier || a.high_barrier;\n                        const d = b.barrier || b.high_barrier;\n                        return parseFloat(c) - parseFloat(d);\n                    })\n                    .shift();\n            }\n            const barrierlessCategories = ['reset', 'runs'];\n            if (contract && !barrierlessCategories.includes(contract.contract_category)) {\n                const propName = contract.barriers === 1 ? 'barrier' : barrierProps[index];\n                if (contract[propName]) {\n                    const barrierMatch = contract[propName].toString().match(offsetRegex);\n                    barriers.values[index] = barrierMatch ? barrierMatch[1] : contract[propName];\n                }\n\n                if (['intraday', 'tick'].includes(contract.expiry_type) && isOffset(contract[propName])) {\n                    barriers.allowBothTypes = true; // Allow both offset + absolute barriers\n                } else if (barrierType === 'absolute' && !isOffset(contract[propName])) {\n                    barriers.allowAbsoluteType = true;\n                }\n\n                if (contract.barriers === 1) {\n                    selectedBarrierTypes.splice(index + 1, 1);\n                }\n            }\n        });\n        if (\n            barriers.values.length === 2 &&\n            selectedBarrierTypes.every(val => val === selectedBarrierTypes[0]) &&\n            barriers.values.every(val => val === barriers.values[0])\n        ) {\n            // Set distinct values if equal barrier types have equal values\n            barriers.values[1] = (barriers.values[0] * 0.95).toFixed(1);\n        }\n    }\n    return barriers;\n};\n\nexport const getPredictionForContracts = (contracts, selectedContractType) => {\n    const category = getContractCategory(selectedContractType);\n    const contractsForContractCategory = filterContractsByCategory(contracts, category, selectedContractType);\n\n    const contractMapping = {};\n    if (category === 'digits') {\n        contractMapping.matchesdiffers = ['DIGITMATCH', 'DIGITDIFF'];\n        contractMapping.overunder = ['DIGITOVER', 'DIGITUNDER'];\n    } else if (category === 'highlowticks') {\n        contractMapping.highlowticks = ['TICKHIGH', 'TICKLOW'];\n    }\n\n    const predictionRange = [];\n    if (contractMapping[selectedContractType]) {\n        const contract = contractsForContractCategory.find(c =>\n            contractMapping[selectedContractType].includes(c.contract_type)\n        );\n        if (contract && contract.last_digit_range) {\n            predictionRange.push(...contract.last_digit_range);\n        } else {\n            predictionRange.push(0);\n        }\n    }\n    return predictionRange;\n};\n\nexport const pollForContracts = symbol =>\n    new Promise(resolve => {\n        const contractsForSymbol = haveContractsForSymbol(symbol);\n        if (!contractsForSymbol) {\n            // Register an event and use as a lock to avoid spamming API\n            const event = `contractsLoaded.${symbol}`;\n            if (!globalObserver.isRegistered(event)) {\n                globalObserver.register(event, () => {});\n                getContractsAvailableForSymbol(symbol).then(contracts => {\n                    globalObserver.unregisterAll(event); // Release the lock\n                    resolve(contracts);\n                });\n            } else {\n                // Request in progress, start polling localStorage until contracts are available.\n                const pollingFn = setInterval(() => {\n                    const contracts = haveContractsForSymbol(symbol);\n                    if (contracts) {\n                        clearInterval(pollingFn);\n                        resolve(contracts.available);\n                    }\n                }, 100);\n                setTimeout(() => {\n                    clearInterval(pollingFn);\n                    resolve([]);\n                }, 10000);\n            }\n        } else {\n            resolve(contractsForSymbol.available);\n        }\n    });\n","import { fieldGeneratorMapping, saveAs } from './shared';\nimport config                            from '../constants/const';\nimport { translate }                     from '../utils/lang/i18n';\nimport { observer as globalObserver }    from '../utils/observer';\n\nexport const isMainBlock = blockType => config.mainBlocks.indexOf(blockType) >= 0;\n\nexport const oppositesToDropdown = op => op.map(k => Object.entries(k)[0].reverse());\n\nexport const backwardCompatibility = block => {\n    if (block.getAttribute('type') === 'on_strategy') {\n        block.setAttribute('type', 'before_purchase');\n    } else if (block.getAttribute('type') === 'on_finish') {\n        block.setAttribute('type', 'after_purchase');\n    }\n    Array.from(block.getElementsByTagName('statement')).forEach(statement => {\n        if (statement.getAttribute('name') === 'STRATEGY_STACK') {\n            statement.setAttribute('name', 'BEFOREPURCHASE_STACK');\n        } else if (statement.getAttribute('name') === 'FINISH_STACK') {\n            statement.setAttribute('name', 'AFTERPURCHASE_STACK');\n        }\n    });\n    if (isMainBlock(block.getAttribute('type'))) {\n        block.removeAttribute('deletable');\n    }\n};\n\nexport const removeUnavailableMarkets = block => {\n    const containsUnavailableMarket = Array.from(block.getElementsByTagName('field')).some(\n        field =>\n            field.getAttribute('name') === 'MARKET_LIST' &&\n            !fieldGeneratorMapping\n                .MARKET_LIST()\n                .map(markets => markets[1])\n                .includes(field.innerText)\n    );\n    if (containsUnavailableMarket) {\n        const nodesToRemove = ['MARKET_LIST', 'SUBMARKET_LIST', 'SYMBOL_LIST', 'TRADETYPECAT_LIST', 'TRADETYPE_LIST'];\n        Array.from(block.getElementsByTagName('field')).forEach(field => {\n            if (nodesToRemove.includes(field.getAttribute('name'))) {\n                block.removeChild(field);\n            }\n        });\n    }\n    return containsUnavailableMarket;\n};\n\n// Checks for a valid tradeTypeCategory, and attempts to fix if invalid\n// Some tradeTypes were moved to new tradeTypeCategories, this function allows older strategies to keep functioning\nexport const strategyHasValidTradeTypeCategory = xml => {\n    const isTradeTypeListBlock = block =>\n        block.getAttribute('type') === 'trade' &&\n        Array.from(block.getElementsByTagName('field')).some(field => field.getAttribute('name') === 'TRADETYPE_LIST');\n    const xmlBlocks = Array.from(xml.children);\n    const containsTradeTypeBlock = xmlBlocks.some(block => isTradeTypeListBlock(block));\n    if (!containsTradeTypeBlock) {\n        return true;\n    }\n    const validTradeTypeCategory = xmlBlocks.some(block => {\n        if (isTradeTypeListBlock(block)) {\n            const xmlFields = Array.from(block.getElementsByTagName('field'));\n            return xmlFields.some(xmlField => {\n                if (xmlField.getAttribute('name') === 'TRADETYPE_LIST') {\n                    // Retrieves the correct TRADETYPECAT_LIST for this TRADETYPE_LIST e.g. 'risefallequals' = 'callputequal'\n                    const tradeTypeCategory = Object.keys(config.conditionsCategory).find(c =>\n                        config.conditionsCategory[c].includes(xmlField.innerText)\n                    );\n                    // Check if the current TRADETYPECAT_LIST is equal to the tradeTypeCategory\n                    const tradeTypeCategoryIsEqual = xmlFields.some(\n                        f => f.getAttribute('name') === 'TRADETYPECAT_LIST' && f.textContent === tradeTypeCategory\n                    );\n                    // If the Trade Type Category is invalid, try to fix it\n                    if (!tradeTypeCategoryIsEqual) {\n                        try {\n                            const tempWorkspace = new Blockly.Workspace({});\n                            const blocklyBlock = Blockly.Xml.domToBlock(block, tempWorkspace);\n                            const availableCategories = fieldGeneratorMapping.TRADETYPECAT_LIST(blocklyBlock)();\n                            return xmlFields.some(\n                                f =>\n                                    f.getAttribute('name') === 'TRADETYPECAT_LIST' &&\n                                    availableCategories.some(\n                                        category =>\n                                            category[1] === tradeTypeCategory &&\n                                            Object.assign(f, { textContent: tradeTypeCategory })\n                                    )\n                            );\n                        } catch (e) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n                return false;\n            });\n        }\n        return false;\n    });\n    if (!validTradeTypeCategory) {\n        const errorMessage = translate('The strategy you tried to import is invalid.');\n        globalObserver.emit('ui.log.error', errorMessage);\n\n        if (window.trackJs) {\n            trackJs.track(errorMessage);\n        }\n    }\n    return validTradeTypeCategory;\n};\n\nconst getCollapsedProcedures = () =>\n    Blockly.mainWorkspace\n        .getTopBlocks()\n        // eslint-disable-next-line no-underscore-dangle\n        .filter(block => !isMainBlock(block.type) && block.collapsed_ && block.type.indexOf('procedures_def') === 0);\n\nexport const fixCollapsedBlocks = () =>\n    getCollapsedProcedures().forEach(block => {\n        block.setCollapsed(false);\n        block.setCollapsed(true);\n    });\n\nexport const cleanUpOnLoad = (blocksToClean, dropEvent) => {\n    const { clientX = 0, clientY = 0 } = dropEvent || {};\n    const blocklyMetrics = Blockly.mainWorkspace.getMetrics();\n    const scaleCancellation = 1 / Blockly.mainWorkspace.scale;\n    const blocklyLeft = blocklyMetrics.absoluteLeft - blocklyMetrics.viewLeft;\n    const blocklyTop = document.body.offsetHeight - blocklyMetrics.viewHeight - blocklyMetrics.viewTop;\n    const cursorX = clientX ? (clientX - blocklyLeft) * scaleCancellation : 0;\n    let cursorY = clientY ? (clientY - blocklyTop) * scaleCancellation : 0;\n    blocksToClean.forEach(block => {\n        block.moveBy(cursorX, cursorY);\n        block.snapToGrid();\n        cursorY += block.getHeightWidth().height + Blockly.BlockSvg.MIN_BLOCK_Y;\n    });\n    // Fire an event to allow scrollbars to resize.\n    Blockly.mainWorkspace.resizeContents();\n};\n\nexport const deleteBlockIfExists = block => {\n    Blockly.Events.recordUndo = false;\n    const existed = Blockly.mainWorkspace\n        .getTopBlocks()\n        .filter(mainBlock => !block.isInFlyout && mainBlock.id !== block.id && mainBlock.type === block.type)\n        .map(b => b.dispose()).length;\n    Blockly.Events.recordUndo = true;\n    return existed;\n};\n\nexport const setBlockTextColor = block => {\n    Blockly.Events.recordUndo = false;\n    if (block.inputList instanceof Array) {\n        Array.from(block.inputList).forEach(inp =>\n            inp.fieldRow.forEach(field => {\n                if (field instanceof Blockly.FieldLabel) {\n                    const svgElement = field.getSvgRoot();\n                    if (svgElement) {\n                        svgElement.style.setProperty('fill', 'white', 'important');\n                    }\n                }\n            })\n        );\n    }\n    const field = block.getField();\n    if (field) {\n        const svgElement = field.getSvgRoot();\n        if (svgElement) {\n            svgElement.style.setProperty('fill', 'white', 'important');\n        }\n    }\n    Blockly.Events.recordUndo = true;\n};\n\nexport const configMainBlock = (ev, type) => {\n    if (ev.type === 'create') {\n        ev.ids.forEach(blockId => {\n            const block = Blockly.mainWorkspace.getBlockById(blockId);\n            if (block && block.type === type) {\n                deleteBlockIfExists(block);\n            }\n        });\n    }\n};\n\nexport const getBlockByType = type => Blockly.mainWorkspace.getAllBlocks().find(block => type === block.type);\n\nexport const getBlocksByType = type => Blockly.mainWorkspace.getAllBlocks().filter(block => type === block.type);\n\nexport const getTopBlocksByType = type => Blockly.mainWorkspace.getTopBlocks().filter(block => type === block.type);\n\nexport const getMainBlocks = () => config.mainBlocks.map(blockType => getBlockByType(blockType)).filter(b => b);\n\nexport const findTopParentBlock = b => {\n    let block = b;\n    // eslint-disable-next-line no-underscore-dangle\n    let pblock = block.parentBlock_;\n    if (pblock === null) {\n        return null;\n    }\n    while (pblock !== null) {\n        if (pblock.type === 'trade') {\n            return pblock;\n        }\n        block = pblock;\n        // eslint-disable-next-line no-underscore-dangle\n        pblock = block.parentBlock_;\n    }\n    return block;\n};\n\nexport const insideMainBlocks = block => {\n    const parent = findTopParentBlock(block);\n    if (!parent) {\n        return false;\n    }\n    return parent.type && isMainBlock(parent.type);\n};\n\nexport const save = (filename = 'deriv-bot', collection = false, xmlDom) => {\n    xmlDom.setAttribute('collection', collection ? 'true' : 'false');\n    const data = Blockly.Xml.domToPrettyText(xmlDom);\n    saveAs({ data, type: 'text/xml;charset=utf-8', filename: `${filename}.xml` });\n};\n\nexport const disable = (blockObj, message) => {\n    if (!blockObj.disabled) {\n        if (message) {\n            globalObserver.emit('ui.log.warn', message);\n        }\n    }\n    Blockly.Events.recordUndo = false;\n    blockObj.setDisabled(true);\n    Blockly.Events.recordUndo = true;\n};\n\nexport const enable = blockObj => {\n    Blockly.Events.recordUndo = false;\n    blockObj.setDisabled(false);\n    Blockly.Events.recordUndo = true;\n};\n\nexport const expandDuration = duration =>\n    `${duration\n        .replace(/t/g, ' tick')\n        .replace(/s/g, ' second')\n        .replace(/m/g, ' minute')\n        .replace(/h/g, ' hour')\n        .replace(/d/g, ' day')}(s)`;\n\nconst isProcedure = blockType => ['procedures_defreturn', 'procedures_defnoreturn'].indexOf(blockType) >= 0;\n\n// dummy event to recover deleted blocks loaded by loader\nclass DeleteStray extends Blockly.Events.Abstract {\n    constructor(block) {\n        super(block);\n        this.run(true);\n    }\n\n    run(redo) {\n        const { recordUndo } = Blockly.Events;\n        Blockly.Events.recordUndo = false;\n        const sourceBlock = Blockly.mainWorkspace.getBlockById(this.blockId);\n        if (!sourceBlock) {\n            return;\n        }\n        if (redo) {\n            sourceBlock.setFieldValue(`${sourceBlock.getFieldValue('NAME')} (deleted)`, 'NAME');\n            sourceBlock.setDisabled(true);\n        } else {\n            sourceBlock.setFieldValue(sourceBlock.getFieldValue('NAME').replace(' (deleted)', ''), 'NAME');\n            sourceBlock.setDisabled(false);\n        }\n        Blockly.Events.recordUndo = recordUndo;\n    }\n}\nDeleteStray.prototype.type = 'deletestray';\n\n// dummy event to hide the element after creation\nclass Hide extends Blockly.Events.Abstract {\n    constructor(block, header) {\n        super(block);\n        this.sourceHeaderId = header.id;\n        this.run(true);\n    }\n    \n    run() {\n        const { recordUndo } = Blockly.Events;\n        Blockly.Events.recordUndo = false;\n        const sourceBlock = Blockly.mainWorkspace.getBlockById(this.blockId);\n        const sourceHeader = Blockly.mainWorkspace.getBlockById(this.sourceHeaderId);\n        sourceBlock.loaderId = sourceHeader.id;\n        sourceHeader.loadedByMe.push(sourceBlock.id);\n        sourceBlock.getSvgRoot().style.display = 'none';\n        Blockly.Events.recordUndo = recordUndo;\n    }\n}\nHide.prototype.type = 'hide';\n\nexport const deleteBlocksLoadedBy = (id, eventGroup = true) => {\n    Blockly.Events.setGroup(eventGroup);\n    Blockly.mainWorkspace.getTopBlocks().forEach(block => {\n        if (block.loaderId === id) {\n            if (isProcedure(block.type)) {\n                if (block.getFieldValue('NAME').indexOf('deleted') < 0) {\n                    Blockly.Events.fire(new DeleteStray(block));\n                }\n            } else {\n                block.dispose();\n            }\n        }\n    });\n    Blockly.Events.setGroup(false);\n};\n\nexport const fixArgumentAttribute = xml => {\n    Array.from(xml.getElementsByTagName('arg')).forEach(o => {\n        if (o.hasAttribute('varid')) o.setAttribute('varId', o.getAttribute('varid'));\n    });\n};\n\nexport const addDomAsBlock = blockXml => {\n    if (blockXml.tagName === 'variables') {\n        return Blockly.Xml.domToVariables(blockXml, Blockly.mainWorkspace);\n    }\n    backwardCompatibility(blockXml);\n    const blockType = blockXml.getAttribute('type');\n    if (isMainBlock(blockType)) {\n        Blockly.mainWorkspace\n            .getTopBlocks()\n            .filter(b => b.type === blockType)\n            .forEach(b => b.dispose());\n    }\n    if (isProcedure(blockType)) {\n        fixArgumentAttribute(blockXml);\n    }\n    return Blockly.Xml.domToBlock(blockXml, Blockly.mainWorkspace);\n};\n\n/* const replaceDeletedBlock = block => {\n    const procedureName = block.getFieldValue('NAME');\n    const oldProcedure = Blockly.Procedures.getDefinition(`${procedureName} (deleted)`, Blockly.mainWorkspace);\n    if (oldProcedure) {\n        const { recordUndo } = Blockly.Events;\n        Blockly.Events.recordUndo = false;\n        const f = block.getField('NAME');\n        // eslint-disable-next-line no-underscore-dangle\n        f.text_ = `${procedureName} (deleted)`;\n        oldProcedure.dispose();\n        block.setFieldValue(`${procedureName}`, 'NAME');\n        Blockly.Events.recordUndo = recordUndo;\n    }\n}; */\n\nexport const recoverDeletedBlock = block => {\n    const { recordUndo } = Blockly.Events;\n    Blockly.Events.recordUndo = false;\n    block.setFieldValue(block.getFieldValue('NAME').replace(' (deleted)', ''), 'NAME');\n    block.setDisabled(false);\n    Blockly.Events.recordUndo = recordUndo;\n};\n\nconst addDomAsBlockFromHeader = (blockXml /* , header = null */) => {\n    // const oldVars = [...Blockly.mainWorkspace.variableList];\n    const block = Blockly.Xml.domToBlock(blockXml, Blockly.mainWorkspace);\n    /* Blockly.mainWorkspace.variableList = Blockly.mainWorkspace.variableList.filter(v => {\n        if (oldVars.indexOf(v) >= 0) {\n            return true;\n        }\n        header.loadedVariables.push(v);\n        return false;\n    });\n    replaceDeletedBlock(block);\n    Blockly.Events.fire(new Hide(block, header)); */\n    return block;\n};\n\nconst processLoaders = (xml, header = null) => {\n    const promises = [];\n    Array.from(xml.children).forEach(block => {\n        if (block.getAttribute('type') === 'loader') {\n            block.remove();\n\n            const loader = header\n                ? addDomAsBlockFromHeader(block, header)\n                : Blockly.Xml.domToBlock(block, Blockly.mainWorkspace);\n\n            promises.push(loadRemote(loader)); // eslint-disable-line no-use-before-define\n        }\n    });\n    return promises;\n};\n\nexport const addLoadersFirst = (xml, header = null) =>\n    new Promise((resolve, reject) => {\n        const promises = processLoaders(xml, header);\n        if (promises.length) {\n            Promise.all(promises).then(resolve, reject);\n        } else {\n            resolve([]);\n        }\n    });\n\nconst loadBlocksFromHeader = (blockStr = '', header) =>\n    new Promise((resolve, reject) => {\n        let xml;\n        try {\n            xml = Blockly.Xml.textToDom(blockStr);\n        } catch (e) {\n            reject(translate('Unrecognized file format.'));\n        }\n        try {\n            if (xml.hasAttribute('collection') && xml.getAttribute('collection') === 'true') {\n                const { recordUndo } = Blockly.Events;\n                Blockly.Events.recordUndo = false;\n                addLoadersFirst(xml, header).then(\n                    () => {\n                        Array.from(xml.children)\n                            .filter(\n                                block =>\n                                    block.getAttribute('type') === 'tick_analysis' ||\n                                    isProcedure(block.getAttribute('type'))\n                            )\n                            .forEach(block => addDomAsBlockFromHeader(block, header));\n\n                        Blockly.Events.recordUndo = recordUndo;\n                        resolve();\n                    },\n                    e => {\n                        Blockly.Events.recordUndo = recordUndo;\n                        reject(e);\n                    }\n                );\n            } else {\n                reject(translate('Remote blocks to load must be a collection.'));\n            }\n        } catch (e) {\n            reject(translate('Unable to load the block file.'));\n        }\n    });\n\nexport const loadRemote = blockObj =>\n    new Promise((resolve, reject) => {\n        let url = blockObj.getFieldValue('URL');\n        if (url.indexOf('http') !== 0) {\n            url = `http://${url}`;\n        }\n        if (!url.match(/[^/]*\\.[a-zA-Z]{3}$/) && url.slice(-1)[0] !== '/') {\n            reject(translate('Target must be an xml file'));\n        } else {\n            if (url.slice(-1)[0] === '/') {\n                url += 'index.xml';\n            }\n            let isNew = true;\n            getTopBlocksByType('loader').forEach(block => {\n                if (block.id !== blockObj.id && block.url === url) {\n                    isNew = false;\n                }\n            });\n            if (!isNew) {\n                disable(blockObj);\n                reject(translate('This url is already loaded'));\n            } else {\n                $.ajax({\n                    type: 'GET',\n                    url,\n                })\n                    .fail(e => {\n                        if (e.status) {\n                            reject(\n                                Error(\n                                    `${translate('An error occurred while trying to load the url')}: ${e.status} ${\n                                        e.statusText\n                                    }`\n                                )\n                            );\n                        } else {\n                            reject(\n                                Error(\n                                    translate(\n                                        'Make sure \\'Access-Control-Allow-Origin\\' exists in the response from the server'\n                                    )\n                                )\n                            );\n                        }\n                        deleteBlocksLoadedBy(blockObj.id);\n                    })\n                    .done(xml => {\n                        loadBlocksFromHeader(xml, blockObj).then(() => {\n                            enable(blockObj);\n                            blockObj.url = url; // eslint-disable-line no-param-reassign\n                            resolve(blockObj);\n                        }, reject);\n                    });\n            }\n        }\n    });\n\nexport const hideInteractionsFromBlockly = callback => {\n    Blockly.Events.recordUndo = false;\n    callback();\n    Blockly.Events.recordUndo = true;\n};\n\nexport const cleanBeforeExport = xml => {\n    Array.from(xml.children).forEach(blockDom => {\n        const blockId = blockDom.getAttribute('id');\n        if (!blockId) return;\n        const block = Blockly.mainWorkspace.getBlockById(blockId);\n        if ('loaderId' in block) {\n            blockDom.remove();\n        }\n    });\n};\n","/* eslint-disable no-underscore-dangle */\nimport { observable, action } from 'mobx';\nimport { translate } from '../utils/lang/i18n';\n\nexport default class FlyoutStore {\n    block_listeners = [];\n    block_workspaces = [];\n    flyout_min_width = 400;\n\n    @observable is_help_content = false;\n    @observable block_nodes = [];\n    @observable flyout_content = [];\n    @observable flyout_width = this.flyout_min_width;\n    @observable is_visible = false;\n\n    /**\n     * Parses XML contents passed by Blockly.Toolbox. Supports all default\n     * Blockly.Flyout elements i.e. <block>, <label>, <button> in their\n     * original format, e.g. <label text=\"Hello World\" />\n     * @param {Element[]} xml_list list of XML nodes\n     * @memberof FlyoutStore\n     */\n    @action.bound setContents(xml_list) {\n        let processed_xml = xml_list;\n        this.block_listeners.forEach(listener => Blockly.unbindEvent_(listener));\n        this.block_workspaces.forEach(workspace => workspace.dispose());\n        this.block_listeners = [];\n        this.block_workspaces = [];\n        this.is_help_content = false;\n\n        if (xml_list.type === 'search') {\n            const blocks = xml_list.blocks;\n            const has_result = blocks.length;\n\n            processed_xml = [];\n\n            if (!has_result) {\n                const label = document.createElement('label');\n                label.setAttribute('text', translate('No Blocks Found'));\n\n                processed_xml.push(label);\n            } else {\n                const label = document.createElement('label');\n                label.setAttribute('text', translate('Result(s)'));\n\n                processed_xml.push(label);\n            }\n\n            processed_xml = processed_xml.concat(blocks);\n        }\n\n        const xml_list_group = this.groupBy(processed_xml);\n\n        this.flyout_content = observable(xml_list_group);\n        this.setFlyoutWidth(processed_xml);\n        this.setVisibility(true);\n    }\n\n    /**\n     * Sets whether the flyout is visible or not.\n     * @param {boolean} is_visible\n     * @memberof FlyoutStore\n     */\n    @action.bound setVisibility(is_visible) {\n        this.is_visible = is_visible;\n\n        if (!is_visible) {\n            this.flyout_content = observable([]);\n        }\n    }\n\n    /**\n     * Intialises a workspace unique to the passed block_node\n     * @param {Element} el_block_workspace Element where Blockly.Workspace will be mounted on\n     * @param {Element} block_node DOM of a Blockly.Block\n     * @memberof FlyoutStore\n     */\n    @action.bound initBlockWorkspace(el_block_workspace, block_node) {\n        const workspace = Blockly.inject(el_block_workspace, {\n            css   : false,\n            media: `${__webpack_public_path__}media/`, // eslint-disable-line\n            move  : { scrollbars: false, drag: true, wheel: false },\n            sounds: false,\n        });\n\n        workspace.isFlyout = true;\n        workspace.targetWorkspace = Blockly.derivWorkspace;\n\n        const block = Blockly.Xml.domToBlock(block_node, workspace);\n\n        block.isInFlyout = true;\n\n        // Some blocks have hats, consider their height.\n        const extra_spacing = (block.startHat_ ? Blockly.BlockSvg.START_HAT_HEIGHT : 0);\n        const block_workspace_height = Number.parseInt(block_node.getAttribute('height')) + extra_spacing + 10;\n\n        // Update block workspace widths to accommodate block widths.\n        el_block_workspace.style.height = `${block_workspace_height}px`;\n        el_block_workspace.style.width = `${this.flyout_width - 55}px`;\n\n        // Move block away from side so it's displayed completely.\n        const dx = 1;\n        const dy = 5 + extra_spacing;\n\n        block.moveBy(dx, dy);\n\n        // Use original Blockly flyout functionality to create block on drag.\n        const blockly_flyout = Blockly.derivWorkspace.toolbox_.flyout_;\n\n        this.block_listeners.push(\n            Blockly.bindEventWithChecks_(block.getSvgRoot(), 'mousedown', null, (event) => {\n                blockly_flyout.blockMouseDown_(block)(event);\n            })\n        );\n\n        this.block_workspaces.push(workspace);\n        this.block_workspaces.forEach(Blockly.svgResize);\n    }\n\n    /**\n     * Walks through xmlList and finds width of the longest block while setting\n     * height and width (in workspace pixels) attributes on each of the block nodes.\n     * @param {Element[]} xmlList\n     * @memberof FlyoutStore\n     */\n    @action.bound setFlyoutWidth(xmlList) {\n        let longest_block_width = 0;\n\n        xmlList.forEach((node) => {\n            const tag_name = node.tagName.toUpperCase();\n\n            if (tag_name === Blockly.Xml.NODE_BLOCK) {\n                const block_hw = Blockly.Block.getDimensions(node);\n\n                node.setAttribute('width', block_hw.width);\n                node.setAttribute('height', block_hw.height);\n                longest_block_width = Math.max(longest_block_width, block_hw.width);\n            }\n        });\n\n        this.flyout_width = Math.max(this.flyout_min_width, longest_block_width + 60);\n    }\n\n    @action.bound onSequenceClick(block_name, should_go_next) {\n        const toolbox = Blockly.derivWorkspace.toolbox_;\n        const selected_category = toolbox.getSelectedItem();\n        const xml_list = toolbox.getCategoryContents(selected_category);\n        const xml_list_group = this.groupBy(xml_list, true);\n        const current_block = xml_list.find(xml => xml.getAttribute('type') === block_name);\n\n        let current_block_index;\n\n        Object.keys(xml_list_group).forEach((key, index) => {\n            if (current_block.getAttribute('type') === key) {\n                current_block_index = index;\n            }\n        });\n        const last_position = Object.keys(xml_list_group).length - 1;\n\n        const adjustIndexOutOfBounds = (current_index, last_index) => {\n            let current_pos = current_index;\n            if (current_pos < 0) {\n                current_pos = last_index;\n            } else if (current_pos > last_index) {\n                current_pos = 0;\n            }\n\n            return current_pos;\n        };\n\n        const increment = should_go_next ? 1 : -1;\n\n        current_block_index = adjustIndexOutOfBounds(current_block_index + increment, last_position);\n\n        const block_type = Object.keys(xml_list_group).find((key, index) => current_block_index === index);\n        const target_blocks = xml_list_group[block_type];\n\n        this.showHelpContent(target_blocks);\n    }\n\n    @action.bound showHelpContent(block_node) {\n        Object.keys(block_node).forEach(key => {\n            const node = block_node[key];\n            const block_hw = Blockly.Block.getDimensions(node);\n\n            node.setAttribute('width', block_hw.width);\n            node.setAttribute('height', block_hw.height);\n        });\n\n        this.flyout_width = 600;\n        this.block_nodes = block_node;\n        this.is_help_content = true;\n    }\n\n    // eslint-disable-next-line\n    groupBy(nodes, should_include_block_only = false) {\n        return nodes.reduce(function (block_group, node) {\n            const type = node.getAttribute('type');\n\n            if (should_include_block_only && type === null) {\n                return block_group;\n            }\n\n            if (!block_group[type]){\n                block_group[type] = [];\n            }\n\n            if (!should_include_block_only || (should_include_block_only && type !== null)) {\n                block_group[type].push(node);\n            }\n            \n            return block_group;\n        }, {});\n    }\n}\n"],"sourceRoot":""}